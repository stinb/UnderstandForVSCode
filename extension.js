"use strict";var k=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Wt=k(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.asPromise=Ke.thenable=Ke.typedArray=Ke.stringArray=Ke.array=Ke.func=Ke.error=Ke.number=Ke.string=Ke.boolean=void 0;function lp(n){return n===!0||n===!1}Ke.boolean=lp;function Yl(n){return typeof n=="string"||n instanceof String}Ke.string=Yl;function dp(n){return typeof n=="number"||n instanceof Number}Ke.number=dp;function fp(n){return n instanceof Error}Ke.error=fp;function Zl(n){return typeof n=="function"}Ke.func=Zl;function ed(n){return Array.isArray(n)}Ke.array=ed;function hp(n){return ed(n)&&n.every(e=>Yl(e))}Ke.stringArray=hp;function gp(n,e){return Array.isArray(n)&&n.every(e)}Ke.typedArray=gp;function td(n){return n&&Zl(n.then)}Ke.thenable=td;function pp(n){return n instanceof Promise?n:td(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}Ke.asPromise=pp});var Tr=k(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.stringArray=lt.array=lt.func=lt.error=lt.number=lt.string=lt.boolean=void 0;function mp(n){return n===!0||n===!1}lt.boolean=mp;function nd(n){return typeof n=="string"||n instanceof String}lt.string=nd;function yp(n){return typeof n=="number"||n instanceof Number}lt.number=yp;function vp(n){return n instanceof Error}lt.error=vp;function Cp(n){return typeof n=="function"}lt.func=Cp;function rd(n){return Array.isArray(n)}lt.array=rd;function Dp(n){return rd(n)&&n.every(e=>nd(e))}lt.stringArray=Dp});var zo=k(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Message=Q.NotificationType9=Q.NotificationType8=Q.NotificationType7=Q.NotificationType6=Q.NotificationType5=Q.NotificationType4=Q.NotificationType3=Q.NotificationType2=Q.NotificationType1=Q.NotificationType0=Q.NotificationType=Q.RequestType9=Q.RequestType8=Q.RequestType7=Q.RequestType6=Q.RequestType5=Q.RequestType4=Q.RequestType3=Q.RequestType2=Q.RequestType1=Q.RequestType=Q.RequestType0=Q.AbstractMessageSignature=Q.ParameterStructures=Q.ResponseError=Q.ErrorCodes=void 0;var or=Tr(),id;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(id=Q.ErrorCodes||(Q.ErrorCodes={}));var bo=class n extends Error{constructor(e,t,r){super(t),this.code=or.number(e)?e:id.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,n.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Q.ResponseError=bo;var kt=class n{constructor(e){this.kind=e}static is(e){return e===n.auto||e===n.byName||e===n.byPosition}toString(){return this.kind}};Q.ParameterStructures=kt;kt.auto=new kt("auto");kt.byPosition=new kt("byPosition");kt.byName=new kt("byName");var Oe=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return kt.auto}};Q.AbstractMessageSignature=Oe;var Ro=class extends Oe{constructor(e){super(e,0)}};Q.RequestType0=Ro;var So=class extends Oe{constructor(e,t=kt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.RequestType=So;var wo=class extends Oe{constructor(e,t=kt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.RequestType1=wo;var To=class extends Oe{constructor(e){super(e,2)}};Q.RequestType2=To;var Po=class extends Oe{constructor(e){super(e,3)}};Q.RequestType3=Po;var qo=class extends Oe{constructor(e){super(e,4)}};Q.RequestType4=qo;var Eo=class extends Oe{constructor(e){super(e,5)}};Q.RequestType5=Eo;var ko=class extends Oe{constructor(e){super(e,6)}};Q.RequestType6=ko;var Io=class extends Oe{constructor(e){super(e,7)}};Q.RequestType7=Io;var xo=class extends Oe{constructor(e){super(e,8)}};Q.RequestType8=xo;var Oo=class extends Oe{constructor(e){super(e,9)}};Q.RequestType9=Oo;var Fo=class extends Oe{constructor(e,t=kt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.NotificationType=Fo;var No=class extends Oe{constructor(e){super(e,0)}};Q.NotificationType0=No;var Mo=class extends Oe{constructor(e,t=kt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.NotificationType1=Mo;var Lo=class extends Oe{constructor(e){super(e,2)}};Q.NotificationType2=Lo;var Ao=class extends Oe{constructor(e){super(e,3)}};Q.NotificationType3=Ao;var jo=class extends Oe{constructor(e){super(e,4)}};Q.NotificationType4=jo;var $o=class extends Oe{constructor(e){super(e,5)}};Q.NotificationType5=$o;var Ho=class extends Oe{constructor(e){super(e,6)}};Q.NotificationType6=Ho;var Uo=class extends Oe{constructor(e){super(e,7)}};Q.NotificationType7=Uo;var Wo=class extends Oe{constructor(e){super(e,8)}};Q.NotificationType8=Wo;var Ko=class extends Oe{constructor(e){super(e,9)}};Q.NotificationType9=Ko;var _p;(function(n){function e(i){let s=i;return s&&or.string(s.method)&&(or.string(s.id)||or.number(s.id))}n.isRequest=e;function t(i){let s=i;return s&&or.string(s.method)&&i.id===void 0}n.isNotification=t;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(or.string(s.id)||or.number(s.id)||s.id===null)}n.isResponse=r})(_p=Q.Message||(Q.Message={}))});var Go=k(Pn=>{"use strict";var sd;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.LRUCache=Pn.LinkedMap=Pn.Touch=void 0;var Ct;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Ct=Pn.Touch||(Pn.Touch={}));var Gi=class{constructor(){this[sd]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Ct.None){let r=this._map.get(e);if(r)return t!==Ct.None&&this.touch(r,t),r.value}set(e,t,r=Ct.None){let i=this._map.get(e);if(i)i.value=t,r!==Ct.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Ct.None:this.addItemLast(i);break;case Ct.First:this.addItemFirst(i);break;case Ct.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(sd=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Ct.First&&t!==Ct.Last)){if(t===Ct.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Ct.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};Pn.LinkedMap=Gi;var Vo=class extends Gi{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Ct.AsNew){return super.get(e,t)}peek(e){return super.get(e,Ct.None)}set(e,t){return super.set(e,t,Ct.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Pn.LRUCache=Vo});var od=k(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.Disposable=void 0;var bp;(function(n){function e(t){return{dispose:t}}n.create=e})(bp=ti.Disposable||(ti.Disposable={}))});var Xn=k(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var Bo;function Xo(){if(Bo===void 0)throw new Error("No runtime abstraction layer installed");return Bo}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");Bo=t}n.install=e})(Xo||(Xo={}));Qo.default=Xo});var Pr=k(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.Emitter=ar.Event=void 0;var Rp=Xn(),Sp;(function(n){let e={dispose(){}};n.None=function(){return e}})(Sp=ar.Event||(ar.Event={}));var Jo=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{t.push(r[s].apply(i[s],e))}catch(a){(0,Rp.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Bi=class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new Jo),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ar.Emitter=Bi;Bi._noop=function(){}});var Qi=k(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.CancellationTokenSource=cr.CancellationToken=void 0;var wp=Xn(),Tp=Tr(),Yo=Pr(),Zo;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Yo.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Yo.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||Tp.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(Zo=cr.CancellationToken||(cr.CancellationToken={}));var Pp=Object.freeze(function(n,e){let t=(0,wp.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),Xi=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Pp:(this._emitter||(this._emitter=new Yo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ea=class{get token(){return this._token||(this._token=new Xi),this._token}cancel(){this._token?this._token.cancel():this._token=Zo.Cancelled}dispose(){this._token?this._token instanceof Xi&&this._token.dispose():this._token=Zo.None}};cr.CancellationTokenSource=ea});var ad=k(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.SharedArrayReceiverStrategy=qr.SharedArraySenderStrategy=void 0;var qp=Qi(),ni;(function(n){n.Continue=0,n.Cancelled=1})(ni||(ni={}));var ta=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=ni.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,ni.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};qr.SharedArraySenderStrategy=ta;var na=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===ni.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},ra=class{constructor(e){this.token=new na(e)}cancel(){}dispose(){}},ia=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new qp.CancellationTokenSource:new ra(t)}};qr.SharedArrayReceiverStrategy=ia});var oa=k(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.Semaphore=void 0;var Ep=Xn(),sa=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Ep.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ji.Semaphore=sa});var cd=k(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.ReadableStreamMessageReader=qn.AbstractMessageReader=qn.MessageReader=void 0;var ca=Xn(),Er=Tr(),aa=Pr(),kp=oa(),Ip;(function(n){function e(t){let r=t;return r&&Er.func(r.listen)&&Er.func(r.dispose)&&Er.func(r.onError)&&Er.func(r.onClose)&&Er.func(r.onPartialMessage)}n.is=e})(Ip=qn.MessageReader||(qn.MessageReader={}));var Yi=class{constructor(){this.errorEmitter=new aa.Emitter,this.closeEmitter=new aa.Emitter,this.partialMessageEmitter=new aa.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Er.string(e.message)?e.message:"unknown"}`)}};qn.AbstractMessageReader=Yi;var ua;(function(n){function e(t){let r,i,s,o=new Map,a,u=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,o.set(s.name,s)),t.contentDecoders!==void 0)for(let h of t.contentDecoders)o.set(h.name,h);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,u.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let h of t.contentTypeDecoders)u.set(h.name,h)}return a===void 0&&(a=(0,ca.default)().applicationJson.decoder,u.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:u}}n.fromOptions=e})(ua||(ua={}));var la=class extends Yi{constructor(e,t){super(),this.readable=e,this.options=ua.fromOptions(t),this.buffer=(0,ca.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new kp.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,ca.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};qn.ReadableStreamMessageReader=la});var fd=k(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.WriteableStreamMessageWriter=En.AbstractMessageWriter=En.MessageWriter=void 0;var ud=Xn(),ri=Tr(),xp=oa(),ld=Pr(),Op="Content-Length: ",dd=`\r
`,Fp;(function(n){function e(t){let r=t;return r&&ri.func(r.dispose)&&ri.func(r.onClose)&&ri.func(r.onError)&&ri.func(r.write)}n.is=e})(Fp=En.MessageWriter||(En.MessageWriter={}));var Zi=class{constructor(){this.errorEmitter=new ld.Emitter,this.closeEmitter=new ld.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${ri.string(e.message)?e.message:"unknown"}`)}};En.AbstractMessageWriter=Zi;var da;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,ud.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,ud.default)().applicationJson.encoder}}n.fromOptions=e})(da||(da={}));var fa=class extends Zi{constructor(e,t){super(),this.writable=e,this.options=da.fromOptions(t),this.errorCount=0,this.writeSemaphore=new xp.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Op,r.byteLength.toString(),dd),i.push(dd),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};En.WriteableStreamMessageWriter=fa});var hd=k(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.AbstractMessageBuffer=void 0;var Np=13,Mp=10,Lp=`\r
`,ha=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,s=0;e:for(;r<this._chunks.length;){let h=this._chunks[r];for(i=0;i<h.length;){switch(h[i]){case Np:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case Mp:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}s+=h.byteLength,r++}if(t!==4)return;let o=this._read(s+i),a=new Map,u=this.toString(o,"ascii").split(Lp);if(u.length<2)return a;for(let h=0;h<u.length-2;h++){let y=u[h],C=y.indexOf(":");if(C===-1)throw new Error("Message header must separate key and value using :");let m=y.substr(0,C),w=y.substr(C+1).trim();a.set(e?m.toLowerCase():m,w)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};es.AbstractMessageBuffer=ha});var Dd=k(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.createMessageConnection=X.ConnectionOptions=X.MessageStrategy=X.CancellationStrategy=X.CancellationSenderStrategy=X.CancellationReceiverStrategy=X.RequestCancellationReceiverStrategy=X.IdCancellationReceiverStrategy=X.ConnectionStrategy=X.ConnectionError=X.ConnectionErrors=X.LogTraceNotification=X.SetTraceNotification=X.TraceFormat=X.TraceValues=X.Trace=X.NullLogger=X.ProgressType=X.ProgressToken=void 0;var gd=Xn(),Le=Tr(),Y=zo(),pd=Go(),ii=Pr(),ga=Qi(),oi;(function(n){n.type=new Y.NotificationType("$/cancelRequest")})(oi||(oi={}));var md;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(md=X.ProgressToken||(X.ProgressToken={}));var si;(function(n){n.type=new Y.NotificationType("$/progress")})(si||(si={}));var pa=class{constructor(){}};X.ProgressType=pa;var ma;(function(n){function e(t){return Le.func(t)}n.is=e})(ma||(ma={}));X.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Te;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Te=X.Trace||(X.Trace={}));var Ap;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(Ap=X.TraceValues||(X.TraceValues={}));(function(n){function e(r){if(!Le.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Te=X.Trace||(X.Trace={}));var Jt;(function(n){n.Text="text",n.JSON="json"})(Jt=X.TraceFormat||(X.TraceFormat={}));(function(n){function e(t){return Le.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(Jt=X.TraceFormat||(X.TraceFormat={}));var yd;(function(n){n.type=new Y.NotificationType("$/setTrace")})(yd=X.SetTraceNotification||(X.SetTraceNotification={}));var ya;(function(n){n.type=new Y.NotificationType("$/logTrace")})(ya=X.LogTraceNotification||(X.LogTraceNotification={}));var ts;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(ts=X.ConnectionErrors||(X.ConnectionErrors={}));var kr=class n extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,n.prototype)}};X.ConnectionError=kr;var vd;(function(n){function e(t){let r=t;return r&&Le.func(r.cancelUndispatched)}n.is=e})(vd=X.ConnectionStrategy||(X.ConnectionStrategy={}));var Da;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&Le.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Le.func(r.dispose))}n.is=e})(Da=X.IdCancellationReceiverStrategy||(X.IdCancellationReceiverStrategy={}));var Cd;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&Le.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Le.func(r.dispose))}n.is=e})(Cd=X.RequestCancellationReceiverStrategy||(X.RequestCancellationReceiverStrategy={}));var va;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new ga.CancellationTokenSource}});function e(t){return Da.is(t)||Cd.is(t)}n.is=e})(va=X.CancellationReceiverStrategy||(X.CancellationReceiverStrategy={}));var Ca;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(oi.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&Le.func(r.sendCancellation)&&Le.func(r.cleanup)}n.is=e})(Ca=X.CancellationSenderStrategy||(X.CancellationSenderStrategy={}));var _a;(function(n){n.Message=Object.freeze({receiver:va.Message,sender:Ca.Message});function e(t){let r=t;return r&&va.is(r.receiver)&&Ca.is(r.sender)}n.is=e})(_a=X.CancellationStrategy||(X.CancellationStrategy={}));var ba;(function(n){function e(t){let r=t;return r&&Le.func(r.handleMessage)}n.is=e})(ba=X.MessageStrategy||(X.MessageStrategy={}));var jp;(function(n){function e(t){let r=t;return r&&(_a.is(r.cancellationStrategy)||vd.is(r.connectionStrategy)||ba.is(r.messageStrategy))}n.is=e})(jp=X.ConnectionOptions||(X.ConnectionOptions={}));var Yt;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(Yt||(Yt={}));function $p(n,e,t,r){let i=t!==void 0?t:X.NullLogger,s=0,o=0,a=0,u="2.0",h,y=new Map,C,m=new Map,w=new Map,v,q=new pd.LinkedMap,E=new Map,N=new Set,L=new Map,M=Te.Off,H=Jt.Text,B,ue=Yt.New,z=new ii.Emitter,ee=new ii.Emitter,le=new ii.Emitter,Xe=new ii.Emitter,Ge=new ii.Emitter,et=r&&r.cancellationStrategy?r.cancellationStrategy:_a.Message;function Bt(D){if(D===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+D.toString()}function gt(D){return D===null?"res-unknown-"+(++a).toString():"res-"+D.toString()}function it(){return"not-"+(++o).toString()}function pt(D,x){Y.Message.isRequest(x)?D.set(Bt(x.id),x):Y.Message.isResponse(x)?D.set(gt(x.id),x):D.set(it(),x)}function ln(D){}function We(){return ue===Yt.Listening}function mt(){return ue===Yt.Closed}function Tt(){return ue===Yt.Disposed}function dn(){(ue===Yt.New||ue===Yt.Listening)&&(ue=Yt.Closed,ee.fire(void 0))}function ut(D){z.fire([D,void 0,void 0])}function ir(D){z.fire(D)}n.onClose(dn),n.onError(ut),e.onClose(dn),e.onError(ir);function Hn(){v||q.size===0||(v=(0,gd.default)().timer.setImmediate(()=>{v=void 0,_n()}))}function Dn(D){Y.Message.isRequest(D)?sr(D):Y.Message.isNotification(D)?Wn(D):Y.Message.isResponse(D)?Un(D):Rn(D)}function _n(){if(q.size===0)return;let D=q.shift();try{let x=r?.messageStrategy;ba.is(x)?x.handleMessage(D,Dn):Dn(D)}finally{Hn()}}let bn=D=>{try{if(Y.Message.isNotification(D)&&D.method===oi.type.method){let x=D.params.id,$=Bt(x),K=q.get($);if(Y.Message.isRequest(K)){let pe=r?.connectionStrategy,Se=pe&&pe.cancelUndispatched?pe.cancelUndispatched(K,ln):void 0;if(Se&&(Se.error!==void 0||Se.result!==void 0)){q.delete($),L.delete(x),Se.id=K.id,Ut(Se,D.method,Date.now()),e.write(Se).catch(()=>i.error("Sending response for canceled message failed."));return}}let ye=L.get(x);if(ye!==void 0){ye.cancel(),yt(D);return}else N.add(x)}pt(q,D)}finally{Hn()}};function sr(D){if(Tt())return;function x(ie,ve,d){let P={jsonrpc:u,id:D.id};ie instanceof Y.ResponseError?P.error=ie.toJson():P.result=ie===void 0?null:ie,Ut(P,ve,d),e.write(P).catch(()=>i.error("Sending response failed."))}function $(ie,ve,d){let P={jsonrpc:u,id:D.id,error:ie.toJson()};Ut(P,ve,d),e.write(P).catch(()=>i.error("Sending response failed."))}function K(ie,ve,d){ie===void 0&&(ie=null);let P={jsonrpc:u,id:D.id,result:ie};Ut(P,ve,d),e.write(P).catch(()=>i.error("Sending response failed."))}zn(D);let ye=y.get(D.method),pe,Se;ye&&(pe=ye.type,Se=ye.handler);let qe=Date.now();if(Se||h){let ie=D.id??String(Date.now()),ve=Da.is(et.receiver)?et.receiver.createCancellationTokenSource(ie):et.receiver.createCancellationTokenSource(D);D.id!==null&&N.has(D.id)&&ve.cancel(),D.id!==null&&L.set(ie,ve);try{let d;if(Se)if(D.params===void 0){if(pe!==void 0&&pe.numberOfParams!==0){$(new Y.ResponseError(Y.ErrorCodes.InvalidParams,`Request ${D.method} defines ${pe.numberOfParams} params but received none.`),D.method,qe);return}d=Se(ve.token)}else if(Array.isArray(D.params)){if(pe!==void 0&&pe.parameterStructures===Y.ParameterStructures.byName){$(new Y.ResponseError(Y.ErrorCodes.InvalidParams,`Request ${D.method} defines parameters by name but received parameters by position`),D.method,qe);return}d=Se(...D.params,ve.token)}else{if(pe!==void 0&&pe.parameterStructures===Y.ParameterStructures.byPosition){$(new Y.ResponseError(Y.ErrorCodes.InvalidParams,`Request ${D.method} defines parameters by position but received parameters by name`),D.method,qe);return}d=Se(D.params,ve.token)}else h&&(d=h(D.method,D.params,ve.token));let P=d;d?P.then?P.then(U=>{L.delete(ie),x(U,D.method,qe)},U=>{L.delete(ie),U instanceof Y.ResponseError?$(U,D.method,qe):U&&Le.string(U.message)?$(new Y.ResponseError(Y.ErrorCodes.InternalError,`Request ${D.method} failed with message: ${U.message}`),D.method,qe):$(new Y.ResponseError(Y.ErrorCodes.InternalError,`Request ${D.method} failed unexpectedly without providing any details.`),D.method,qe)}):(L.delete(ie),x(d,D.method,qe)):(L.delete(ie),K(d,D.method,qe))}catch(d){L.delete(ie),d instanceof Y.ResponseError?x(d,D.method,qe):d&&Le.string(d.message)?$(new Y.ResponseError(Y.ErrorCodes.InternalError,`Request ${D.method} failed with message: ${d.message}`),D.method,qe):$(new Y.ResponseError(Y.ErrorCodes.InternalError,`Request ${D.method} failed unexpectedly without providing any details.`),D.method,qe)}}else $(new Y.ResponseError(Y.ErrorCodes.MethodNotFound,`Unhandled method ${D.method}`),D.method,qe)}function Un(D){if(!Tt())if(D.id===null)D.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(D.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let x=D.id,$=E.get(x);if(Sn(D,$),$!==void 0){E.delete(x);try{if(D.error){let K=D.error;$.reject(new Y.ResponseError(K.code,K.message,K.data))}else if(D.result!==void 0)$.resolve(D.result);else throw new Error("Should never happen.")}catch(K){K.message?i.error(`Response handler '${$.method}' failed with message: ${K.message}`):i.error(`Response handler '${$.method}' failed unexpectedly.`)}}}}function Wn(D){if(Tt())return;let x,$;if(D.method===oi.type.method){let K=D.params.id;N.delete(K),yt(D);return}else{let K=m.get(D.method);K&&($=K.handler,x=K.type)}if($||C)try{if(yt(D),$)if(D.params===void 0)x!==void 0&&x.numberOfParams!==0&&x.parameterStructures!==Y.ParameterStructures.byName&&i.error(`Notification ${D.method} defines ${x.numberOfParams} params but received none.`),$();else if(Array.isArray(D.params)){let K=D.params;D.method===si.type.method&&K.length===2&&md.is(K[0])?$({token:K[0],value:K[1]}):(x!==void 0&&(x.parameterStructures===Y.ParameterStructures.byName&&i.error(`Notification ${D.method} defines parameters by name but received parameters by position`),x.numberOfParams!==D.params.length&&i.error(`Notification ${D.method} defines ${x.numberOfParams} params but received ${K.length} arguments`)),$(...K))}else x!==void 0&&x.parameterStructures===Y.ParameterStructures.byPosition&&i.error(`Notification ${D.method} defines parameters by position but received parameters by name`),$(D.params);else C&&C(D.method,D.params)}catch(K){K.message?i.error(`Notification handler '${D.method}' failed with message: ${K.message}`):i.error(`Notification handler '${D.method}' failed unexpectedly.`)}else le.fire(D)}function Rn(D){if(!D){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(D,null,4)}`);let x=D;if(Le.string(x.id)||Le.number(x.id)){let $=x.id,K=E.get($);K&&K.reject(new Error("The received response has neither a result nor an error property."))}}function tt(D){if(D!=null)switch(M){case Te.Verbose:return JSON.stringify(D,null,4);case Te.Compact:return JSON.stringify(D);default:return}}function Kn(D){if(!(M===Te.Off||!B))if(H===Jt.Text){let x;(M===Te.Verbose||M===Te.Compact)&&D.params&&(x=`Params: ${tt(D.params)}

`),B.log(`Sending request '${D.method} - (${D.id})'.`,x)}else Be("send-request",D)}function fn(D){if(!(M===Te.Off||!B))if(H===Jt.Text){let x;(M===Te.Verbose||M===Te.Compact)&&(D.params?x=`Params: ${tt(D.params)}

`:x=`No parameters provided.

`),B.log(`Sending notification '${D.method}'.`,x)}else Be("send-notification",D)}function Ut(D,x,$){if(!(M===Te.Off||!B))if(H===Jt.Text){let K;(M===Te.Verbose||M===Te.Compact)&&(D.error&&D.error.data?K=`Error data: ${tt(D.error.data)}

`:D.result?K=`Result: ${tt(D.result)}

`:D.error===void 0&&(K=`No result returned.

`)),B.log(`Sending response '${x} - (${D.id})'. Processing request took ${Date.now()-$}ms`,K)}else Be("send-response",D)}function zn(D){if(!(M===Te.Off||!B))if(H===Jt.Text){let x;(M===Te.Verbose||M===Te.Compact)&&D.params&&(x=`Params: ${tt(D.params)}

`),B.log(`Received request '${D.method} - (${D.id})'.`,x)}else Be("receive-request",D)}function yt(D){if(!(M===Te.Off||!B||D.method===ya.type.method))if(H===Jt.Text){let x;(M===Te.Verbose||M===Te.Compact)&&(D.params?x=`Params: ${tt(D.params)}

`:x=`No parameters provided.

`),B.log(`Received notification '${D.method}'.`,x)}else Be("receive-notification",D)}function Sn(D,x){if(!(M===Te.Off||!B))if(H===Jt.Text){let $;if((M===Te.Verbose||M===Te.Compact)&&(D.error&&D.error.data?$=`Error data: ${tt(D.error.data)}

`:D.result?$=`Result: ${tt(D.result)}

`:D.error===void 0&&($=`No result returned.

`)),x){let K=D.error?` Request failed: ${D.error.message} (${D.error.code}).`:"";B.log(`Received response '${x.method} - (${D.id})' in ${Date.now()-x.timerStart}ms.${K}`,$)}else B.log(`Received response ${D.id} without active response promise.`,$)}else Be("receive-response",D)}function Be(D,x){if(!B||M===Te.Off)return;let $={isLSPMessage:!0,type:D,message:x,timestamp:Date.now()};B.log($)}function Xt(){if(mt())throw new kr(ts.Closed,"Connection is closed.");if(Tt())throw new kr(ts.Disposed,"Connection is disposed.")}function vt(){if(We())throw new kr(ts.AlreadyListening,"Connection is already listening")}function wn(){if(!We())throw new Error("Call listen() first.")}function Ft(D){return D===void 0?null:D}function Tn(D){if(D!==null)return D}function Vn(D){return D!=null&&!Array.isArray(D)&&typeof D=="object"}function Pt(D,x){switch(D){case Y.ParameterStructures.auto:return Vn(x)?Tn(x):[Ft(x)];case Y.ParameterStructures.byName:if(!Vn(x))throw new Error("Received parameters by name but param is not an object literal.");return Tn(x);case Y.ParameterStructures.byPosition:return[Ft(x)];default:throw new Error(`Unknown parameter structure ${D.toString()}`)}}function Gn(D,x){let $,K=D.numberOfParams;switch(K){case 0:$=void 0;break;case 1:$=Pt(D.parameterStructures,x[0]);break;default:$=[];for(let ye=0;ye<x.length&&ye<K;ye++)$.push(Ft(x[ye]));if(x.length<K)for(let ye=x.length;ye<K;ye++)$.push(null);break}return $}let Nt={sendNotification:(D,...x)=>{Xt();let $,K;if(Le.string(D)){$=D;let pe=x[0],Se=0,qe=Y.ParameterStructures.auto;Y.ParameterStructures.is(pe)&&(Se=1,qe=pe);let ie=x.length,ve=ie-Se;switch(ve){case 0:K=void 0;break;case 1:K=Pt(qe,x[Se]);break;default:if(qe===Y.ParameterStructures.byName)throw new Error(`Received ${ve} parameters for 'by Name' notification parameter structure.`);K=x.slice(Se,ie).map(d=>Ft(d));break}}else{let pe=x;$=D.method,K=Gn(D,pe)}let ye={jsonrpc:u,method:$,params:K};return fn(ye),e.write(ye).catch(pe=>{throw i.error("Sending notification failed."),pe})},onNotification:(D,x)=>{Xt();let $;return Le.func(D)?C=D:x&&(Le.string(D)?($=D,m.set(D,{type:void 0,handler:x})):($=D.method,m.set(D.method,{type:D,handler:x}))),{dispose:()=>{$!==void 0?m.delete($):C=void 0}}},onProgress:(D,x,$)=>{if(w.has(x))throw new Error(`Progress handler for token ${x} already registered`);return w.set(x,$),{dispose:()=>{w.delete(x)}}},sendProgress:(D,x,$)=>Nt.sendNotification(si.type,{token:x,value:$}),onUnhandledProgress:Xe.event,sendRequest:(D,...x)=>{Xt(),wn();let $,K,ye;if(Le.string(D)){$=D;let ie=x[0],ve=x[x.length-1],d=0,P=Y.ParameterStructures.auto;Y.ParameterStructures.is(ie)&&(d=1,P=ie);let U=x.length;ga.CancellationToken.is(ve)&&(U=U-1,ye=ve);let se=U-d;switch(se){case 0:K=void 0;break;case 1:K=Pt(P,x[d]);break;default:if(P===Y.ParameterStructures.byName)throw new Error(`Received ${se} parameters for 'by Name' request parameter structure.`);K=x.slice(d,U).map(R=>Ft(R));break}}else{let ie=x;$=D.method,K=Gn(D,ie);let ve=D.numberOfParams;ye=ga.CancellationToken.is(ie[ve])?ie[ve]:void 0}let pe=s++,Se;ye&&(Se=ye.onCancellationRequested(()=>{let ie=et.sender.sendCancellation(Nt,pe);return ie===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${pe}`),Promise.resolve()):ie.catch(()=>{i.log(`Sending cancellation messages for id ${pe} failed`)})}));let qe={jsonrpc:u,id:pe,method:$,params:K};return Kn(qe),typeof et.sender.enableCancellation=="function"&&et.sender.enableCancellation(qe),new Promise(async(ie,ve)=>{let d=se=>{ie(se),et.sender.cleanup(pe),Se?.dispose()},P=se=>{ve(se),et.sender.cleanup(pe),Se?.dispose()},U={method:$,timerStart:Date.now(),resolve:d,reject:P};try{await e.write(qe),E.set(pe,U)}catch(se){throw i.error("Sending request failed."),U.reject(new Y.ResponseError(Y.ErrorCodes.MessageWriteError,se.message?se.message:"Unknown reason")),se}})},onRequest:(D,x)=>{Xt();let $=null;return ma.is(D)?($=void 0,h=D):Le.string(D)?($=null,x!==void 0&&($=D,y.set(D,{handler:x,type:void 0}))):x!==void 0&&($=D.method,y.set(D.method,{type:D,handler:x})),{dispose:()=>{$!==null&&($!==void 0?y.delete($):h=void 0)}}},hasPendingResponse:()=>E.size>0,trace:async(D,x,$)=>{let K=!1,ye=Jt.Text;$!==void 0&&(Le.boolean($)?K=$:(K=$.sendNotification||!1,ye=$.traceFormat||Jt.Text)),M=D,H=ye,M===Te.Off?B=void 0:B=x,K&&!mt()&&!Tt()&&await Nt.sendNotification(yd.type,{value:Te.toString(D)})},onError:z.event,onClose:ee.event,onUnhandledNotification:le.event,onDispose:Ge.event,end:()=>{e.end()},dispose:()=>{if(Tt())return;ue=Yt.Disposed,Ge.fire(void 0);let D=new Y.ResponseError(Y.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let x of E.values())x.reject(D);E=new Map,L=new Map,N=new Set,q=new pd.LinkedMap,Le.func(e.dispose)&&e.dispose(),Le.func(n.dispose)&&n.dispose()},listen:()=>{Xt(),vt(),ue=Yt.Listening,n.listen(bn)},inspect:()=>{(0,gd.default)().console.log("inspect")}};return Nt.onNotification(ya.type,D=>{if(M===Te.Off||!B)return;let x=M===Te.Verbose||M===Te.Compact;B.log(D.message,x?D.verbose:void 0)}),Nt.onNotification(si.type,D=>{let x=w.get(D.token);x?x(D.value):Xe.fire(D)}),Nt}X.createMessageConnection=$p});var ns=k(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.ProgressType=I.ProgressToken=I.createMessageConnection=I.NullLogger=I.ConnectionOptions=I.ConnectionStrategy=I.AbstractMessageBuffer=I.WriteableStreamMessageWriter=I.AbstractMessageWriter=I.MessageWriter=I.ReadableStreamMessageReader=I.AbstractMessageReader=I.MessageReader=I.SharedArrayReceiverStrategy=I.SharedArraySenderStrategy=I.CancellationToken=I.CancellationTokenSource=I.Emitter=I.Event=I.Disposable=I.LRUCache=I.Touch=I.LinkedMap=I.ParameterStructures=I.NotificationType9=I.NotificationType8=I.NotificationType7=I.NotificationType6=I.NotificationType5=I.NotificationType4=I.NotificationType3=I.NotificationType2=I.NotificationType1=I.NotificationType0=I.NotificationType=I.ErrorCodes=I.ResponseError=I.RequestType9=I.RequestType8=I.RequestType7=I.RequestType6=I.RequestType5=I.RequestType4=I.RequestType3=I.RequestType2=I.RequestType1=I.RequestType0=I.RequestType=I.Message=I.RAL=void 0;I.MessageStrategy=I.CancellationStrategy=I.CancellationSenderStrategy=I.CancellationReceiverStrategy=I.ConnectionError=I.ConnectionErrors=I.LogTraceNotification=I.SetTraceNotification=I.TraceFormat=I.TraceValues=I.Trace=void 0;var Ie=zo();Object.defineProperty(I,"Message",{enumerable:!0,get:function(){return Ie.Message}});Object.defineProperty(I,"RequestType",{enumerable:!0,get:function(){return Ie.RequestType}});Object.defineProperty(I,"RequestType0",{enumerable:!0,get:function(){return Ie.RequestType0}});Object.defineProperty(I,"RequestType1",{enumerable:!0,get:function(){return Ie.RequestType1}});Object.defineProperty(I,"RequestType2",{enumerable:!0,get:function(){return Ie.RequestType2}});Object.defineProperty(I,"RequestType3",{enumerable:!0,get:function(){return Ie.RequestType3}});Object.defineProperty(I,"RequestType4",{enumerable:!0,get:function(){return Ie.RequestType4}});Object.defineProperty(I,"RequestType5",{enumerable:!0,get:function(){return Ie.RequestType5}});Object.defineProperty(I,"RequestType6",{enumerable:!0,get:function(){return Ie.RequestType6}});Object.defineProperty(I,"RequestType7",{enumerable:!0,get:function(){return Ie.RequestType7}});Object.defineProperty(I,"RequestType8",{enumerable:!0,get:function(){return Ie.RequestType8}});Object.defineProperty(I,"RequestType9",{enumerable:!0,get:function(){return Ie.RequestType9}});Object.defineProperty(I,"ResponseError",{enumerable:!0,get:function(){return Ie.ResponseError}});Object.defineProperty(I,"ErrorCodes",{enumerable:!0,get:function(){return Ie.ErrorCodes}});Object.defineProperty(I,"NotificationType",{enumerable:!0,get:function(){return Ie.NotificationType}});Object.defineProperty(I,"NotificationType0",{enumerable:!0,get:function(){return Ie.NotificationType0}});Object.defineProperty(I,"NotificationType1",{enumerable:!0,get:function(){return Ie.NotificationType1}});Object.defineProperty(I,"NotificationType2",{enumerable:!0,get:function(){return Ie.NotificationType2}});Object.defineProperty(I,"NotificationType3",{enumerable:!0,get:function(){return Ie.NotificationType3}});Object.defineProperty(I,"NotificationType4",{enumerable:!0,get:function(){return Ie.NotificationType4}});Object.defineProperty(I,"NotificationType5",{enumerable:!0,get:function(){return Ie.NotificationType5}});Object.defineProperty(I,"NotificationType6",{enumerable:!0,get:function(){return Ie.NotificationType6}});Object.defineProperty(I,"NotificationType7",{enumerable:!0,get:function(){return Ie.NotificationType7}});Object.defineProperty(I,"NotificationType8",{enumerable:!0,get:function(){return Ie.NotificationType8}});Object.defineProperty(I,"NotificationType9",{enumerable:!0,get:function(){return Ie.NotificationType9}});Object.defineProperty(I,"ParameterStructures",{enumerable:!0,get:function(){return Ie.ParameterStructures}});var Ra=Go();Object.defineProperty(I,"LinkedMap",{enumerable:!0,get:function(){return Ra.LinkedMap}});Object.defineProperty(I,"LRUCache",{enumerable:!0,get:function(){return Ra.LRUCache}});Object.defineProperty(I,"Touch",{enumerable:!0,get:function(){return Ra.Touch}});var Hp=od();Object.defineProperty(I,"Disposable",{enumerable:!0,get:function(){return Hp.Disposable}});var _d=Pr();Object.defineProperty(I,"Event",{enumerable:!0,get:function(){return _d.Event}});Object.defineProperty(I,"Emitter",{enumerable:!0,get:function(){return _d.Emitter}});var bd=Qi();Object.defineProperty(I,"CancellationTokenSource",{enumerable:!0,get:function(){return bd.CancellationTokenSource}});Object.defineProperty(I,"CancellationToken",{enumerable:!0,get:function(){return bd.CancellationToken}});var Rd=ad();Object.defineProperty(I,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Rd.SharedArraySenderStrategy}});Object.defineProperty(I,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Rd.SharedArrayReceiverStrategy}});var Sa=cd();Object.defineProperty(I,"MessageReader",{enumerable:!0,get:function(){return Sa.MessageReader}});Object.defineProperty(I,"AbstractMessageReader",{enumerable:!0,get:function(){return Sa.AbstractMessageReader}});Object.defineProperty(I,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Sa.ReadableStreamMessageReader}});var wa=fd();Object.defineProperty(I,"MessageWriter",{enumerable:!0,get:function(){return wa.MessageWriter}});Object.defineProperty(I,"AbstractMessageWriter",{enumerable:!0,get:function(){return wa.AbstractMessageWriter}});Object.defineProperty(I,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return wa.WriteableStreamMessageWriter}});var Up=hd();Object.defineProperty(I,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Up.AbstractMessageBuffer}});var ot=Dd();Object.defineProperty(I,"ConnectionStrategy",{enumerable:!0,get:function(){return ot.ConnectionStrategy}});Object.defineProperty(I,"ConnectionOptions",{enumerable:!0,get:function(){return ot.ConnectionOptions}});Object.defineProperty(I,"NullLogger",{enumerable:!0,get:function(){return ot.NullLogger}});Object.defineProperty(I,"createMessageConnection",{enumerable:!0,get:function(){return ot.createMessageConnection}});Object.defineProperty(I,"ProgressToken",{enumerable:!0,get:function(){return ot.ProgressToken}});Object.defineProperty(I,"ProgressType",{enumerable:!0,get:function(){return ot.ProgressType}});Object.defineProperty(I,"Trace",{enumerable:!0,get:function(){return ot.Trace}});Object.defineProperty(I,"TraceValues",{enumerable:!0,get:function(){return ot.TraceValues}});Object.defineProperty(I,"TraceFormat",{enumerable:!0,get:function(){return ot.TraceFormat}});Object.defineProperty(I,"SetTraceNotification",{enumerable:!0,get:function(){return ot.SetTraceNotification}});Object.defineProperty(I,"LogTraceNotification",{enumerable:!0,get:function(){return ot.LogTraceNotification}});Object.defineProperty(I,"ConnectionErrors",{enumerable:!0,get:function(){return ot.ConnectionErrors}});Object.defineProperty(I,"ConnectionError",{enumerable:!0,get:function(){return ot.ConnectionError}});Object.defineProperty(I,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ot.CancellationReceiverStrategy}});Object.defineProperty(I,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ot.CancellationSenderStrategy}});Object.defineProperty(I,"CancellationStrategy",{enumerable:!0,get:function(){return ot.CancellationStrategy}});Object.defineProperty(I,"MessageStrategy",{enumerable:!0,get:function(){return ot.MessageStrategy}});var Wp=Xn();I.RAL=Wp.default});var Td=k(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var Sd=require("util"),kn=ns(),rs=class n extends kn.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return n.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Sd.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};rs.emptyBuffer=Buffer.allocUnsafe(0);var Ta=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),kn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),kn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),kn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),kn.Disposable.create(()=>this.stream.off("data",e))}},Pa=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),kn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),kn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),kn.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},wd=Object.freeze({messageBuffer:Object.freeze({create:n=>new rs(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Sd.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new Ta(n),asWritableStream:n=>new Pa(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function qa(){return wd}(function(n){function e(){kn.RAL.install(wd)}n.install=e})(qa||(qa={}));Ea.default=qa});var dr=k(he=>{"use strict";var Kp=he&&he.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),zp=he&&he.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Kp(e,n,t)};Object.defineProperty(he,"__esModule",{value:!0});he.createMessageConnection=he.createServerSocketTransport=he.createClientSocketTransport=he.createServerPipeTransport=he.createClientPipeTransport=he.generateRandomPipeName=he.StreamMessageWriter=he.StreamMessageReader=he.SocketMessageWriter=he.SocketMessageReader=he.PortMessageWriter=he.PortMessageReader=he.IPCMessageWriter=he.IPCMessageReader=void 0;var Ir=Td();Ir.default.install();var Pd=require("path"),Vp=require("os"),Gp=require("crypto"),os=require("net"),Lt=ns();zp(ns(),he);var ka=class extends Lt.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Lt.Disposable.create(()=>this.process.off("message",e))}};he.IPCMessageReader=ka;var Ia=class extends Lt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};he.IPCMessageWriter=Ia;var xa=class extends Lt.AbstractMessageReader{constructor(e){super(),this.onData=new Lt.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};he.PortMessageReader=xa;var Oa=class extends Lt.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};he.PortMessageWriter=Oa;var ur=class extends Lt.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,Ir.default)().stream.asReadableStream(e),t)}};he.SocketMessageReader=ur;var lr=class extends Lt.WriteableStreamMessageWriter{constructor(e,t){super((0,Ir.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};he.SocketMessageWriter=lr;var is=class extends Lt.ReadableStreamMessageReader{constructor(e,t){super((0,Ir.default)().stream.asReadableStream(e),t)}};he.StreamMessageReader=is;var ss=class extends Lt.WriteableStreamMessageWriter{constructor(e,t){super((0,Ir.default)().stream.asWritableStream(e),t)}};he.StreamMessageWriter=ss;var qd=process.env.XDG_RUNTIME_DIR,Bp=new Map([["linux",107],["darwin",103]]);function Xp(){let n=(0,Gp.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;qd?e=Pd.join(qd,`vscode-ipc-${n}.sock`):e=Pd.join(Vp.tmpdir(),`vscode-${n}.sock`);let t=Bp.get(process.platform);return t!==void 0&&e.length>t&&(0,Ir.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}he.generateRandomPipeName=Xp;function Qp(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,os.createServer)(a=>{o.close(),t([new ur(a,e),new lr(a,e)])});o.on("error",s),o.listen(n,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}he.createClientPipeTransport=Qp;function Jp(n,e="utf-8"){let t=(0,os.createConnection)(n);return[new ur(t,e),new lr(t,e)]}he.createServerPipeTransport=Jp;function Yp(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,os.createServer)(a=>{o.close(),t([new ur(a,e),new lr(a,e)])});o.on("error",s),o.listen(n,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}he.createClientSocketTransport=Yp;function Zp(n,e="utf-8"){let t=(0,os.createConnection)(n,"127.0.0.1");return[new ur(t,e),new lr(t,e)]}he.createServerSocketTransport=Zp;function em(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function tm(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function nm(n,e,t,r){t||(t=Lt.NullLogger);let i=em(n)?new is(n):n,s=tm(e)?new ss(e):e;return Lt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Lt.createMessageConnection)(i,s,t,r)}he.createMessageConnection=nm});var Fa=k((eR,Ed)=>{"use strict";Ed.exports=dr()});var cs=k((kd,as)=>{(function(n){if(typeof as=="object"&&typeof as.exports=="object"){var e=n(require,kd);e!==void 0&&(as.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(f){function _(b){return typeof b=="string"}f.is=_})(t=e.DocumentUri||(e.DocumentUri={}));var r;(function(f){function _(b){return typeof b=="string"}f.is=_})(r=e.URI||(e.URI={}));var i;(function(f){f.MIN_VALUE=-2147483648,f.MAX_VALUE=2147483647;function _(b){return typeof b=="number"&&f.MIN_VALUE<=b&&b<=f.MAX_VALUE}f.is=_})(i=e.integer||(e.integer={}));var s;(function(f){f.MIN_VALUE=0,f.MAX_VALUE=2147483647;function _(b){return typeof b=="number"&&f.MIN_VALUE<=b&&b<=f.MAX_VALUE}f.is=_})(s=e.uinteger||(e.uinteger={}));var o;(function(f){function _(p,l){return p===Number.MAX_VALUE&&(p=s.MAX_VALUE),l===Number.MAX_VALUE&&(l=s.MAX_VALUE),{line:p,character:l}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&R.uinteger(l.line)&&R.uinteger(l.character)}f.is=b})(o=e.Position||(e.Position={}));var a;(function(f){function _(p,l,T,O){if(R.uinteger(p)&&R.uinteger(l)&&R.uinteger(T)&&R.uinteger(O))return{start:o.create(p,l),end:o.create(T,O)};if(o.is(p)&&o.is(l))return{start:p,end:l};throw new Error("Range#create called with invalid arguments[".concat(p,", ").concat(l,", ").concat(T,", ").concat(O,"]"))}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&o.is(l.start)&&o.is(l.end)}f.is=b})(a=e.Range||(e.Range={}));var u;(function(f){function _(p,l){return{uri:p,range:l}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&a.is(l.range)&&(R.string(l.uri)||R.undefined(l.uri))}f.is=b})(u=e.Location||(e.Location={}));var h;(function(f){function _(p,l,T,O){return{targetUri:p,targetRange:l,targetSelectionRange:T,originSelectionRange:O}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&a.is(l.targetRange)&&R.string(l.targetUri)&&a.is(l.targetSelectionRange)&&(a.is(l.originSelectionRange)||R.undefined(l.originSelectionRange))}f.is=b})(h=e.LocationLink||(e.LocationLink={}));var y;(function(f){function _(p,l,T,O){return{red:p,green:l,blue:T,alpha:O}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&R.numberRange(l.red,0,1)&&R.numberRange(l.green,0,1)&&R.numberRange(l.blue,0,1)&&R.numberRange(l.alpha,0,1)}f.is=b})(y=e.Color||(e.Color={}));var C;(function(f){function _(p,l){return{range:p,color:l}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&a.is(l.range)&&y.is(l.color)}f.is=b})(C=e.ColorInformation||(e.ColorInformation={}));var m;(function(f){function _(p,l,T){return{label:p,textEdit:l,additionalTextEdits:T}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&R.string(l.label)&&(R.undefined(l.textEdit)||B.is(l))&&(R.undefined(l.additionalTextEdits)||R.typedArray(l.additionalTextEdits,B.is))}f.is=b})(m=e.ColorPresentation||(e.ColorPresentation={}));var w;(function(f){f.Comment="comment",f.Imports="imports",f.Region="region"})(w=e.FoldingRangeKind||(e.FoldingRangeKind={}));var v;(function(f){function _(p,l,T,O,te,xe){var Pe={startLine:p,endLine:l};return R.defined(T)&&(Pe.startCharacter=T),R.defined(O)&&(Pe.endCharacter=O),R.defined(te)&&(Pe.kind=te),R.defined(xe)&&(Pe.collapsedText=xe),Pe}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&R.uinteger(l.startLine)&&R.uinteger(l.startLine)&&(R.undefined(l.startCharacter)||R.uinteger(l.startCharacter))&&(R.undefined(l.endCharacter)||R.uinteger(l.endCharacter))&&(R.undefined(l.kind)||R.string(l.kind))}f.is=b})(v=e.FoldingRange||(e.FoldingRange={}));var q;(function(f){function _(p,l){return{location:p,message:l}}f.create=_;function b(p){var l=p;return R.defined(l)&&u.is(l.location)&&R.string(l.message)}f.is=b})(q=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var E;(function(f){f.Error=1,f.Warning=2,f.Information=3,f.Hint=4})(E=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var N;(function(f){f.Unnecessary=1,f.Deprecated=2})(N=e.DiagnosticTag||(e.DiagnosticTag={}));var L;(function(f){function _(b){var p=b;return R.objectLiteral(p)&&R.string(p.href)}f.is=_})(L=e.CodeDescription||(e.CodeDescription={}));var M;(function(f){function _(p,l,T,O,te,xe){var Pe={range:p,message:l};return R.defined(T)&&(Pe.severity=T),R.defined(O)&&(Pe.code=O),R.defined(te)&&(Pe.source=te),R.defined(xe)&&(Pe.relatedInformation=xe),Pe}f.create=_;function b(p){var l,T=p;return R.defined(T)&&a.is(T.range)&&R.string(T.message)&&(R.number(T.severity)||R.undefined(T.severity))&&(R.integer(T.code)||R.string(T.code)||R.undefined(T.code))&&(R.undefined(T.codeDescription)||R.string((l=T.codeDescription)===null||l===void 0?void 0:l.href))&&(R.string(T.source)||R.undefined(T.source))&&(R.undefined(T.relatedInformation)||R.typedArray(T.relatedInformation,q.is))}f.is=b})(M=e.Diagnostic||(e.Diagnostic={}));var H;(function(f){function _(p,l){for(var T=[],O=2;O<arguments.length;O++)T[O-2]=arguments[O];var te={title:p,command:l};return R.defined(T)&&T.length>0&&(te.arguments=T),te}f.create=_;function b(p){var l=p;return R.defined(l)&&R.string(l.title)&&R.string(l.command)}f.is=b})(H=e.Command||(e.Command={}));var B;(function(f){function _(T,O){return{range:T,newText:O}}f.replace=_;function b(T,O){return{range:{start:T,end:T},newText:O}}f.insert=b;function p(T){return{range:T,newText:""}}f.del=p;function l(T){var O=T;return R.objectLiteral(O)&&R.string(O.newText)&&a.is(O.range)}f.is=l})(B=e.TextEdit||(e.TextEdit={}));var ue;(function(f){function _(p,l,T){var O={label:p};return l!==void 0&&(O.needsConfirmation=l),T!==void 0&&(O.description=T),O}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&R.string(l.label)&&(R.boolean(l.needsConfirmation)||l.needsConfirmation===void 0)&&(R.string(l.description)||l.description===void 0)}f.is=b})(ue=e.ChangeAnnotation||(e.ChangeAnnotation={}));var z;(function(f){function _(b){var p=b;return R.string(p)}f.is=_})(z=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var ee;(function(f){function _(T,O,te){return{range:T,newText:O,annotationId:te}}f.replace=_;function b(T,O,te){return{range:{start:T,end:T},newText:O,annotationId:te}}f.insert=b;function p(T,O){return{range:T,newText:"",annotationId:O}}f.del=p;function l(T){var O=T;return B.is(O)&&(ue.is(O.annotationId)||z.is(O.annotationId))}f.is=l})(ee=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var le;(function(f){function _(p,l){return{textDocument:p,edits:l}}f.create=_;function b(p){var l=p;return R.defined(l)&&mt.is(l.textDocument)&&Array.isArray(l.edits)}f.is=b})(le=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Xe;(function(f){function _(p,l,T){var O={kind:"create",uri:p};return l!==void 0&&(l.overwrite!==void 0||l.ignoreIfExists!==void 0)&&(O.options=l),T!==void 0&&(O.annotationId=T),O}f.create=_;function b(p){var l=p;return l&&l.kind==="create"&&R.string(l.uri)&&(l.options===void 0||(l.options.overwrite===void 0||R.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||R.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||z.is(l.annotationId))}f.is=b})(Xe=e.CreateFile||(e.CreateFile={}));var Ge;(function(f){function _(p,l,T,O){var te={kind:"rename",oldUri:p,newUri:l};return T!==void 0&&(T.overwrite!==void 0||T.ignoreIfExists!==void 0)&&(te.options=T),O!==void 0&&(te.annotationId=O),te}f.create=_;function b(p){var l=p;return l&&l.kind==="rename"&&R.string(l.oldUri)&&R.string(l.newUri)&&(l.options===void 0||(l.options.overwrite===void 0||R.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||R.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||z.is(l.annotationId))}f.is=b})(Ge=e.RenameFile||(e.RenameFile={}));var et;(function(f){function _(p,l,T){var O={kind:"delete",uri:p};return l!==void 0&&(l.recursive!==void 0||l.ignoreIfNotExists!==void 0)&&(O.options=l),T!==void 0&&(O.annotationId=T),O}f.create=_;function b(p){var l=p;return l&&l.kind==="delete"&&R.string(l.uri)&&(l.options===void 0||(l.options.recursive===void 0||R.boolean(l.options.recursive))&&(l.options.ignoreIfNotExists===void 0||R.boolean(l.options.ignoreIfNotExists)))&&(l.annotationId===void 0||z.is(l.annotationId))}f.is=b})(et=e.DeleteFile||(e.DeleteFile={}));var Bt;(function(f){function _(b){var p=b;return p&&(p.changes!==void 0||p.documentChanges!==void 0)&&(p.documentChanges===void 0||p.documentChanges.every(function(l){return R.string(l.kind)?Xe.is(l)||Ge.is(l)||et.is(l):le.is(l)}))}f.is=_})(Bt=e.WorkspaceEdit||(e.WorkspaceEdit={}));var gt=function(){function f(_,b){this.edits=_,this.changeAnnotations=b}return f.prototype.insert=function(_,b,p){var l,T;if(p===void 0?l=B.insert(_,b):z.is(p)?(T=p,l=ee.insert(_,b,p)):(this.assertChangeAnnotations(this.changeAnnotations),T=this.changeAnnotations.manage(p),l=ee.insert(_,b,T)),this.edits.push(l),T!==void 0)return T},f.prototype.replace=function(_,b,p){var l,T;if(p===void 0?l=B.replace(_,b):z.is(p)?(T=p,l=ee.replace(_,b,p)):(this.assertChangeAnnotations(this.changeAnnotations),T=this.changeAnnotations.manage(p),l=ee.replace(_,b,T)),this.edits.push(l),T!==void 0)return T},f.prototype.delete=function(_,b){var p,l;if(b===void 0?p=B.del(_):z.is(b)?(l=b,p=ee.del(_,b)):(this.assertChangeAnnotations(this.changeAnnotations),l=this.changeAnnotations.manage(b),p=ee.del(_,l)),this.edits.push(p),l!==void 0)return l},f.prototype.add=function(_){this.edits.push(_)},f.prototype.all=function(){return this.edits},f.prototype.clear=function(){this.edits.splice(0,this.edits.length)},f.prototype.assertChangeAnnotations=function(_){if(_===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},f}(),it=function(){function f(_){this._annotations=_===void 0?Object.create(null):_,this._counter=0,this._size=0}return f.prototype.all=function(){return this._annotations},Object.defineProperty(f.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),f.prototype.manage=function(_,b){var p;if(z.is(_)?p=_:(p=this.nextId(),b=_),this._annotations[p]!==void 0)throw new Error("Id ".concat(p," is already in use."));if(b===void 0)throw new Error("No annotation provided for id ".concat(p));return this._annotations[p]=b,this._size++,p},f.prototype.nextId=function(){return this._counter++,this._counter.toString()},f}(),pt=function(){function f(_){var b=this;this._textEditChanges=Object.create(null),_!==void 0?(this._workspaceEdit=_,_.documentChanges?(this._changeAnnotations=new it(_.changeAnnotations),_.changeAnnotations=this._changeAnnotations.all(),_.documentChanges.forEach(function(p){if(le.is(p)){var l=new gt(p.edits,b._changeAnnotations);b._textEditChanges[p.textDocument.uri]=l}})):_.changes&&Object.keys(_.changes).forEach(function(p){var l=new gt(_.changes[p]);b._textEditChanges[p]=l})):this._workspaceEdit={}}return Object.defineProperty(f.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),f.prototype.getTextEditChange=function(_){if(mt.is(_)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b={uri:_.uri,version:_.version},p=this._textEditChanges[b.uri];if(!p){var l=[],T={textDocument:b,edits:l};this._workspaceEdit.documentChanges.push(T),p=new gt(l,this._changeAnnotations),this._textEditChanges[b.uri]=p}return p}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var p=this._textEditChanges[_];if(!p){var l=[];this._workspaceEdit.changes[_]=l,p=new gt(l),this._textEditChanges[_]=p}return p}},f.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new it,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},f.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},f.prototype.createFile=function(_,b,p){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;ue.is(b)||z.is(b)?l=b:p=b;var T,O;if(l===void 0?T=Xe.create(_,p):(O=z.is(l)?l:this._changeAnnotations.manage(l),T=Xe.create(_,p,O)),this._workspaceEdit.documentChanges.push(T),O!==void 0)return O},f.prototype.renameFile=function(_,b,p,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var T;ue.is(p)||z.is(p)?T=p:l=p;var O,te;if(T===void 0?O=Ge.create(_,b,l):(te=z.is(T)?T:this._changeAnnotations.manage(T),O=Ge.create(_,b,l,te)),this._workspaceEdit.documentChanges.push(O),te!==void 0)return te},f.prototype.deleteFile=function(_,b,p){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;ue.is(b)||z.is(b)?l=b:p=b;var T,O;if(l===void 0?T=et.create(_,p):(O=z.is(l)?l:this._changeAnnotations.manage(l),T=et.create(_,p,O)),this._workspaceEdit.documentChanges.push(T),O!==void 0)return O},f}();e.WorkspaceChange=pt;var ln;(function(f){function _(p){return{uri:p}}f.create=_;function b(p){var l=p;return R.defined(l)&&R.string(l.uri)}f.is=b})(ln=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var We;(function(f){function _(p,l){return{uri:p,version:l}}f.create=_;function b(p){var l=p;return R.defined(l)&&R.string(l.uri)&&R.integer(l.version)}f.is=b})(We=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var mt;(function(f){function _(p,l){return{uri:p,version:l}}f.create=_;function b(p){var l=p;return R.defined(l)&&R.string(l.uri)&&(l.version===null||R.integer(l.version))}f.is=b})(mt=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Tt;(function(f){function _(p,l,T,O){return{uri:p,languageId:l,version:T,text:O}}f.create=_;function b(p){var l=p;return R.defined(l)&&R.string(l.uri)&&R.string(l.languageId)&&R.integer(l.version)&&R.string(l.text)}f.is=b})(Tt=e.TextDocumentItem||(e.TextDocumentItem={}));var dn;(function(f){f.PlainText="plaintext",f.Markdown="markdown";function _(b){var p=b;return p===f.PlainText||p===f.Markdown}f.is=_})(dn=e.MarkupKind||(e.MarkupKind={}));var ut;(function(f){function _(b){var p=b;return R.objectLiteral(b)&&dn.is(p.kind)&&R.string(p.value)}f.is=_})(ut=e.MarkupContent||(e.MarkupContent={}));var ir;(function(f){f.Text=1,f.Method=2,f.Function=3,f.Constructor=4,f.Field=5,f.Variable=6,f.Class=7,f.Interface=8,f.Module=9,f.Property=10,f.Unit=11,f.Value=12,f.Enum=13,f.Keyword=14,f.Snippet=15,f.Color=16,f.File=17,f.Reference=18,f.Folder=19,f.EnumMember=20,f.Constant=21,f.Struct=22,f.Event=23,f.Operator=24,f.TypeParameter=25})(ir=e.CompletionItemKind||(e.CompletionItemKind={}));var Hn;(function(f){f.PlainText=1,f.Snippet=2})(Hn=e.InsertTextFormat||(e.InsertTextFormat={}));var Dn;(function(f){f.Deprecated=1})(Dn=e.CompletionItemTag||(e.CompletionItemTag={}));var _n;(function(f){function _(p,l,T){return{newText:p,insert:l,replace:T}}f.create=_;function b(p){var l=p;return l&&R.string(l.newText)&&a.is(l.insert)&&a.is(l.replace)}f.is=b})(_n=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var bn;(function(f){f.asIs=1,f.adjustIndentation=2})(bn=e.InsertTextMode||(e.InsertTextMode={}));var sr;(function(f){function _(b){var p=b;return p&&(R.string(p.detail)||p.detail===void 0)&&(R.string(p.description)||p.description===void 0)}f.is=_})(sr=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var Un;(function(f){function _(b){return{label:b}}f.create=_})(Un=e.CompletionItem||(e.CompletionItem={}));var Wn;(function(f){function _(b,p){return{items:b||[],isIncomplete:!!p}}f.create=_})(Wn=e.CompletionList||(e.CompletionList={}));var Rn;(function(f){function _(p){return p.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}f.fromPlainText=_;function b(p){var l=p;return R.string(l)||R.objectLiteral(l)&&R.string(l.language)&&R.string(l.value)}f.is=b})(Rn=e.MarkedString||(e.MarkedString={}));var tt;(function(f){function _(b){var p=b;return!!p&&R.objectLiteral(p)&&(ut.is(p.contents)||Rn.is(p.contents)||R.typedArray(p.contents,Rn.is))&&(b.range===void 0||a.is(b.range))}f.is=_})(tt=e.Hover||(e.Hover={}));var Kn;(function(f){function _(b,p){return p?{label:b,documentation:p}:{label:b}}f.create=_})(Kn=e.ParameterInformation||(e.ParameterInformation={}));var fn;(function(f){function _(b,p){for(var l=[],T=2;T<arguments.length;T++)l[T-2]=arguments[T];var O={label:b};return R.defined(p)&&(O.documentation=p),R.defined(l)?O.parameters=l:O.parameters=[],O}f.create=_})(fn=e.SignatureInformation||(e.SignatureInformation={}));var Ut;(function(f){f.Text=1,f.Read=2,f.Write=3})(Ut=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var zn;(function(f){function _(b,p){var l={range:b};return R.number(p)&&(l.kind=p),l}f.create=_})(zn=e.DocumentHighlight||(e.DocumentHighlight={}));var yt;(function(f){f.File=1,f.Module=2,f.Namespace=3,f.Package=4,f.Class=5,f.Method=6,f.Property=7,f.Field=8,f.Constructor=9,f.Enum=10,f.Interface=11,f.Function=12,f.Variable=13,f.Constant=14,f.String=15,f.Number=16,f.Boolean=17,f.Array=18,f.Object=19,f.Key=20,f.Null=21,f.EnumMember=22,f.Struct=23,f.Event=24,f.Operator=25,f.TypeParameter=26})(yt=e.SymbolKind||(e.SymbolKind={}));var Sn;(function(f){f.Deprecated=1})(Sn=e.SymbolTag||(e.SymbolTag={}));var Be;(function(f){function _(b,p,l,T,O){var te={name:b,kind:p,location:{uri:T,range:l}};return O&&(te.containerName=O),te}f.create=_})(Be=e.SymbolInformation||(e.SymbolInformation={}));var Xt;(function(f){function _(b,p,l,T){return T!==void 0?{name:b,kind:p,location:{uri:l,range:T}}:{name:b,kind:p,location:{uri:l}}}f.create=_})(Xt=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var vt;(function(f){function _(p,l,T,O,te,xe){var Pe={name:p,detail:l,kind:T,range:O,selectionRange:te};return xe!==void 0&&(Pe.children=xe),Pe}f.create=_;function b(p){var l=p;return l&&R.string(l.name)&&R.number(l.kind)&&a.is(l.range)&&a.is(l.selectionRange)&&(l.detail===void 0||R.string(l.detail))&&(l.deprecated===void 0||R.boolean(l.deprecated))&&(l.children===void 0||Array.isArray(l.children))&&(l.tags===void 0||Array.isArray(l.tags))}f.is=b})(vt=e.DocumentSymbol||(e.DocumentSymbol={}));var wn;(function(f){f.Empty="",f.QuickFix="quickfix",f.Refactor="refactor",f.RefactorExtract="refactor.extract",f.RefactorInline="refactor.inline",f.RefactorRewrite="refactor.rewrite",f.Source="source",f.SourceOrganizeImports="source.organizeImports",f.SourceFixAll="source.fixAll"})(wn=e.CodeActionKind||(e.CodeActionKind={}));var Ft;(function(f){f.Invoked=1,f.Automatic=2})(Ft=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var Tn;(function(f){function _(p,l,T){var O={diagnostics:p};return l!=null&&(O.only=l),T!=null&&(O.triggerKind=T),O}f.create=_;function b(p){var l=p;return R.defined(l)&&R.typedArray(l.diagnostics,M.is)&&(l.only===void 0||R.typedArray(l.only,R.string))&&(l.triggerKind===void 0||l.triggerKind===Ft.Invoked||l.triggerKind===Ft.Automatic)}f.is=b})(Tn=e.CodeActionContext||(e.CodeActionContext={}));var Vn;(function(f){function _(p,l,T){var O={title:p},te=!0;return typeof l=="string"?(te=!1,O.kind=l):H.is(l)?O.command=l:O.edit=l,te&&T!==void 0&&(O.kind=T),O}f.create=_;function b(p){var l=p;return l&&R.string(l.title)&&(l.diagnostics===void 0||R.typedArray(l.diagnostics,M.is))&&(l.kind===void 0||R.string(l.kind))&&(l.edit!==void 0||l.command!==void 0)&&(l.command===void 0||H.is(l.command))&&(l.isPreferred===void 0||R.boolean(l.isPreferred))&&(l.edit===void 0||Bt.is(l.edit))}f.is=b})(Vn=e.CodeAction||(e.CodeAction={}));var Pt;(function(f){function _(p,l){var T={range:p};return R.defined(l)&&(T.data=l),T}f.create=_;function b(p){var l=p;return R.defined(l)&&a.is(l.range)&&(R.undefined(l.command)||H.is(l.command))}f.is=b})(Pt=e.CodeLens||(e.CodeLens={}));var Gn;(function(f){function _(p,l){return{tabSize:p,insertSpaces:l}}f.create=_;function b(p){var l=p;return R.defined(l)&&R.uinteger(l.tabSize)&&R.boolean(l.insertSpaces)}f.is=b})(Gn=e.FormattingOptions||(e.FormattingOptions={}));var Nt;(function(f){function _(p,l,T){return{range:p,target:l,data:T}}f.create=_;function b(p){var l=p;return R.defined(l)&&a.is(l.range)&&(R.undefined(l.target)||R.string(l.target))}f.is=b})(Nt=e.DocumentLink||(e.DocumentLink={}));var D;(function(f){function _(p,l){return{range:p,parent:l}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&a.is(l.range)&&(l.parent===void 0||f.is(l.parent))}f.is=b})(D=e.SelectionRange||(e.SelectionRange={}));var x;(function(f){f.namespace="namespace",f.type="type",f.class="class",f.enum="enum",f.interface="interface",f.struct="struct",f.typeParameter="typeParameter",f.parameter="parameter",f.variable="variable",f.property="property",f.enumMember="enumMember",f.event="event",f.function="function",f.method="method",f.macro="macro",f.keyword="keyword",f.modifier="modifier",f.comment="comment",f.string="string",f.number="number",f.regexp="regexp",f.operator="operator",f.decorator="decorator"})(x=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var $;(function(f){f.declaration="declaration",f.definition="definition",f.readonly="readonly",f.static="static",f.deprecated="deprecated",f.abstract="abstract",f.async="async",f.modification="modification",f.documentation="documentation",f.defaultLibrary="defaultLibrary"})($=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var K;(function(f){function _(b){var p=b;return R.objectLiteral(p)&&(p.resultId===void 0||typeof p.resultId=="string")&&Array.isArray(p.data)&&(p.data.length===0||typeof p.data[0]=="number")}f.is=_})(K=e.SemanticTokens||(e.SemanticTokens={}));var ye;(function(f){function _(p,l){return{range:p,text:l}}f.create=_;function b(p){var l=p;return l!=null&&a.is(l.range)&&R.string(l.text)}f.is=b})(ye=e.InlineValueText||(e.InlineValueText={}));var pe;(function(f){function _(p,l,T){return{range:p,variableName:l,caseSensitiveLookup:T}}f.create=_;function b(p){var l=p;return l!=null&&a.is(l.range)&&R.boolean(l.caseSensitiveLookup)&&(R.string(l.variableName)||l.variableName===void 0)}f.is=b})(pe=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var Se;(function(f){function _(p,l){return{range:p,expression:l}}f.create=_;function b(p){var l=p;return l!=null&&a.is(l.range)&&(R.string(l.expression)||l.expression===void 0)}f.is=b})(Se=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var qe;(function(f){function _(p,l){return{frameId:p,stoppedLocation:l}}f.create=_;function b(p){var l=p;return R.defined(l)&&a.is(p.stoppedLocation)}f.is=b})(qe=e.InlineValueContext||(e.InlineValueContext={}));var ie;(function(f){f.Type=1,f.Parameter=2;function _(b){return b===1||b===2}f.is=_})(ie=e.InlayHintKind||(e.InlayHintKind={}));var ve;(function(f){function _(p){return{value:p}}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&(l.tooltip===void 0||R.string(l.tooltip)||ut.is(l.tooltip))&&(l.location===void 0||u.is(l.location))&&(l.command===void 0||H.is(l.command))}f.is=b})(ve=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var d;(function(f){function _(p,l,T){var O={position:p,label:l};return T!==void 0&&(O.kind=T),O}f.create=_;function b(p){var l=p;return R.objectLiteral(l)&&o.is(l.position)&&(R.string(l.label)||R.typedArray(l.label,ve.is))&&(l.kind===void 0||ie.is(l.kind))&&l.textEdits===void 0||R.typedArray(l.textEdits,B.is)&&(l.tooltip===void 0||R.string(l.tooltip)||ut.is(l.tooltip))&&(l.paddingLeft===void 0||R.boolean(l.paddingLeft))&&(l.paddingRight===void 0||R.boolean(l.paddingRight))}f.is=b})(d=e.InlayHint||(e.InlayHint={}));var P;(function(f){function _(b){var p=b;return R.objectLiteral(p)&&r.is(p.uri)&&R.string(p.name)}f.is=_})(P=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var U;(function(f){function _(T,O,te,xe){return new se(T,O,te,xe)}f.create=_;function b(T){var O=T;return!!(R.defined(O)&&R.string(O.uri)&&(R.undefined(O.languageId)||R.string(O.languageId))&&R.uinteger(O.lineCount)&&R.func(O.getText)&&R.func(O.positionAt)&&R.func(O.offsetAt))}f.is=b;function p(T,O){for(var te=T.getText(),xe=l(O,function(Bn,wr){var ei=Bn.range.start.line-wr.range.start.line;return ei===0?Bn.range.start.character-wr.range.start.character:ei}),Pe=te.length,Mt=xe.length-1;Mt>=0;Mt--){var qt=xe[Mt],Qt=T.offsetAt(qt.range.start),de=T.offsetAt(qt.range.end);if(de<=Pe)te=te.substring(0,Qt)+qt.newText+te.substring(de,te.length);else throw new Error("Overlapping edit");Pe=Qt}return te}f.applyEdits=p;function l(T,O){if(T.length<=1)return T;var te=T.length/2|0,xe=T.slice(0,te),Pe=T.slice(te);l(xe,O),l(Pe,O);for(var Mt=0,qt=0,Qt=0;Mt<xe.length&&qt<Pe.length;){var de=O(xe[Mt],Pe[qt]);de<=0?T[Qt++]=xe[Mt++]:T[Qt++]=Pe[qt++]}for(;Mt<xe.length;)T[Qt++]=xe[Mt++];for(;qt<Pe.length;)T[Qt++]=Pe[qt++];return T}})(U=e.TextDocument||(e.TextDocument={}));var se=function(){function f(_,b,p,l){this._uri=_,this._languageId=b,this._version=p,this._content=l,this._lineOffsets=void 0}return Object.defineProperty(f.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),f.prototype.getText=function(_){if(_){var b=this.offsetAt(_.start),p=this.offsetAt(_.end);return this._content.substring(b,p)}return this._content},f.prototype.update=function(_,b){this._content=_.text,this._version=b,this._lineOffsets=void 0},f.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var _=[],b=this._content,p=!0,l=0;l<b.length;l++){p&&(_.push(l),p=!1);var T=b.charAt(l);p=T==="\r"||T===`
`,T==="\r"&&l+1<b.length&&b.charAt(l+1)===`
`&&l++}p&&b.length>0&&_.push(b.length),this._lineOffsets=_}return this._lineOffsets},f.prototype.positionAt=function(_){_=Math.max(Math.min(_,this._content.length),0);var b=this.getLineOffsets(),p=0,l=b.length;if(l===0)return o.create(0,_);for(;p<l;){var T=Math.floor((p+l)/2);b[T]>_?l=T:p=T+1}var O=p-1;return o.create(O,_-b[O])},f.prototype.offsetAt=function(_){var b=this.getLineOffsets();if(_.line>=b.length)return this._content.length;if(_.line<0)return 0;var p=b[_.line],l=_.line+1<b.length?b[_.line+1]:this._content.length;return Math.max(Math.min(p+_.character,l),p)},Object.defineProperty(f.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),f}(),R;(function(f){var _=Object.prototype.toString;function b(de){return typeof de<"u"}f.defined=b;function p(de){return typeof de>"u"}f.undefined=p;function l(de){return de===!0||de===!1}f.boolean=l;function T(de){return _.call(de)==="[object String]"}f.string=T;function O(de){return _.call(de)==="[object Number]"}f.number=O;function te(de,Bn,wr){return _.call(de)==="[object Number]"&&Bn<=de&&de<=wr}f.numberRange=te;function xe(de){return _.call(de)==="[object Number]"&&-2147483648<=de&&de<=2147483647}f.integer=xe;function Pe(de){return _.call(de)==="[object Number]"&&0<=de&&de<=2147483647}f.uinteger=Pe;function Mt(de){return _.call(de)==="[object Function]"}f.func=Mt;function qt(de){return de!==null&&typeof de=="object"}f.objectLiteral=qt;function Qt(de,Bn){return Array.isArray(de)&&de.every(Bn)}f.typedArray=Qt})(R||(R={}))})});var Ae=k(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.ProtocolNotificationType=Dt.ProtocolNotificationType0=Dt.ProtocolRequestType=Dt.ProtocolRequestType0=Dt.RegistrationType=Dt.MessageDirection=void 0;var xr=dr(),rm;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(rm=Dt.MessageDirection||(Dt.MessageDirection={}));var Na=class{constructor(e){this.method=e}};Dt.RegistrationType=Na;var Ma=class extends xr.RequestType0{constructor(e){super(e)}};Dt.ProtocolRequestType0=Ma;var La=class extends xr.RequestType{constructor(e){super(e,xr.ParameterStructures.byName)}};Dt.ProtocolRequestType=La;var Aa=class extends xr.NotificationType0{constructor(e){super(e)}};Dt.ProtocolNotificationType0=Aa;var ja=class extends xr.NotificationType{constructor(e){super(e,xr.ParameterStructures.byName)}};Dt.ProtocolNotificationType=ja});var us=k(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.objectLiteral=Qe.typedArray=Qe.stringArray=Qe.array=Qe.func=Qe.error=Qe.number=Qe.string=Qe.boolean=void 0;function im(n){return n===!0||n===!1}Qe.boolean=im;function Id(n){return typeof n=="string"||n instanceof String}Qe.string=Id;function sm(n){return typeof n=="number"||n instanceof Number}Qe.number=sm;function om(n){return n instanceof Error}Qe.error=om;function am(n){return typeof n=="function"}Qe.func=am;function xd(n){return Array.isArray(n)}Qe.array=xd;function cm(n){return xd(n)&&n.every(e=>Id(e))}Qe.stringArray=cm;function um(n,e){return Array.isArray(n)&&n.every(e)}Qe.typedArray=um;function lm(n){return n!==null&&typeof n=="object"}Qe.objectLiteral=lm});var Fd=k(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.ImplementationRequest=void 0;var Od=Ae(),dm;(function(n){n.method="textDocument/implementation",n.messageDirection=Od.MessageDirection.clientToServer,n.type=new Od.ProtocolRequestType(n.method)})(dm=ai.ImplementationRequest||(ai.ImplementationRequest={}))});var Md=k(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.TypeDefinitionRequest=void 0;var Nd=Ae(),fm;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=Nd.MessageDirection.clientToServer,n.type=new Nd.ProtocolRequestType(n.method)})(fm=ci.TypeDefinitionRequest||(ci.TypeDefinitionRequest={}))});var Ld=k(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.DidChangeWorkspaceFoldersNotification=Qn.WorkspaceFoldersRequest=void 0;var ls=Ae(),hm;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=ls.MessageDirection.serverToClient,n.type=new ls.ProtocolRequestType0(n.method)})(hm=Qn.WorkspaceFoldersRequest||(Qn.WorkspaceFoldersRequest={}));var gm;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=ls.MessageDirection.clientToServer,n.type=new ls.ProtocolNotificationType(n.method)})(gm=Qn.DidChangeWorkspaceFoldersNotification||(Qn.DidChangeWorkspaceFoldersNotification={}))});var jd=k(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.ConfigurationRequest=void 0;var Ad=Ae(),pm;(function(n){n.method="workspace/configuration",n.messageDirection=Ad.MessageDirection.serverToClient,n.type=new Ad.ProtocolRequestType(n.method)})(pm=ui.ConfigurationRequest||(ui.ConfigurationRequest={}))});var $d=k(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ColorPresentationRequest=Jn.DocumentColorRequest=void 0;var ds=Ae(),mm;(function(n){n.method="textDocument/documentColor",n.messageDirection=ds.MessageDirection.clientToServer,n.type=new ds.ProtocolRequestType(n.method)})(mm=Jn.DocumentColorRequest||(Jn.DocumentColorRequest={}));var ym;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=ds.MessageDirection.clientToServer,n.type=new ds.ProtocolRequestType(n.method)})(ym=Jn.ColorPresentationRequest||(Jn.ColorPresentationRequest={}))});var Ud=k(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.FoldingRangeRequest=void 0;var Hd=Ae(),vm;(function(n){n.method="textDocument/foldingRange",n.messageDirection=Hd.MessageDirection.clientToServer,n.type=new Hd.ProtocolRequestType(n.method)})(vm=li.FoldingRangeRequest||(li.FoldingRangeRequest={}))});var Kd=k(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.DeclarationRequest=void 0;var Wd=Ae(),Cm;(function(n){n.method="textDocument/declaration",n.messageDirection=Wd.MessageDirection.clientToServer,n.type=new Wd.ProtocolRequestType(n.method)})(Cm=di.DeclarationRequest||(di.DeclarationRequest={}))});var Vd=k(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.SelectionRangeRequest=void 0;var zd=Ae(),Dm;(function(n){n.method="textDocument/selectionRange",n.messageDirection=zd.MessageDirection.clientToServer,n.type=new zd.ProtocolRequestType(n.method)})(Dm=fi.SelectionRangeRequest||(fi.SelectionRangeRequest={}))});var Gd=k(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.WorkDoneProgressCancelNotification=Zt.WorkDoneProgressCreateRequest=Zt.WorkDoneProgress=void 0;var _m=dr(),fs=Ae(),bm;(function(n){n.type=new _m.ProgressType;function e(t){return t===n.type}n.is=e})(bm=Zt.WorkDoneProgress||(Zt.WorkDoneProgress={}));var Rm;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=fs.MessageDirection.serverToClient,n.type=new fs.ProtocolRequestType(n.method)})(Rm=Zt.WorkDoneProgressCreateRequest||(Zt.WorkDoneProgressCreateRequest={}));var Sm;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=fs.MessageDirection.clientToServer,n.type=new fs.ProtocolNotificationType(n.method)})(Sm=Zt.WorkDoneProgressCancelNotification||(Zt.WorkDoneProgressCancelNotification={}))});var Bd=k(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.CallHierarchyOutgoingCallsRequest=en.CallHierarchyIncomingCallsRequest=en.CallHierarchyPrepareRequest=void 0;var Or=Ae(),wm;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=Or.MessageDirection.clientToServer,n.type=new Or.ProtocolRequestType(n.method)})(wm=en.CallHierarchyPrepareRequest||(en.CallHierarchyPrepareRequest={}));var Tm;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=Or.MessageDirection.clientToServer,n.type=new Or.ProtocolRequestType(n.method)})(Tm=en.CallHierarchyIncomingCallsRequest||(en.CallHierarchyIncomingCallsRequest={}));var Pm;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=Or.MessageDirection.clientToServer,n.type=new Or.ProtocolRequestType(n.method)})(Pm=en.CallHierarchyOutgoingCallsRequest||(en.CallHierarchyOutgoingCallsRequest={}))});var Xd=k(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.SemanticTokensRefreshRequest=Je.SemanticTokensRangeRequest=Je.SemanticTokensDeltaRequest=Je.SemanticTokensRequest=Je.SemanticTokensRegistrationType=Je.TokenFormat=void 0;var In=Ae(),qm;(function(n){n.Relative="relative"})(qm=Je.TokenFormat||(Je.TokenFormat={}));var hs;(function(n){n.method="textDocument/semanticTokens",n.type=new In.RegistrationType(n.method)})(hs=Je.SemanticTokensRegistrationType||(Je.SemanticTokensRegistrationType={}));var Em;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=In.MessageDirection.clientToServer,n.type=new In.ProtocolRequestType(n.method),n.registrationMethod=hs.method})(Em=Je.SemanticTokensRequest||(Je.SemanticTokensRequest={}));var km;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=In.MessageDirection.clientToServer,n.type=new In.ProtocolRequestType(n.method),n.registrationMethod=hs.method})(km=Je.SemanticTokensDeltaRequest||(Je.SemanticTokensDeltaRequest={}));var Im;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=In.MessageDirection.clientToServer,n.type=new In.ProtocolRequestType(n.method),n.registrationMethod=hs.method})(Im=Je.SemanticTokensRangeRequest||(Je.SemanticTokensRangeRequest={}));var xm;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=In.MessageDirection.serverToClient,n.type=new In.ProtocolRequestType0(n.method)})(xm=Je.SemanticTokensRefreshRequest||(Je.SemanticTokensRefreshRequest={}))});var Jd=k(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.ShowDocumentRequest=void 0;var Qd=Ae(),Om;(function(n){n.method="window/showDocument",n.messageDirection=Qd.MessageDirection.serverToClient,n.type=new Qd.ProtocolRequestType(n.method)})(Om=hi.ShowDocumentRequest||(hi.ShowDocumentRequest={}))});var Zd=k(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.LinkedEditingRangeRequest=void 0;var Yd=Ae(),Fm;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=Yd.MessageDirection.clientToServer,n.type=new Yd.ProtocolRequestType(n.method)})(Fm=gi.LinkedEditingRangeRequest||(gi.LinkedEditingRangeRequest={}))});var ef=k(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.WillDeleteFilesRequest=je.DidDeleteFilesNotification=je.DidRenameFilesNotification=je.WillRenameFilesRequest=je.DidCreateFilesNotification=je.WillCreateFilesRequest=je.FileOperationPatternKind=void 0;var Kt=Ae(),Nm;(function(n){n.file="file",n.folder="folder"})(Nm=je.FileOperationPatternKind||(je.FileOperationPatternKind={}));var Mm;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=Kt.MessageDirection.clientToServer,n.type=new Kt.ProtocolRequestType(n.method)})(Mm=je.WillCreateFilesRequest||(je.WillCreateFilesRequest={}));var Lm;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=Kt.MessageDirection.clientToServer,n.type=new Kt.ProtocolNotificationType(n.method)})(Lm=je.DidCreateFilesNotification||(je.DidCreateFilesNotification={}));var Am;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=Kt.MessageDirection.clientToServer,n.type=new Kt.ProtocolRequestType(n.method)})(Am=je.WillRenameFilesRequest||(je.WillRenameFilesRequest={}));var jm;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=Kt.MessageDirection.clientToServer,n.type=new Kt.ProtocolNotificationType(n.method)})(jm=je.DidRenameFilesNotification||(je.DidRenameFilesNotification={}));var $m;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=Kt.MessageDirection.clientToServer,n.type=new Kt.ProtocolNotificationType(n.method)})($m=je.DidDeleteFilesNotification||(je.DidDeleteFilesNotification={}));var Hm;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=Kt.MessageDirection.clientToServer,n.type=new Kt.ProtocolRequestType(n.method)})(Hm=je.WillDeleteFilesRequest||(je.WillDeleteFilesRequest={}))});var nf=k(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.MonikerRequest=tn.MonikerKind=tn.UniquenessLevel=void 0;var tf=Ae(),Um;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(Um=tn.UniquenessLevel||(tn.UniquenessLevel={}));var Wm;(function(n){n.$import="import",n.$export="export",n.local="local"})(Wm=tn.MonikerKind||(tn.MonikerKind={}));var Km;(function(n){n.method="textDocument/moniker",n.messageDirection=tf.MessageDirection.clientToServer,n.type=new tf.ProtocolRequestType(n.method)})(Km=tn.MonikerRequest||(tn.MonikerRequest={}))});var rf=k(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.TypeHierarchySubtypesRequest=nn.TypeHierarchySupertypesRequest=nn.TypeHierarchyPrepareRequest=void 0;var Fr=Ae(),zm;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=Fr.MessageDirection.clientToServer,n.type=new Fr.ProtocolRequestType(n.method)})(zm=nn.TypeHierarchyPrepareRequest||(nn.TypeHierarchyPrepareRequest={}));var Vm;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=Fr.MessageDirection.clientToServer,n.type=new Fr.ProtocolRequestType(n.method)})(Vm=nn.TypeHierarchySupertypesRequest||(nn.TypeHierarchySupertypesRequest={}));var Gm;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=Fr.MessageDirection.clientToServer,n.type=new Fr.ProtocolRequestType(n.method)})(Gm=nn.TypeHierarchySubtypesRequest||(nn.TypeHierarchySubtypesRequest={}))});var sf=k(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.InlineValueRefreshRequest=Yn.InlineValueRequest=void 0;var gs=Ae(),Bm;(function(n){n.method="textDocument/inlineValue",n.messageDirection=gs.MessageDirection.clientToServer,n.type=new gs.ProtocolRequestType(n.method)})(Bm=Yn.InlineValueRequest||(Yn.InlineValueRequest={}));var Xm;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=gs.MessageDirection.serverToClient,n.type=new gs.ProtocolRequestType0(n.method)})(Xm=Yn.InlineValueRefreshRequest||(Yn.InlineValueRefreshRequest={}))});var of=k(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.InlayHintRefreshRequest=rn.InlayHintResolveRequest=rn.InlayHintRequest=void 0;var Nr=Ae(),Qm;(function(n){n.method="textDocument/inlayHint",n.messageDirection=Nr.MessageDirection.clientToServer,n.type=new Nr.ProtocolRequestType(n.method)})(Qm=rn.InlayHintRequest||(rn.InlayHintRequest={}));var Jm;(function(n){n.method="inlayHint/resolve",n.messageDirection=Nr.MessageDirection.clientToServer,n.type=new Nr.ProtocolRequestType(n.method)})(Jm=rn.InlayHintResolveRequest||(rn.InlayHintResolveRequest={}));var Ym;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=Nr.MessageDirection.serverToClient,n.type=new Nr.ProtocolRequestType0(n.method)})(Ym=rn.InlayHintRefreshRequest||(rn.InlayHintRefreshRequest={}))});var cf=k(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.DiagnosticRefreshRequest=at.WorkspaceDiagnosticRequest=at.DocumentDiagnosticRequest=at.DocumentDiagnosticReportKind=at.DiagnosticServerCancellationData=void 0;var af=dr(),Zm=us(),Mr=Ae(),ey;(function(n){function e(t){let r=t;return r&&Zm.boolean(r.retriggerRequest)}n.is=e})(ey=at.DiagnosticServerCancellationData||(at.DiagnosticServerCancellationData={}));var ty;(function(n){n.Full="full",n.Unchanged="unchanged"})(ty=at.DocumentDiagnosticReportKind||(at.DocumentDiagnosticReportKind={}));var ny;(function(n){n.method="textDocument/diagnostic",n.messageDirection=Mr.MessageDirection.clientToServer,n.type=new Mr.ProtocolRequestType(n.method),n.partialResult=new af.ProgressType})(ny=at.DocumentDiagnosticRequest||(at.DocumentDiagnosticRequest={}));var ry;(function(n){n.method="workspace/diagnostic",n.messageDirection=Mr.MessageDirection.clientToServer,n.type=new Mr.ProtocolRequestType(n.method),n.partialResult=new af.ProgressType})(ry=at.WorkspaceDiagnosticRequest||(at.WorkspaceDiagnosticRequest={}));var iy;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=Mr.MessageDirection.serverToClient,n.type=new Mr.ProtocolRequestType0(n.method)})(iy=at.DiagnosticRefreshRequest||(at.DiagnosticRefreshRequest={}))});var df=k(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.DidCloseNotebookDocumentNotification=Ce.DidSaveNotebookDocumentNotification=Ce.DidChangeNotebookDocumentNotification=Ce.NotebookCellArrayChange=Ce.DidOpenNotebookDocumentNotification=Ce.NotebookDocumentSyncRegistrationType=Ce.NotebookDocument=Ce.NotebookCell=Ce.ExecutionSummary=Ce.NotebookCellKind=void 0;var pi=cs(),sn=us(),gn=Ae(),uf;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(uf=Ce.NotebookCellKind||(Ce.NotebookCellKind={}));var lf;(function(n){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}n.create=e;function t(i){let s=i;return sn.objectLiteral(s)&&pi.uinteger.is(s.executionOrder)&&(s.success===void 0||sn.boolean(s.success))}n.is=t;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}n.equals=r})(lf=Ce.ExecutionSummary||(Ce.ExecutionSummary={}));var $a;(function(n){function e(s,o){return{kind:s,document:o}}n.create=e;function t(s){let o=s;return sn.objectLiteral(o)&&uf.is(o.kind)&&pi.DocumentUri.is(o.document)&&(o.metadata===void 0||sn.objectLiteral(o.metadata))}n.is=t;function r(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!lf.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}n.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),u=Array.isArray(o);if(a!==u)return!1;if(a&&u){if(s.length!==o.length)return!1;for(let h=0;h<s.length;h++)if(!i(s[h],o[h]))return!1}if(sn.objectLiteral(s)&&sn.objectLiteral(o)){let h=Object.keys(s),y=Object.keys(o);if(h.length!==y.length||(h.sort(),y.sort(),!i(h,y)))return!1;for(let C=0;C<h.length;C++){let m=h[C];if(!i(s[m],o[m]))return!1}}return!0}})($a=Ce.NotebookCell||(Ce.NotebookCell={}));var sy;(function(n){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}n.create=e;function t(r){let i=r;return sn.objectLiteral(i)&&sn.string(i.uri)&&pi.integer.is(i.version)&&sn.typedArray(i.cells,$a.is)}n.is=t})(sy=Ce.NotebookDocument||(Ce.NotebookDocument={}));var mi;(function(n){n.method="notebookDocument/sync",n.messageDirection=gn.MessageDirection.clientToServer,n.type=new gn.RegistrationType(n.method)})(mi=Ce.NotebookDocumentSyncRegistrationType||(Ce.NotebookDocumentSyncRegistrationType={}));var oy;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=gn.MessageDirection.clientToServer,n.type=new gn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(oy=Ce.DidOpenNotebookDocumentNotification||(Ce.DidOpenNotebookDocumentNotification={}));var ay;(function(n){function e(r){let i=r;return sn.objectLiteral(i)&&pi.uinteger.is(i.start)&&pi.uinteger.is(i.deleteCount)&&(i.cells===void 0||sn.typedArray(i.cells,$a.is))}n.is=e;function t(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}n.create=t})(ay=Ce.NotebookCellArrayChange||(Ce.NotebookCellArrayChange={}));var cy;(function(n){n.method="notebookDocument/didChange",n.messageDirection=gn.MessageDirection.clientToServer,n.type=new gn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(cy=Ce.DidChangeNotebookDocumentNotification||(Ce.DidChangeNotebookDocumentNotification={}));var uy;(function(n){n.method="notebookDocument/didSave",n.messageDirection=gn.MessageDirection.clientToServer,n.type=new gn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(uy=Ce.DidSaveNotebookDocumentNotification||(Ce.DidSaveNotebookDocumentNotification={}));var ly;(function(n){n.method="notebookDocument/didClose",n.messageDirection=gn.MessageDirection.clientToServer,n.type=new gn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(ly=Ce.DidCloseNotebookDocumentNotification||(Ce.DidCloseNotebookDocumentNotification={}))});var Df=k(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.WorkspaceSymbolRequest=g.CodeActionResolveRequest=g.CodeActionRequest=g.DocumentSymbolRequest=g.DocumentHighlightRequest=g.ReferencesRequest=g.DefinitionRequest=g.SignatureHelpRequest=g.SignatureHelpTriggerKind=g.HoverRequest=g.CompletionResolveRequest=g.CompletionRequest=g.CompletionTriggerKind=g.PublishDiagnosticsNotification=g.WatchKind=g.RelativePattern=g.FileChangeType=g.DidChangeWatchedFilesNotification=g.WillSaveTextDocumentWaitUntilRequest=g.WillSaveTextDocumentNotification=g.TextDocumentSaveReason=g.DidSaveTextDocumentNotification=g.DidCloseTextDocumentNotification=g.DidChangeTextDocumentNotification=g.TextDocumentContentChangeEvent=g.DidOpenTextDocumentNotification=g.TextDocumentSyncKind=g.TelemetryEventNotification=g.LogMessageNotification=g.ShowMessageRequest=g.ShowMessageNotification=g.MessageType=g.DidChangeConfigurationNotification=g.ExitNotification=g.ShutdownRequest=g.InitializedNotification=g.InitializeErrorCodes=g.InitializeRequest=g.WorkDoneProgressOptions=g.TextDocumentRegistrationOptions=g.StaticRegistrationOptions=g.PositionEncodingKind=g.FailureHandlingKind=g.ResourceOperationKind=g.UnregistrationRequest=g.RegistrationRequest=g.DocumentSelector=g.NotebookCellTextDocumentFilter=g.NotebookDocumentFilter=g.TextDocumentFilter=void 0;g.TypeHierarchySubtypesRequest=g.TypeHierarchyPrepareRequest=g.MonikerRequest=g.MonikerKind=g.UniquenessLevel=g.WillDeleteFilesRequest=g.DidDeleteFilesNotification=g.WillRenameFilesRequest=g.DidRenameFilesNotification=g.WillCreateFilesRequest=g.DidCreateFilesNotification=g.FileOperationPatternKind=g.LinkedEditingRangeRequest=g.ShowDocumentRequest=g.SemanticTokensRegistrationType=g.SemanticTokensRefreshRequest=g.SemanticTokensRangeRequest=g.SemanticTokensDeltaRequest=g.SemanticTokensRequest=g.TokenFormat=g.CallHierarchyPrepareRequest=g.CallHierarchyOutgoingCallsRequest=g.CallHierarchyIncomingCallsRequest=g.WorkDoneProgressCancelNotification=g.WorkDoneProgressCreateRequest=g.WorkDoneProgress=g.SelectionRangeRequest=g.DeclarationRequest=g.FoldingRangeRequest=g.ColorPresentationRequest=g.DocumentColorRequest=g.ConfigurationRequest=g.DidChangeWorkspaceFoldersNotification=g.WorkspaceFoldersRequest=g.TypeDefinitionRequest=g.ImplementationRequest=g.ApplyWorkspaceEditRequest=g.ExecuteCommandRequest=g.PrepareRenameRequest=g.RenameRequest=g.PrepareSupportDefaultBehavior=g.DocumentOnTypeFormattingRequest=g.DocumentRangeFormattingRequest=g.DocumentFormattingRequest=g.DocumentLinkResolveRequest=g.DocumentLinkRequest=g.CodeLensRefreshRequest=g.CodeLensResolveRequest=g.CodeLensRequest=g.WorkspaceSymbolResolveRequest=void 0;g.DidCloseNotebookDocumentNotification=g.DidSaveNotebookDocumentNotification=g.DidChangeNotebookDocumentNotification=g.NotebookCellArrayChange=g.DidOpenNotebookDocumentNotification=g.NotebookDocumentSyncRegistrationType=g.NotebookDocument=g.NotebookCell=g.ExecutionSummary=g.NotebookCellKind=g.DiagnosticRefreshRequest=g.WorkspaceDiagnosticRequest=g.DocumentDiagnosticRequest=g.DocumentDiagnosticReportKind=g.DiagnosticServerCancellationData=g.InlayHintRefreshRequest=g.InlayHintResolveRequest=g.InlayHintRequest=g.InlineValueRefreshRequest=g.InlineValueRequest=g.TypeHierarchySupertypesRequest=void 0;var j=Ae(),ff=cs(),ct=us(),dy=Fd();Object.defineProperty(g,"ImplementationRequest",{enumerable:!0,get:function(){return dy.ImplementationRequest}});var fy=Md();Object.defineProperty(g,"TypeDefinitionRequest",{enumerable:!0,get:function(){return fy.TypeDefinitionRequest}});var hf=Ld();Object.defineProperty(g,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return hf.WorkspaceFoldersRequest}});Object.defineProperty(g,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return hf.DidChangeWorkspaceFoldersNotification}});var hy=jd();Object.defineProperty(g,"ConfigurationRequest",{enumerable:!0,get:function(){return hy.ConfigurationRequest}});var gf=$d();Object.defineProperty(g,"DocumentColorRequest",{enumerable:!0,get:function(){return gf.DocumentColorRequest}});Object.defineProperty(g,"ColorPresentationRequest",{enumerable:!0,get:function(){return gf.ColorPresentationRequest}});var gy=Ud();Object.defineProperty(g,"FoldingRangeRequest",{enumerable:!0,get:function(){return gy.FoldingRangeRequest}});var py=Kd();Object.defineProperty(g,"DeclarationRequest",{enumerable:!0,get:function(){return py.DeclarationRequest}});var my=Vd();Object.defineProperty(g,"SelectionRangeRequest",{enumerable:!0,get:function(){return my.SelectionRangeRequest}});var Ha=Gd();Object.defineProperty(g,"WorkDoneProgress",{enumerable:!0,get:function(){return Ha.WorkDoneProgress}});Object.defineProperty(g,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Ha.WorkDoneProgressCreateRequest}});Object.defineProperty(g,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Ha.WorkDoneProgressCancelNotification}});var Ua=Bd();Object.defineProperty(g,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ua.CallHierarchyIncomingCallsRequest}});Object.defineProperty(g,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ua.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(g,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ua.CallHierarchyPrepareRequest}});var Lr=Xd();Object.defineProperty(g,"TokenFormat",{enumerable:!0,get:function(){return Lr.TokenFormat}});Object.defineProperty(g,"SemanticTokensRequest",{enumerable:!0,get:function(){return Lr.SemanticTokensRequest}});Object.defineProperty(g,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Lr.SemanticTokensDeltaRequest}});Object.defineProperty(g,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Lr.SemanticTokensRangeRequest}});Object.defineProperty(g,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Lr.SemanticTokensRefreshRequest}});Object.defineProperty(g,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Lr.SemanticTokensRegistrationType}});var yy=Jd();Object.defineProperty(g,"ShowDocumentRequest",{enumerable:!0,get:function(){return yy.ShowDocumentRequest}});var vy=Zd();Object.defineProperty(g,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return vy.LinkedEditingRangeRequest}});var fr=ef();Object.defineProperty(g,"FileOperationPatternKind",{enumerable:!0,get:function(){return fr.FileOperationPatternKind}});Object.defineProperty(g,"DidCreateFilesNotification",{enumerable:!0,get:function(){return fr.DidCreateFilesNotification}});Object.defineProperty(g,"WillCreateFilesRequest",{enumerable:!0,get:function(){return fr.WillCreateFilesRequest}});Object.defineProperty(g,"DidRenameFilesNotification",{enumerable:!0,get:function(){return fr.DidRenameFilesNotification}});Object.defineProperty(g,"WillRenameFilesRequest",{enumerable:!0,get:function(){return fr.WillRenameFilesRequest}});Object.defineProperty(g,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return fr.DidDeleteFilesNotification}});Object.defineProperty(g,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return fr.WillDeleteFilesRequest}});var Wa=nf();Object.defineProperty(g,"UniquenessLevel",{enumerable:!0,get:function(){return Wa.UniquenessLevel}});Object.defineProperty(g,"MonikerKind",{enumerable:!0,get:function(){return Wa.MonikerKind}});Object.defineProperty(g,"MonikerRequest",{enumerable:!0,get:function(){return Wa.MonikerRequest}});var Ka=rf();Object.defineProperty(g,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ka.TypeHierarchyPrepareRequest}});Object.defineProperty(g,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Ka.TypeHierarchySubtypesRequest}});Object.defineProperty(g,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Ka.TypeHierarchySupertypesRequest}});var pf=sf();Object.defineProperty(g,"InlineValueRequest",{enumerable:!0,get:function(){return pf.InlineValueRequest}});Object.defineProperty(g,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return pf.InlineValueRefreshRequest}});var za=of();Object.defineProperty(g,"InlayHintRequest",{enumerable:!0,get:function(){return za.InlayHintRequest}});Object.defineProperty(g,"InlayHintResolveRequest",{enumerable:!0,get:function(){return za.InlayHintResolveRequest}});Object.defineProperty(g,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return za.InlayHintRefreshRequest}});var yi=cf();Object.defineProperty(g,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return yi.DiagnosticServerCancellationData}});Object.defineProperty(g,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return yi.DocumentDiagnosticReportKind}});Object.defineProperty(g,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return yi.DocumentDiagnosticRequest}});Object.defineProperty(g,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return yi.WorkspaceDiagnosticRequest}});Object.defineProperty(g,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return yi.DiagnosticRefreshRequest}});var pn=df();Object.defineProperty(g,"NotebookCellKind",{enumerable:!0,get:function(){return pn.NotebookCellKind}});Object.defineProperty(g,"ExecutionSummary",{enumerable:!0,get:function(){return pn.ExecutionSummary}});Object.defineProperty(g,"NotebookCell",{enumerable:!0,get:function(){return pn.NotebookCell}});Object.defineProperty(g,"NotebookDocument",{enumerable:!0,get:function(){return pn.NotebookDocument}});Object.defineProperty(g,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return pn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(g,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return pn.DidOpenNotebookDocumentNotification}});Object.defineProperty(g,"NotebookCellArrayChange",{enumerable:!0,get:function(){return pn.NotebookCellArrayChange}});Object.defineProperty(g,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return pn.DidChangeNotebookDocumentNotification}});Object.defineProperty(g,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return pn.DidSaveNotebookDocumentNotification}});Object.defineProperty(g,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return pn.DidCloseNotebookDocumentNotification}});var mf;(function(n){function e(t){let r=t;return ct.string(r.language)||ct.string(r.scheme)||ct.string(r.pattern)}n.is=e})(mf=g.TextDocumentFilter||(g.TextDocumentFilter={}));var yf;(function(n){function e(t){let r=t;return ct.objectLiteral(r)&&(ct.string(r.notebookType)||ct.string(r.scheme)||ct.string(r.pattern))}n.is=e})(yf=g.NotebookDocumentFilter||(g.NotebookDocumentFilter={}));var vf;(function(n){function e(t){let r=t;return ct.objectLiteral(r)&&(ct.string(r.notebook)||yf.is(r.notebook))&&(r.language===void 0||ct.string(r.language))}n.is=e})(vf=g.NotebookCellTextDocumentFilter||(g.NotebookCellTextDocumentFilter={}));var Cf;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!ct.string(r)&&!mf.is(r)&&!vf.is(r))return!1;return!0}n.is=e})(Cf=g.DocumentSelector||(g.DocumentSelector={}));var Cy;(function(n){n.method="client/registerCapability",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType(n.method)})(Cy=g.RegistrationRequest||(g.RegistrationRequest={}));var Dy;(function(n){n.method="client/unregisterCapability",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType(n.method)})(Dy=g.UnregistrationRequest||(g.UnregistrationRequest={}));var _y;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(_y=g.ResourceOperationKind||(g.ResourceOperationKind={}));var by;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(by=g.FailureHandlingKind||(g.FailureHandlingKind={}));var Ry;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(Ry=g.PositionEncodingKind||(g.PositionEncodingKind={}));var Sy;(function(n){function e(t){let r=t;return r&&ct.string(r.id)&&r.id.length>0}n.hasId=e})(Sy=g.StaticRegistrationOptions||(g.StaticRegistrationOptions={}));var wy;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||Cf.is(r.documentSelector))}n.is=e})(wy=g.TextDocumentRegistrationOptions||(g.TextDocumentRegistrationOptions={}));var Ty;(function(n){function e(r){let i=r;return ct.objectLiteral(i)&&(i.workDoneProgress===void 0||ct.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&ct.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(Ty=g.WorkDoneProgressOptions||(g.WorkDoneProgressOptions={}));var Py;(function(n){n.method="initialize",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Py=g.InitializeRequest||(g.InitializeRequest={}));var qy;(function(n){n.unknownProtocolVersion=1})(qy=g.InitializeErrorCodes||(g.InitializeErrorCodes={}));var Ey;(function(n){n.method="initialized",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Ey=g.InitializedNotification||(g.InitializedNotification={}));var ky;(function(n){n.method="shutdown",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType0(n.method)})(ky=g.ShutdownRequest||(g.ShutdownRequest={}));var Iy;(function(n){n.method="exit",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType0(n.method)})(Iy=g.ExitNotification||(g.ExitNotification={}));var xy;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(xy=g.DidChangeConfigurationNotification||(g.DidChangeConfigurationNotification={}));var Oy;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(Oy=g.MessageType||(g.MessageType={}));var Fy;(function(n){n.method="window/showMessage",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(Fy=g.ShowMessageNotification||(g.ShowMessageNotification={}));var Ny;(function(n){n.method="window/showMessageRequest",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType(n.method)})(Ny=g.ShowMessageRequest||(g.ShowMessageRequest={}));var My;(function(n){n.method="window/logMessage",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(My=g.LogMessageNotification||(g.LogMessageNotification={}));var Ly;(function(n){n.method="telemetry/event",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(Ly=g.TelemetryEventNotification||(g.TelemetryEventNotification={}));var Ay;(function(n){n.None=0,n.Full=1,n.Incremental=2})(Ay=g.TextDocumentSyncKind||(g.TextDocumentSyncKind={}));var jy;(function(n){n.method="textDocument/didOpen",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(jy=g.DidOpenTextDocumentNotification||(g.DidOpenTextDocumentNotification={}));var $y;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})($y=g.TextDocumentContentChangeEvent||(g.TextDocumentContentChangeEvent={}));var Hy;(function(n){n.method="textDocument/didChange",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Hy=g.DidChangeTextDocumentNotification||(g.DidChangeTextDocumentNotification={}));var Uy;(function(n){n.method="textDocument/didClose",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Uy=g.DidCloseTextDocumentNotification||(g.DidCloseTextDocumentNotification={}));var Wy;(function(n){n.method="textDocument/didSave",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Wy=g.DidSaveTextDocumentNotification||(g.DidSaveTextDocumentNotification={}));var Ky;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(Ky=g.TextDocumentSaveReason||(g.TextDocumentSaveReason={}));var zy;(function(n){n.method="textDocument/willSave",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(zy=g.WillSaveTextDocumentNotification||(g.WillSaveTextDocumentNotification={}));var Vy;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Vy=g.WillSaveTextDocumentWaitUntilRequest||(g.WillSaveTextDocumentWaitUntilRequest={}));var Gy;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolNotificationType(n.method)})(Gy=g.DidChangeWatchedFilesNotification||(g.DidChangeWatchedFilesNotification={}));var By;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(By=g.FileChangeType||(g.FileChangeType={}));var Xy;(function(n){function e(t){let r=t;return ct.objectLiteral(r)&&(ff.URI.is(r.baseUri)||ff.WorkspaceFolder.is(r.baseUri))&&ct.string(r.pattern)}n.is=e})(Xy=g.RelativePattern||(g.RelativePattern={}));var Qy;(function(n){n.Create=1,n.Change=2,n.Delete=4})(Qy=g.WatchKind||(g.WatchKind={}));var Jy;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolNotificationType(n.method)})(Jy=g.PublishDiagnosticsNotification||(g.PublishDiagnosticsNotification={}));var Yy;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(Yy=g.CompletionTriggerKind||(g.CompletionTriggerKind={}));var Zy;(function(n){n.method="textDocument/completion",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Zy=g.CompletionRequest||(g.CompletionRequest={}));var ev;(function(n){n.method="completionItem/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(ev=g.CompletionResolveRequest||(g.CompletionResolveRequest={}));var tv;(function(n){n.method="textDocument/hover",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(tv=g.HoverRequest||(g.HoverRequest={}));var nv;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(nv=g.SignatureHelpTriggerKind||(g.SignatureHelpTriggerKind={}));var rv;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(rv=g.SignatureHelpRequest||(g.SignatureHelpRequest={}));var iv;(function(n){n.method="textDocument/definition",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(iv=g.DefinitionRequest||(g.DefinitionRequest={}));var sv;(function(n){n.method="textDocument/references",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(sv=g.ReferencesRequest||(g.ReferencesRequest={}));var ov;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(ov=g.DocumentHighlightRequest||(g.DocumentHighlightRequest={}));var av;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(av=g.DocumentSymbolRequest||(g.DocumentSymbolRequest={}));var cv;(function(n){n.method="textDocument/codeAction",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(cv=g.CodeActionRequest||(g.CodeActionRequest={}));var uv;(function(n){n.method="codeAction/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(uv=g.CodeActionResolveRequest||(g.CodeActionResolveRequest={}));var lv;(function(n){n.method="workspace/symbol",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(lv=g.WorkspaceSymbolRequest||(g.WorkspaceSymbolRequest={}));var dv;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(dv=g.WorkspaceSymbolResolveRequest||(g.WorkspaceSymbolResolveRequest={}));var fv;(function(n){n.method="textDocument/codeLens",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(fv=g.CodeLensRequest||(g.CodeLensRequest={}));var hv;(function(n){n.method="codeLens/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(hv=g.CodeLensResolveRequest||(g.CodeLensResolveRequest={}));var gv;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType0(n.method)})(gv=g.CodeLensRefreshRequest||(g.CodeLensRefreshRequest={}));var pv;(function(n){n.method="textDocument/documentLink",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(pv=g.DocumentLinkRequest||(g.DocumentLinkRequest={}));var mv;(function(n){n.method="documentLink/resolve",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(mv=g.DocumentLinkResolveRequest||(g.DocumentLinkResolveRequest={}));var yv;(function(n){n.method="textDocument/formatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(yv=g.DocumentFormattingRequest||(g.DocumentFormattingRequest={}));var vv;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(vv=g.DocumentRangeFormattingRequest||(g.DocumentRangeFormattingRequest={}));var Cv;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Cv=g.DocumentOnTypeFormattingRequest||(g.DocumentOnTypeFormattingRequest={}));var Dv;(function(n){n.Identifier=1})(Dv=g.PrepareSupportDefaultBehavior||(g.PrepareSupportDefaultBehavior={}));var _v;(function(n){n.method="textDocument/rename",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(_v=g.RenameRequest||(g.RenameRequest={}));var bv;(function(n){n.method="textDocument/prepareRename",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(bv=g.PrepareRenameRequest||(g.PrepareRenameRequest={}));var Rv;(function(n){n.method="workspace/executeCommand",n.messageDirection=j.MessageDirection.clientToServer,n.type=new j.ProtocolRequestType(n.method)})(Rv=g.ExecuteCommandRequest||(g.ExecuteCommandRequest={}));var Sv;(function(n){n.method="workspace/applyEdit",n.messageDirection=j.MessageDirection.serverToClient,n.type=new j.ProtocolRequestType("workspace/applyEdit")})(Sv=g.ApplyWorkspaceEditRequest||(g.ApplyWorkspaceEditRequest={}))});var bf=k(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.createProtocolConnection=void 0;var _f=dr();function wv(n,e,t,r){return _f.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,_f.createMessageConnection)(n,e,t,r)}ps.createProtocolConnection=wv});var Rf=k(_t=>{"use strict";var Tv=_t&&_t.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ms=_t&&_t.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Tv(e,n,t)};Object.defineProperty(_t,"__esModule",{value:!0});_t.LSPErrorCodes=_t.createProtocolConnection=void 0;ms(dr(),_t);ms(cs(),_t);ms(Ae(),_t);ms(Df(),_t);var Pv=bf();Object.defineProperty(_t,"createProtocolConnection",{enumerable:!0,get:function(){return Pv.createProtocolConnection}});var qv;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(qv=_t.LSPErrorCodes||(_t.LSPErrorCodes={}))});var ne=k(mn=>{"use strict";var Ev=mn&&mn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Sf=mn&&mn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ev(e,n,t)};Object.defineProperty(mn,"__esModule",{value:!0});mn.createProtocolConnection=void 0;var kv=Fa();Sf(Fa(),mn);Sf(Rf(),mn);function Iv(n,e,t,r){return(0,kv.createMessageConnection)(n,e,t,r)}mn.createProtocolConnection=Iv});var ys=k(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.forEach=dt.mapAsync=dt.map=dt.clearTestMode=dt.setTestMode=dt.Semaphore=dt.Delayer=void 0;var Ci=ne(),Va=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,Ci.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};dt.Delayer=Va;var Ga=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Ci.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};dt.Semaphore=Ga;var Ba=!1;function xv(){Ba=!0}dt.setTestMode=xv;function Ov(){Ba=!1}dt.clearTestMode=Ov;var wf=15,vi=class{constructor(e=wf){this.yieldAfter=Ba===!0?Math.max(e,2):Math.max(e,wf),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function Fv(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),s=new vi(r?.yieldAfter);function o(u){s.start();for(let h=u;h<n.length;h++)if(i[h]=e(n[h]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),h+1;return-1}let a=o(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(u=>{(0,Ci.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}dt.map=Fv;async function Nv(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),s=new vi(r?.yieldAfter);async function o(u){s.start();for(let h=u;h<n.length;h++)if(i[h]=await e(n[h],t),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),h+1;return-1}let a=await o(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(u=>{(0,Ci.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}dt.mapAsync=Nv;async function Mv(n,e,t,r){if(n.length===0)return;let i=new vi(r?.yieldAfter);function s(a){i.start();for(let u=a;u<n.length;u++)if(e(n[u]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let o=s(0);for(;o!==-1&&!(t!==void 0&&t.isCancellationRequested);)o=await new Promise(a=>{(0,Ci.RAL)().timer.setImmediate(()=>{a(s(o))})})}dt.forEach=Mv});var Ja=k(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var Lv=require("vscode"),Xa=class extends Lv.CompletionItem{constructor(e){super(e)}};Qa.default=Xa});var ec=k(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var Av=require("vscode"),Ya=class extends Av.CodeLens{constructor(e){super(e)}};Za.default=Ya});var rc=k(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var jv=require("vscode"),tc=class extends jv.DocumentLink{constructor(e,t){super(e,t)}};nc.default=tc});var oc=k(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var $v=require("vscode"),ic=class extends $v.CodeAction{constructor(e,t){super(e),this.data=t}};sc.default=ic});var uc=k(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.ProtocolDiagnostic=hr.DiagnosticCode=void 0;var Hv=require("vscode"),ac=Wt(),Uv;(function(n){function e(t){let r=t;return r!=null&&(ac.number(r.value)||ac.string(r.value))&&ac.string(r.target)}n.is=e})(Uv=hr.DiagnosticCode||(hr.DiagnosticCode={}));var cc=class extends Hv.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};hr.ProtocolDiagnostic=cc});var fc=k(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});var Wv=require("vscode"),lc=class extends Wv.CallHierarchyItem{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,o),a!==void 0&&(this.data=a)}};dc.default=lc});var pc=k(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var Kv=require("vscode"),hc=class extends Kv.TypeHierarchyItem{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,o),a!==void 0&&(this.data=a)}};gc.default=hc});var vc=k(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});var vs=require("vscode"),mc=class extends vs.SymbolInformation{constructor(e,t,r,i,s){let o=!(i instanceof vs.Uri);super(e,t,r,o?i:new vs.Location(i,new vs.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};yc.default=mc});var _c=k(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var zv=require("vscode"),Cc=class extends zv.InlayHint{constructor(e,t,r){super(e,t,r)}};Dc.default=Cc});var qf=k(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.createConverter=void 0;var Ye=require("vscode"),oe=ne(),Ar=Wt(),Tf=ys(),Vv=Ja(),Gv=ec(),Bv=rc(),Xv=oc(),Pf=uc(),Qv=fc(),Jv=pc(),Yv=vc(),Zv=_c(),bc;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(bc||(bc={}));function eC(n){let t=n||(d=>d.toString());function r(d){return t(d)}function i(d){return{uri:t(d.uri)}}function s(d){return{uri:t(d.uri),languageId:d.languageId,version:d.version,text:d.getText()}}function o(d){return{uri:t(d.uri),version:d.version}}function a(d){return{textDocument:s(d)}}function u(d){let P=d;return!!P.document&&!!P.contentChanges}function h(d){let P=d;return!!P.uri&&!!P.version}function y(d,P,U){if(h(d))return{textDocument:{uri:t(d.uri),version:d.version},contentChanges:[{text:d.getText()}]};if(u(d)){let se=P,R=U;return{textDocument:{uri:t(se),version:R},contentChanges:d.contentChanges.map(_=>{let b=_.range;return{range:{start:{line:b.start.line,character:b.start.character},end:{line:b.end.line,character:b.end.character}},rangeLength:_.rangeLength,text:_.text}})}}else throw Error("Unsupported text document change parameter")}function C(d){return{textDocument:i(d)}}function m(d,P=!1){let U={textDocument:i(d)};return P&&(U.text=d.getText()),U}function w(d){switch(d){case Ye.TextDocumentSaveReason.Manual:return oe.TextDocumentSaveReason.Manual;case Ye.TextDocumentSaveReason.AfterDelay:return oe.TextDocumentSaveReason.AfterDelay;case Ye.TextDocumentSaveReason.FocusOut:return oe.TextDocumentSaveReason.FocusOut}return oe.TextDocumentSaveReason.Manual}function v(d){return{textDocument:i(d.document),reason:w(d.reason)}}function q(d){return{files:d.files.map(P=>({uri:t(P)}))}}function E(d){return{files:d.files.map(P=>({oldUri:t(P.oldUri),newUri:t(P.newUri)}))}}function N(d){return{files:d.files.map(P=>({uri:t(P)}))}}function L(d){return{files:d.files.map(P=>({uri:t(P)}))}}function M(d){return{files:d.files.map(P=>({oldUri:t(P.oldUri),newUri:t(P.newUri)}))}}function H(d){return{files:d.files.map(P=>({uri:t(P)}))}}function B(d,P){return{textDocument:i(d),position:it(P)}}function ue(d){switch(d){case Ye.CompletionTriggerKind.TriggerCharacter:return oe.CompletionTriggerKind.TriggerCharacter;case Ye.CompletionTriggerKind.TriggerForIncompleteCompletions:return oe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return oe.CompletionTriggerKind.Invoked}}function z(d,P,U){return{textDocument:i(d),position:it(P),context:{triggerKind:ue(U.triggerKind),triggerCharacter:U.triggerCharacter}}}function ee(d){switch(d){case Ye.SignatureHelpTriggerKind.Invoke:return oe.SignatureHelpTriggerKind.Invoked;case Ye.SignatureHelpTriggerKind.TriggerCharacter:return oe.SignatureHelpTriggerKind.TriggerCharacter;case Ye.SignatureHelpTriggerKind.ContentChange:return oe.SignatureHelpTriggerKind.ContentChange}}function le(d){return{label:d.label}}function Xe(d){return d.map(le)}function Ge(d){return{label:d.label,parameters:Xe(d.parameters)}}function et(d){return d.map(Ge)}function Bt(d){return d===void 0?d:{signatures:et(d.signatures),activeSignature:d.activeSignature,activeParameter:d.activeParameter}}function gt(d,P,U){return{textDocument:i(d),position:it(P),context:{isRetrigger:U.isRetrigger,triggerCharacter:U.triggerCharacter,triggerKind:ee(U.triggerKind),activeSignatureHelp:Bt(U.activeSignatureHelp)}}}function it(d){return{line:d.line,character:d.character}}function pt(d){return d==null?d:{line:d.line>oe.uinteger.MAX_VALUE?oe.uinteger.MAX_VALUE:d.line,character:d.character>oe.uinteger.MAX_VALUE?oe.uinteger.MAX_VALUE:d.character}}function ln(d,P){return Tf.map(d,pt,P)}function We(d){return d==null?d:{start:pt(d.start),end:pt(d.end)}}function mt(d){return d==null?d:oe.Location.create(r(d.uri),We(d.range))}function Tt(d){switch(d){case Ye.DiagnosticSeverity.Error:return oe.DiagnosticSeverity.Error;case Ye.DiagnosticSeverity.Warning:return oe.DiagnosticSeverity.Warning;case Ye.DiagnosticSeverity.Information:return oe.DiagnosticSeverity.Information;case Ye.DiagnosticSeverity.Hint:return oe.DiagnosticSeverity.Hint}}function dn(d){if(!d)return;let P=[];for(let U of d){let se=ut(U);se!==void 0&&P.push(se)}return P.length>0?P:void 0}function ut(d){switch(d){case Ye.DiagnosticTag.Unnecessary:return oe.DiagnosticTag.Unnecessary;case Ye.DiagnosticTag.Deprecated:return oe.DiagnosticTag.Deprecated;default:return}}function ir(d){return{message:d.message,location:mt(d.location)}}function Hn(d){return d.map(ir)}function Dn(d){if(d!=null)return Ar.number(d)||Ar.string(d)?d:{value:d.value,target:r(d.target)}}function _n(d){let P=oe.Diagnostic.create(We(d.range),d.message),U=d instanceof Pf.ProtocolDiagnostic?d:void 0;U!==void 0&&U.data!==void 0&&(P.data=U.data);let se=Dn(d.code);return Pf.DiagnosticCode.is(se)?U!==void 0&&U.hasDiagnosticCode?P.code=se:(P.code=se.value,P.codeDescription={href:se.target}):P.code=se,Ar.number(d.severity)&&(P.severity=Tt(d.severity)),Array.isArray(d.tags)&&(P.tags=dn(d.tags)),d.relatedInformation&&(P.relatedInformation=Hn(d.relatedInformation)),d.source&&(P.source=d.source),P}function bn(d,P){return d==null?d:Tf.map(d,_n,P)}function sr(d,P){switch(d){case"$string":return P;case oe.MarkupKind.PlainText:return{kind:d,value:P};case oe.MarkupKind.Markdown:return{kind:d,value:P.value};default:return`Unsupported Markup content received. Kind is: ${d}`}}function Un(d){switch(d){case Ye.CompletionItemTag.Deprecated:return oe.CompletionItemTag.Deprecated}}function Wn(d){if(d===void 0)return d;let P=[];for(let U of d){let se=Un(U);se!==void 0&&P.push(se)}return P}function Rn(d,P){return P!==void 0?P:d+1}function tt(d,P=!1){let U,se;Ar.string(d.label)?U=d.label:(U=d.label.label,P&&(d.label.detail!==void 0||d.label.description!==void 0)&&(se={detail:d.label.detail,description:d.label.description}));let R={label:U};se!==void 0&&(R.labelDetails=se);let f=d instanceof Vv.default?d:void 0;d.detail&&(R.detail=d.detail),d.documentation&&(!f||f.documentationFormat==="$string"?R.documentation=d.documentation:R.documentation=sr(f.documentationFormat,d.documentation)),d.filterText&&(R.filterText=d.filterText),Kn(R,d),Ar.number(d.kind)&&(R.kind=Rn(d.kind,f&&f.originalItemKind)),d.sortText&&(R.sortText=d.sortText),d.additionalTextEdits&&(R.additionalTextEdits=zn(d.additionalTextEdits)),d.commitCharacters&&(R.commitCharacters=d.commitCharacters.slice()),d.command&&(R.command=Pt(d.command)),(d.preselect===!0||d.preselect===!1)&&(R.preselect=d.preselect);let _=Wn(d.tags);if(f){if(f.data!==void 0&&(R.data=f.data),f.deprecated===!0||f.deprecated===!1){if(f.deprecated===!0&&_!==void 0&&_.length>0){let b=_.indexOf(Ye.CompletionItemTag.Deprecated);b!==-1&&_.splice(b,1)}R.deprecated=f.deprecated}f.insertTextMode!==void 0&&(R.insertTextMode=f.insertTextMode)}return _!==void 0&&_.length>0&&(R.tags=_),R.insertTextMode===void 0&&d.keepWhitespace===!0&&(R.insertTextMode=oe.InsertTextMode.adjustIndentation),R}function Kn(d,P){let U=oe.InsertTextFormat.PlainText,se,R;P.textEdit?(se=P.textEdit.newText,R=P.textEdit.range):P.insertText instanceof Ye.SnippetString?(U=oe.InsertTextFormat.Snippet,se=P.insertText.value):se=P.insertText,P.range&&(R=P.range),d.insertTextFormat=U,P.fromEdit&&se!==void 0&&R!==void 0?d.textEdit=fn(se,R):d.insertText=se}function fn(d,P){return bc.is(P)?oe.InsertReplaceEdit.create(d,We(P.inserting),We(P.replacing)):{newText:d,range:We(P)}}function Ut(d){return{range:We(d.range),newText:d.newText}}function zn(d){return d==null?d:d.map(Ut)}function yt(d){return d<=Ye.SymbolKind.TypeParameter?d+1:oe.SymbolKind.Property}function Sn(d){return d}function Be(d){return d.map(Sn)}function Xt(d,P,U){return{textDocument:i(d),position:it(P),context:{includeDeclaration:U.includeDeclaration}}}async function vt(d,P){let U=oe.CodeAction.create(d.title);if(d instanceof Xv.default&&d.data!==void 0&&(U.data=d.data),d.kind!==void 0&&(U.kind=Tn(d.kind)),d.diagnostics!==void 0&&(U.diagnostics=await bn(d.diagnostics,P)),d.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return d.command!==void 0&&(U.command=Pt(d.command)),d.isPreferred!==void 0&&(U.isPreferred=d.isPreferred),d.disabled!==void 0&&(U.disabled={reason:d.disabled.reason}),U}async function wn(d,P){if(d==null)return d;let U;return d.only&&Ar.string(d.only.value)&&(U=[d.only.value]),oe.CodeActionContext.create(await bn(d.diagnostics,P),U,Ft(d.triggerKind))}function Ft(d){switch(d){case Ye.CodeActionTriggerKind.Invoke:return oe.CodeActionTriggerKind.Invoked;case Ye.CodeActionTriggerKind.Automatic:return oe.CodeActionTriggerKind.Automatic;default:return}}function Tn(d){if(d!=null)return d.value}function Vn(d){return d==null?d:oe.InlineValueContext.create(d.frameId,We(d.stoppedLocation))}function Pt(d){let P=oe.Command.create(d.title,d.command);return d.arguments&&(P.arguments=d.arguments),P}function Gn(d){let P=oe.CodeLens.create(We(d.range));return d.command&&(P.command=Pt(d.command)),d instanceof Gv.default&&d.data&&(P.data=d.data),P}function Nt(d,P){let U={tabSize:d.tabSize,insertSpaces:d.insertSpaces};return P.trimTrailingWhitespace&&(U.trimTrailingWhitespace=!0),P.trimFinalNewlines&&(U.trimFinalNewlines=!0),P.insertFinalNewline&&(U.insertFinalNewline=!0),U}function D(d){return{textDocument:i(d)}}function x(d){return{textDocument:i(d)}}function $(d){let P=oe.DocumentLink.create(We(d.range));d.target&&(P.target=r(d.target)),d.tooltip!==void 0&&(P.tooltip=d.tooltip);let U=d instanceof Bv.default?d:void 0;return U&&U.data&&(P.data=U.data),P}function K(d){return{textDocument:i(d)}}function ye(d){let P={name:d.name,kind:yt(d.kind),uri:r(d.uri),range:We(d.range),selectionRange:We(d.selectionRange)};return d.detail!==void 0&&d.detail.length>0&&(P.detail=d.detail),d.tags!==void 0&&(P.tags=Be(d.tags)),d instanceof Qv.default&&d.data!==void 0&&(P.data=d.data),P}function pe(d){let P={name:d.name,kind:yt(d.kind),uri:r(d.uri),range:We(d.range),selectionRange:We(d.selectionRange)};return d.detail!==void 0&&d.detail.length>0&&(P.detail=d.detail),d.tags!==void 0&&(P.tags=Be(d.tags)),d instanceof Jv.default&&d.data!==void 0&&(P.data=d.data),P}function Se(d){let P=d instanceof Yv.default?{name:d.name,kind:yt(d.kind),location:d.hasRange?mt(d.location):{uri:t(d.location.uri)},data:d.data}:{name:d.name,kind:yt(d.kind),location:mt(d.location)};return d.tags!==void 0&&(P.tags=Be(d.tags)),d.containerName!==""&&(P.containerName=d.containerName),P}function qe(d){let P=typeof d.label=="string"?d.label:d.label.map(ie),U=oe.InlayHint.create(pt(d.position),P);return d.kind!==void 0&&(U.kind=d.kind),d.textEdits!==void 0&&(U.textEdits=zn(d.textEdits)),d.tooltip!==void 0&&(U.tooltip=ve(d.tooltip)),d.paddingLeft!==void 0&&(U.paddingLeft=d.paddingLeft),d.paddingRight!==void 0&&(U.paddingRight=d.paddingRight),d instanceof Zv.default&&d.data!==void 0&&(U.data=d.data),U}function ie(d){let P=oe.InlayHintLabelPart.create(d.value);return d.location!==void 0&&(P.location=mt(d.location)),d.command!==void 0&&(P.command=Pt(d.command)),d.tooltip!==void 0&&(P.tooltip=ve(d.tooltip)),P}function ve(d){return typeof d=="string"?d:{kind:oe.MarkupKind.Markdown,value:d.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:y,asCloseTextDocumentParams:C,asSaveTextDocumentParams:m,asWillSaveTextDocumentParams:v,asDidCreateFilesParams:q,asDidRenameFilesParams:E,asDidDeleteFilesParams:N,asWillCreateFilesParams:L,asWillRenameFilesParams:M,asWillDeleteFilesParams:H,asTextDocumentPositionParams:B,asCompletionParams:z,asSignatureHelpParams:gt,asWorkerPosition:it,asRange:We,asPosition:pt,asPositions:ln,asLocation:mt,asDiagnosticSeverity:Tt,asDiagnosticTag:ut,asDiagnostic:_n,asDiagnostics:bn,asCompletionItem:tt,asTextEdit:Ut,asSymbolKind:yt,asSymbolTag:Sn,asSymbolTags:Be,asReferenceParams:Xt,asCodeAction:vt,asCodeActionContext:wn,asInlineValueContext:Vn,asCommand:Pt,asCodeLens:Gn,asFormattingOptions:Nt,asDocumentSymbolParams:D,asCodeLensParams:x,asDocumentLink:$,asDocumentLinkParams:K,asCallHierarchyItem:ye,asTypeHierarchyItem:pe,asInlayHint:qe,asWorkspaceSymbol:Se}}Cs.createConverter=eC});var If=k(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.createConverter=void 0;var W=require("vscode"),Z=ne(),zt=Wt(),_e=ys(),tC=Ja(),nC=ec(),rC=rc(),iC=oc(),Ef=uc(),sC=fc(),oC=pc(),aC=vc(),cC=_c(),kf=ne(),Ds;(function(n){function e(t){let r=t;return r&&zt.string(r.language)&&zt.string(r.value)}n.is=e})(Ds||(Ds={}));function uC(n,e,t){let i=n||(c=>W.Uri.parse(c));function s(c){return i(c)}function o(c){let S=[];for(let F of c)if(typeof F=="string")S.push(F);else if(kf.NotebookCellTextDocumentFilter.is(F))if(typeof F.notebook=="string")S.push({notebookType:F.notebook,language:F.language});else{let J=F.notebook.notebookType??"*";S.push({notebookType:J,scheme:F.notebook.scheme,pattern:F.notebook.pattern,language:F.language})}else kf.TextDocumentFilter.is(F)&&S.push({language:F.language,scheme:F.scheme,pattern:F.pattern});return S}async function a(c,S){return _e.map(c,h,S)}function u(c){let S=new Array(c.length);for(let F=0;F<c.length;F++)S[F]=h(c[F]);return S}function h(c){let S=new Ef.ProtocolDiagnostic(v(c.range),c.message,E(c.severity),c.data);if(c.code!==void 0){if(typeof c.code=="string"||typeof c.code=="number")Z.CodeDescription.is(c.codeDescription)?S.code={value:c.code,target:s(c.codeDescription.href)}:S.code=c.code;else if(Ef.DiagnosticCode.is(c.code)){S.hasDiagnosticCode=!0;let F=c.code;S.code={value:F.value,target:s(F.target)}}}return c.source&&(S.source=c.source),c.relatedInformation&&(S.relatedInformation=y(c.relatedInformation)),Array.isArray(c.tags)&&(S.tags=C(c.tags)),S}function y(c){let S=new Array(c.length);for(let F=0;F<c.length;F++){let J=c[F];S[F]=new W.DiagnosticRelatedInformation(ut(J.location),J.message)}return S}function C(c){if(!c)return;let S=[];for(let F of c){let J=m(F);J!==void 0&&S.push(J)}return S.length>0?S:void 0}function m(c){switch(c){case Z.DiagnosticTag.Unnecessary:return W.DiagnosticTag.Unnecessary;case Z.DiagnosticTag.Deprecated:return W.DiagnosticTag.Deprecated;default:return}}function w(c){return c?new W.Position(c.line,c.character):void 0}function v(c){return c?new W.Range(c.start.line,c.start.character,c.end.line,c.end.character):void 0}async function q(c,S){return _e.map(c,F=>new W.Range(F.start.line,F.start.character,F.end.line,F.end.character),S)}function E(c){if(c==null)return W.DiagnosticSeverity.Error;switch(c){case Z.DiagnosticSeverity.Error:return W.DiagnosticSeverity.Error;case Z.DiagnosticSeverity.Warning:return W.DiagnosticSeverity.Warning;case Z.DiagnosticSeverity.Information:return W.DiagnosticSeverity.Information;case Z.DiagnosticSeverity.Hint:return W.DiagnosticSeverity.Hint}return W.DiagnosticSeverity.Error}function N(c){if(zt.string(c))return M(c);if(Ds.is(c))return M().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let S=[];for(let F of c){let J=M();Ds.is(F)?J.appendCodeblock(F.value,F.language):J.appendMarkdown(F),S.push(J)}return S}else return M(c)}function L(c){if(zt.string(c))return c;switch(c.kind){case Z.MarkupKind.Markdown:return M(c.value);case Z.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function M(c){let S;if(c===void 0||typeof c=="string")S=new W.MarkdownString(c);else switch(c.kind){case Z.MarkupKind.Markdown:S=new W.MarkdownString(c.value);break;case Z.MarkupKind.PlainText:S=new W.MarkdownString,S.appendText(c.value);break;default:S=new W.MarkdownString,S.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`);break}return S.isTrusted=e,S.supportHtml=t,S}function H(c){if(c)return new W.Hover(N(c.contents),v(c.range))}async function B(c,S,F){if(!c)return;if(Array.isArray(c))return _e.map(c,hn=>Xe(hn,S),F);let J=c,{defaultRange:Et,commitCharacters:st}=ue(J,S),we=await _e.map(J.items,hn=>Xe(hn,st,Et,J.itemDefaults?.insertTextMode,J.itemDefaults?.insertTextFormat,J.itemDefaults?.data),F);return new W.CompletionList(we,J.isIncomplete)}function ue(c,S){let F=c.itemDefaults?.editRange,J=c.itemDefaults?.commitCharacters??S;return Z.Range.is(F)?{defaultRange:v(F),commitCharacters:J}:F!==void 0?{defaultRange:{inserting:v(F.insert),replacing:v(F.replace)},commitCharacters:J}:{defaultRange:void 0,commitCharacters:J}}function z(c){return Z.CompletionItemKind.Text<=c&&c<=Z.CompletionItemKind.TypeParameter?[c-1,void 0]:[W.CompletionItemKind.Text,c]}function ee(c){switch(c){case Z.CompletionItemTag.Deprecated:return W.CompletionItemTag.Deprecated}}function le(c){if(c==null)return[];let S=[];for(let F of c){let J=ee(F);J!==void 0&&S.push(J)}return S}function Xe(c,S,F,J,Et,st){let we=le(c.tags),hn=Ge(c),Ee=new tC.default(hn);c.detail&&(Ee.detail=c.detail),c.documentation&&(Ee.documentation=L(c.documentation),Ee.documentationFormat=zt.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(Ee.filterText=c.filterText);let Vi=et(c,F,Et);if(Vi&&(Ee.insertText=Vi.text,Ee.range=Vi.range,Ee.fromEdit=Vi.fromEdit),zt.number(c.kind)){let[up,Jl]=z(c.kind);Ee.kind=up,Jl&&(Ee.originalItemKind=Jl)}c.sortText&&(Ee.sortText=c.sortText),c.additionalTextEdits&&(Ee.additionalTextEdits=pt(c.additionalTextEdits));let Xl=c.commitCharacters!==void 0?zt.stringArray(c.commitCharacters)?c.commitCharacters:void 0:S;Xl&&(Ee.commitCharacters=Xl.slice()),c.command&&(Ee.command=Be(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(Ee.deprecated=c.deprecated,c.deprecated===!0&&we.push(W.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(Ee.preselect=c.preselect);let Ql=c.data??st;Ql!==void 0&&(Ee.data=Ql),we.length>0&&(Ee.tags=we);let _o=c.insertTextMode??J;return _o!==void 0&&(Ee.insertTextMode=_o,_o===Z.InsertTextMode.asIs&&(Ee.keepWhitespace=!0)),Ee}function Ge(c){return Z.CompletionItemLabelDetails.is(c.labelDetails)?{label:c.label,detail:c.labelDetails.detail,description:c.labelDetails.description}:c.label}function et(c,S,F){let J=c.insertTextFormat??F;if(c.textEdit!==void 0||S!==void 0){let[Et,st]=c.textEdit!==void 0?Bt(c.textEdit):[S,c.textEditText??c.label];return J===Z.InsertTextFormat.Snippet?{text:new W.SnippetString(st),range:Et,fromEdit:!0}:{text:st,range:Et,fromEdit:!0}}else return c.insertText?J===Z.InsertTextFormat.Snippet?{text:new W.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function Bt(c){return Z.InsertReplaceEdit.is(c)?[{inserting:v(c.insert),replacing:v(c.replace)},c.newText]:[v(c.range),c.newText]}function gt(c){if(c)return new W.TextEdit(v(c.range),c.newText)}async function it(c,S){if(c)return _e.map(c,gt,S)}function pt(c){if(!c)return;let S=new Array(c.length);for(let F=0;F<c.length;F++)S[F]=gt(c[F]);return S}async function ln(c,S){if(!c)return;let F=new W.SignatureHelp;return zt.number(c.activeSignature)?F.activeSignature=c.activeSignature:F.activeSignature=0,zt.number(c.activeParameter)?F.activeParameter=c.activeParameter:F.activeParameter=0,c.signatures&&(F.signatures=await We(c.signatures,S)),F}async function We(c,S){return _e.mapAsync(c,mt,S)}async function mt(c,S){let F=new W.SignatureInformation(c.label);return c.documentation!==void 0&&(F.documentation=L(c.documentation)),c.parameters!==void 0&&(F.parameters=await Tt(c.parameters,S)),c.activeParameter!==void 0&&(F.activeParameter=c.activeParameter),F}function Tt(c,S){return _e.map(c,dn,S)}function dn(c){let S=new W.ParameterInformation(c.label);return c.documentation&&(S.documentation=L(c.documentation)),S}function ut(c){return c?new W.Location(i(c.uri),v(c.range)):void 0}async function ir(c,S){if(c)return _n(c,S)}async function Hn(c,S){if(c)return _n(c,S)}function Dn(c){if(!c)return;let S={targetUri:i(c.targetUri),targetRange:v(c.targetRange),originSelectionRange:v(c.originSelectionRange),targetSelectionRange:v(c.targetSelectionRange)};if(!S.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return S}async function _n(c,S){if(c)if(zt.array(c)){if(c.length===0)return[];if(Z.LocationLink.is(c[0])){let F=c;return _e.map(F,Dn,S)}else{let F=c;return _e.map(F,ut,S)}}else return Z.LocationLink.is(c)?[Dn(c)]:ut(c)}async function bn(c,S){if(c)return _e.map(c,ut,S)}async function sr(c,S){if(c)return _e.map(c,Un,S)}function Un(c){let S=new W.DocumentHighlight(v(c.range));return zt.number(c.kind)&&(S.kind=Wn(c.kind)),S}function Wn(c){switch(c){case Z.DocumentHighlightKind.Text:return W.DocumentHighlightKind.Text;case Z.DocumentHighlightKind.Read:return W.DocumentHighlightKind.Read;case Z.DocumentHighlightKind.Write:return W.DocumentHighlightKind.Write}return W.DocumentHighlightKind.Text}async function Rn(c,S){if(c)return _e.map(c,Ut,S)}function tt(c){return c<=Z.SymbolKind.TypeParameter?c-1:W.SymbolKind.Property}function Kn(c){switch(c){case Z.SymbolTag.Deprecated:return W.SymbolTag.Deprecated;default:return}}function fn(c){if(c==null)return;let S=[];for(let F of c){let J=Kn(F);J!==void 0&&S.push(J)}return S.length===0?void 0:S}function Ut(c){let S=c.data,F=c.location,J=F.range===void 0||S!==void 0?new aC.default(c.name,tt(c.kind),c.containerName??"",F.range===void 0?i(F.uri):new W.Location(i(c.location.uri),v(F.range)),S):new W.SymbolInformation(c.name,tt(c.kind),c.containerName??"",new W.Location(i(c.location.uri),v(F.range)));return Sn(J,c),J}async function zn(c,S){if(c!=null)return _e.map(c,yt,S)}function yt(c){let S=new W.DocumentSymbol(c.name,c.detail||"",tt(c.kind),v(c.range),v(c.selectionRange));if(Sn(S,c),c.children!==void 0&&c.children.length>0){let F=[];for(let J of c.children)F.push(yt(J));S.children=F}return S}function Sn(c,S){c.tags=fn(S.tags),S.deprecated&&(c.tags?c.tags.includes(W.SymbolTag.Deprecated)||(c.tags=c.tags.concat(W.SymbolTag.Deprecated)):c.tags=[W.SymbolTag.Deprecated])}function Be(c){let S={title:c.title,command:c.command};return c.arguments&&(S.arguments=c.arguments),S}async function Xt(c,S){if(c)return _e.map(c,Be,S)}let vt=new Map;vt.set(Z.CodeActionKind.Empty,W.CodeActionKind.Empty),vt.set(Z.CodeActionKind.QuickFix,W.CodeActionKind.QuickFix),vt.set(Z.CodeActionKind.Refactor,W.CodeActionKind.Refactor),vt.set(Z.CodeActionKind.RefactorExtract,W.CodeActionKind.RefactorExtract),vt.set(Z.CodeActionKind.RefactorInline,W.CodeActionKind.RefactorInline),vt.set(Z.CodeActionKind.RefactorRewrite,W.CodeActionKind.RefactorRewrite),vt.set(Z.CodeActionKind.Source,W.CodeActionKind.Source),vt.set(Z.CodeActionKind.SourceOrganizeImports,W.CodeActionKind.SourceOrganizeImports);function wn(c){if(c==null)return;let S=vt.get(c);if(S)return S;let F=c.split(".");S=W.CodeActionKind.Empty;for(let J of F)S=S.append(J);return S}function Ft(c){if(c!=null)return c.map(S=>wn(S))}async function Tn(c,S){if(c==null)return;let F=new iC.default(c.title,c.data);return c.kind!==void 0&&(F.kind=wn(c.kind)),c.diagnostics!==void 0&&(F.diagnostics=u(c.diagnostics)),c.edit!==void 0&&(F.edit=await Nt(c.edit,S)),c.command!==void 0&&(F.command=Be(c.command)),c.isPreferred!==void 0&&(F.isPreferred=c.isPreferred),c.disabled!==void 0&&(F.disabled={reason:c.disabled.reason}),F}function Vn(c,S){return _e.mapAsync(c,async F=>Z.Command.is(F)?Be(F):Tn(F,S),S)}function Pt(c){if(!c)return;let S=new nC.default(v(c.range));return c.command&&(S.command=Be(c.command)),c.data!==void 0&&c.data!==null&&(S.data=c.data),S}async function Gn(c,S){if(c)return _e.map(c,Pt,S)}async function Nt(c,S){if(!c)return;let F=new Map;if(c.changeAnnotations!==void 0){let st=c.changeAnnotations;await _e.forEach(Object.keys(st),we=>{let hn=D(st[we]);F.set(we,hn)},S)}let J=st=>{if(st!==void 0)return F.get(st)},Et=new W.WorkspaceEdit;if(c.documentChanges){let st=c.documentChanges;await _e.forEach(st,we=>{if(Z.CreateFile.is(we))Et.createFile(i(we.uri),we.options,J(we.annotationId));else if(Z.RenameFile.is(we))Et.renameFile(i(we.oldUri),i(we.newUri),we.options,J(we.annotationId));else if(Z.DeleteFile.is(we))Et.deleteFile(i(we.uri),we.options,J(we.annotationId));else if(Z.TextDocumentEdit.is(we)){let hn=i(we.textDocument.uri);for(let Ee of we.edits)Z.AnnotatedTextEdit.is(Ee)?Et.replace(hn,v(Ee.range),Ee.newText,J(Ee.annotationId)):Et.replace(hn,v(Ee.range),Ee.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(we,void 0,4)}`)},S)}else if(c.changes){let st=c.changes;await _e.forEach(Object.keys(st),we=>{Et.set(i(we),pt(st[we]))},S)}return Et}function D(c){if(c!==void 0)return{label:c.label,needsConfirmation:!!c.needsConfirmation,description:c.description}}function x(c){let S=v(c.range),F=c.target?s(c.target):void 0,J=new rC.default(S,F);return c.tooltip!==void 0&&(J.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(J.data=c.data),J}async function $(c,S){if(c)return _e.map(c,x,S)}function K(c){return new W.Color(c.red,c.green,c.blue,c.alpha)}function ye(c){return new W.ColorInformation(v(c.range),K(c.color))}async function pe(c,S){if(c)return _e.map(c,ye,S)}function Se(c){let S=new W.ColorPresentation(c.label);return S.additionalTextEdits=pt(c.additionalTextEdits),c.textEdit&&(S.textEdit=gt(c.textEdit)),S}async function qe(c,S){if(c)return _e.map(c,Se,S)}function ie(c){if(c)switch(c){case Z.FoldingRangeKind.Comment:return W.FoldingRangeKind.Comment;case Z.FoldingRangeKind.Imports:return W.FoldingRangeKind.Imports;case Z.FoldingRangeKind.Region:return W.FoldingRangeKind.Region}}function ve(c){return new W.FoldingRange(c.startLine,c.endLine,ie(c.kind))}async function d(c,S){if(c)return _e.map(c,ve,S)}function P(c){return new W.SelectionRange(v(c.range),c.parent?P(c.parent):void 0)}async function U(c,S){return Array.isArray(c)?_e.map(c,P,S):[]}function se(c){return Z.InlineValueText.is(c)?new W.InlineValueText(v(c.range),c.text):Z.InlineValueVariableLookup.is(c)?new W.InlineValueVariableLookup(v(c.range),c.variableName,c.caseSensitiveLookup):new W.InlineValueEvaluatableExpression(v(c.range),c.expression)}async function R(c,S){return Array.isArray(c)?_e.map(c,se,S):[]}async function f(c,S){let F=typeof c.label=="string"?c.label:await _e.map(c.label,_,S),J=new cC.default(w(c.position),F);return c.kind!==void 0&&(J.kind=c.kind),c.textEdits!==void 0&&(J.textEdits=await it(c.textEdits,S)),c.tooltip!==void 0&&(J.tooltip=b(c.tooltip)),c.paddingLeft!==void 0&&(J.paddingLeft=c.paddingLeft),c.paddingRight!==void 0&&(J.paddingRight=c.paddingRight),c.data!==void 0&&(J.data=c.data),J}function _(c){let S=new W.InlayHintLabelPart(c.value);return c.location!==void 0&&(S.location=ut(c.location)),c.tooltip!==void 0&&(S.tooltip=b(c.tooltip)),c.command!==void 0&&(S.command=Be(c.command)),S}function b(c){return typeof c=="string"?c:M(c)}async function p(c,S){if(Array.isArray(c))return _e.mapAsync(c,f,S)}function l(c){if(c===null)return;let S=new sC.default(tt(c.kind),c.name,c.detail||"",s(c.uri),v(c.range),v(c.selectionRange),c.data);return c.tags!==void 0&&(S.tags=fn(c.tags)),S}async function T(c,S){if(c!==null)return _e.map(c,l,S)}async function O(c,S){return new W.CallHierarchyIncomingCall(l(c.from),await q(c.fromRanges,S))}async function te(c,S){if(c!==null)return _e.mapAsync(c,O,S)}async function xe(c,S){return new W.CallHierarchyOutgoingCall(l(c.to),await q(c.fromRanges,S))}async function Pe(c,S){if(c!==null)return _e.mapAsync(c,xe,S)}async function Mt(c,S){if(c!=null)return new W.SemanticTokens(new Uint32Array(c.data),c.resultId)}function qt(c){return new W.SemanticTokensEdit(c.start,c.deleteCount,c.data!==void 0?new Uint32Array(c.data):void 0)}async function Qt(c,S){if(c!=null)return new W.SemanticTokensEdits(c.edits.map(qt),c.resultId)}function de(c){return c}async function Bn(c,S){if(c!=null)return new W.LinkedEditingRanges(await q(c.ranges,S),wr(c.wordPattern))}function wr(c){if(c!=null)return new RegExp(c)}function ei(c){if(c===null)return;let S=new oC.default(tt(c.kind),c.name,c.detail||"",s(c.uri),v(c.range),v(c.selectionRange),c.data);return c.tags!==void 0&&(S.tags=fn(c.tags)),S}async function ap(c,S){if(c!==null)return _e.map(c,ei,S)}function cp(c){if(zt.string(c))return c;if(Z.RelativePattern.is(c)){if(Z.URI.is(c.baseUri))return new W.RelativePattern(s(c.baseUri),c.pattern);if(Z.WorkspaceFolder.is(c.baseUri)){let S=W.workspace.getWorkspaceFolder(s(c.baseUri.uri));return S!==void 0?new W.RelativePattern(S,c.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:h,asRange:v,asRanges:q,asPosition:w,asDiagnosticSeverity:E,asDiagnosticTag:m,asHover:H,asCompletionResult:B,asCompletionItem:Xe,asTextEdit:gt,asTextEdits:it,asSignatureHelp:ln,asSignatureInformations:We,asSignatureInformation:mt,asParameterInformations:Tt,asParameterInformation:dn,asDeclarationResult:ir,asDefinitionResult:Hn,asLocation:ut,asReferences:bn,asDocumentHighlights:sr,asDocumentHighlight:Un,asDocumentHighlightKind:Wn,asSymbolKind:tt,asSymbolTag:Kn,asSymbolTags:fn,asSymbolInformations:Rn,asSymbolInformation:Ut,asDocumentSymbols:zn,asDocumentSymbol:yt,asCommand:Be,asCommands:Xt,asCodeAction:Tn,asCodeActionKind:wn,asCodeActionKinds:Ft,asCodeActionResult:Vn,asCodeLens:Pt,asCodeLenses:Gn,asWorkspaceEdit:Nt,asDocumentLink:x,asDocumentLinks:$,asFoldingRangeKind:ie,asFoldingRange:ve,asFoldingRanges:d,asColor:K,asColorInformation:ye,asColorInformations:pe,asColorPresentation:Se,asColorPresentations:qe,asSelectionRange:P,asSelectionRanges:U,asInlineValue:se,asInlineValues:R,asInlayHint:f,asInlayHints:p,asSemanticTokensLegend:de,asSemanticTokens:Mt,asSemanticTokensEdit:qt,asSemanticTokensEdits:Qt,asCallHierarchyItem:l,asCallHierarchyItems:T,asCallHierarchyIncomingCall:O,asCallHierarchyIncomingCalls:te,asCallHierarchyOutgoingCall:xe,asCallHierarchyOutgoingCalls:Pe,asLinkedEditingRanges:Bn,asTypeHierarchyItem:ei,asTypeHierarchyItems:ap,asGlobPattern:cp}}_s.createConverter=uC});var $e=k(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.generateUuid=Vt.parse=Vt.isUUID=Vt.v4=Vt.empty=void 0;var Di=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},_i=class n extends Di{constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}};_i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];_i._timeHighBits=["8","9","a","b"];Vt.empty=new Di("00000000-0000-0000-0000-000000000000");function xf(){return new _i}Vt.v4=xf;var lC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Of(n){return lC.test(n)}Vt.isUUID=Of;function dC(n){if(!Of(n))throw new Error("invalid uuid");return new Di(n)}Vt.parse=dC;function fC(){return xf().asHex()}Vt.generateUuid=fC});var Sc=k(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.ProgressPart=void 0;var Ff=require("vscode"),Nf=ne(),Mf=Wt(),Rc=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Nf.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Ff.window.withProgress({location:Ff.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Nf.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&Mf.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Mf.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};bs.ProgressPart=Rc});var me=k(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.WorkspaceFeature=Ze.TextDocumentLanguageFeature=Ze.TextDocumentEventFeature=Ze.DynamicDocumentFeature=Ze.DynamicFeature=Ze.StaticFeature=Ze.ensure=Ze.LSPCancellationError=void 0;var gr=require("vscode"),wc=ne(),bt=Wt(),Lf=$e(),Tc=class extends gr.CancellationError{constructor(e){super(),this.data=e}};Ze.LSPCancellationError=Tc;function hC(n,e){return n[e]===void 0&&(n[e]={}),n[e]}Ze.ensure=hC;var gC;(function(n){function e(t){let r=t;return r!=null&&bt.func(r.fillClientCapabilities)&&bt.func(r.initialize)&&bt.func(r.getState)&&bt.func(r.dispose)&&(r.fillInitializeParams===void 0||bt.func(r.fillInitializeParams))}n.is=e})(gC=Ze.StaticFeature||(Ze.StaticFeature={}));var pC;(function(n){function e(t){let r=t;return r!=null&&bt.func(r.fillClientCapabilities)&&bt.func(r.initialize)&&bt.func(r.getState)&&bt.func(r.dispose)&&(r.fillInitializeParams===void 0||bt.func(r.fillInitializeParams))&&bt.func(r.register)&&bt.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(pC=Ze.DynamicFeature||(Ze.DynamicFeature={}));var bi=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let s of gr.workspace.textDocuments)if(gr.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};Ze.DynamicDocumentFeature=bi;var Pc=class extends bi{constructor(e,t,r,i,s,o,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new gr.EventEmitter}static textDocumentFilter(e,t){for(let r of e)if(gr.languages.match(r,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(gr.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};Ze.TextDocumentEventFeature=Pc;var qc=class extends bi{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(wc.TextDocumentRegistrationOptions.is(t)){let r=wc.StaticRegistrationOptions.hasId(t)?t.id:Lf.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(bt.boolean(t)&&t===!0||wc.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=bt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Lf.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return bt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&gr.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Ze.TextDocumentLanguageFeature=qc;var Ec=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Ze.WorkspaceFeature=Ec});var jf=k((UR,Af)=>{var mC=typeof process=="object"&&process&&process.platform==="win32";Af.exports=mC?{sep:"\\"}:{sep:"/"}});var Kf=k((WR,Wf)=>{"use strict";Wf.exports=Hf;function Hf(n,e,t){n instanceof RegExp&&(n=$f(n,t)),e instanceof RegExp&&(e=$f(e,t));var r=Uf(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function $f(n,e){var t=e.match(n);return t?t[0]:null}Hf.range=Uf;function Uf(n,e,t){var r,i,s,o,a,u=t.indexOf(n),h=t.indexOf(e,u+1),y=u;if(u>=0&&h>0){if(n===e)return[u,h];for(r=[],s=t.length;y>=0&&!a;)y==u?(r.push(y),u=t.indexOf(n,y+1)):r.length==1?a=[r.pop(),h]:(i=r.pop(),i<s&&(s=i,o=h),h=t.indexOf(e,y+1)),y=u<h&&u>=0?u:h;r.length&&(a=[s,o])}return a}});var Yf=k((KR,Jf)=>{var zf=Kf();Jf.exports=CC;var Vf="\0SLASH"+Math.random()+"\0",Gf="\0OPEN"+Math.random()+"\0",Ic="\0CLOSE"+Math.random()+"\0",Bf="\0COMMA"+Math.random()+"\0",Xf="\0PERIOD"+Math.random()+"\0";function kc(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function yC(n){return n.split("\\\\").join(Vf).split("\\{").join(Gf).split("\\}").join(Ic).split("\\,").join(Bf).split("\\.").join(Xf)}function vC(n){return n.split(Vf).join("\\").split(Gf).join("{").split(Ic).join("}").split(Bf).join(",").split(Xf).join(".")}function Qf(n){if(!n)return[""];var e=[],t=zf("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,s=t.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=Qf(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function CC(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),Ri(yC(n),!0).map(vC)):[]}function DC(n){return"{"+n+"}"}function _C(n){return/^-?0\d/.test(n)}function bC(n,e){return n<=e}function RC(n,e){return n>=e}function Ri(n,e){var t=[],r=zf("{","}",n);if(!r)return[n];var i=r.pre,s=r.post.length?Ri(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];t.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),y=u||h,C=r.body.indexOf(",")>=0;if(!y&&!C)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+Ic+r.post,Ri(n)):[n];var m;if(y)m=r.body.split(/\.\./);else if(m=Qf(r.body),m.length===1&&(m=Ri(m[0],!1).map(DC),m.length===1))return s.map(function(Xe){return r.pre+m[0]+Xe});var w;if(y){var v=kc(m[0]),q=kc(m[1]),E=Math.max(m[0].length,m[1].length),N=m.length==3?Math.abs(kc(m[2])):1,L=bC,M=q<v;M&&(N*=-1,L=RC);var H=m.some(_C);w=[];for(var B=v;L(B,q);B+=N){var ue;if(h)ue=String.fromCharCode(B),ue==="\\"&&(ue="");else if(ue=String(B),H){var z=E-ue.length;if(z>0){var ee=new Array(z+1).join("0");B<0?ue="-"+ee+ue.slice(1):ue=ee+ue}}w.push(ue)}}else{w=[];for(var le=0;le<m.length;le++)w.push.apply(w,Ri(m[le],!1))}for(var le=0;le<w.length;le++)for(var o=0;o<s.length;o++){var a=i+w[le]+s[o];(!e||y||a)&&t.push(a)}}return t}});var Ss=k((VR,Mc)=>{var At=Mc.exports=(n,e,t={})=>(Rs(e),!t.nocomment&&e.charAt(0)==="#"?!1:new jr(e,t).match(n));Mc.exports=At;var Fc=jf();At.sep=Fc.sep;var on=Symbol("globstar **");At.GLOBSTAR=on;var SC=Yf(),Zf={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Nc="[^/]",xc=Nc+"*?",wC="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",TC="(?:(?!(?:\\/|^)\\.).)*?",nh=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),eh=nh("().*{}+?[]^$\\!"),PC=nh("[.("),th=/\/+/;At.filter=(n,e={})=>(t,r,i)=>At(t,n,e);var Zn=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};At.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return At;let e=At,t=(r,i,s)=>e(r,i,Zn(n,s));return t.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Zn(n,s))}},t.Minimatch.defaults=r=>e.defaults(Zn(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,Zn(n,i)),t.defaults=r=>e.defaults(Zn(n,r)),t.makeRe=(r,i)=>e.makeRe(r,Zn(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,Zn(n,i)),t.match=(r,i,s)=>e.match(r,i,Zn(n,s)),t};At.braceExpand=(n,e)=>rh(n,e);var rh=(n,e={})=>(Rs(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:SC(n)),qC=1024*64,Rs=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>qC)throw new TypeError("pattern is too long")},Oc=Symbol("subparse");At.makeRe=(n,e)=>new jr(n,e||{}).makeRe();At.match=(n,e,t={})=>{let r=new jr(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var EC=n=>n.replace(/\\(.)/g,"$1"),kC=n=>n.replace(/\\([^-\]])/g,"$1"),IC=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),xC=n=>n.replace(/[[\]\\]/g,"\\$&"),jr=class{constructor(e,t){Rs(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(th)),this.debug(this.pattern,r),r=r.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,u=t.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var h=t[o],y=e[s];if(this.debug(t,h,y),h===!1)return!1;if(h===on){this.debug("GLOBSTAR",[t,h,y]);var C=s,m=o+1;if(m===u){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;C<a;){var w=e[C];if(this.debug(`
globstar while`,e,C,t,m,w),this.matchOne(e.slice(C),t.slice(m),r))return this.debug("globstar found match!",C,a,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,C,t,m);break}this.debug("globstar swallow a segment, and continue"),C++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,C,t,m),C===a))}var v;if(typeof h=="string"?(v=y===h,this.debug("string match",h,y,v)):(v=y.match(h),this.debug("pattern match",h,y,v)),!v)return!1}if(s===a&&o===u)return!0;if(s===a)return r;if(o===u)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return rh(this.pattern,this.options)}parse(e,t){Rs(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return on;if(e==="")return"";let i="",s=!1,o=!1,a=[],u=[],h,y=!1,C=-1,m=-1,w,v,q,E=e.charAt(0)===".",N=r.dot||E,L=()=>E?"":N?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",M=z=>z.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",H=()=>{if(h){switch(h){case"*":i+=xc,s=!0;break;case"?":i+=Nc,s=!0;break;default:i+="\\"+h;break}this.debug("clearStateChar %j %j",h,i),h=!1}};for(let z=0,ee;z<e.length&&(ee=e.charAt(z));z++){if(this.debug("%s	%s %s %j",e,z,i,ee),o){if(ee==="/")return!1;eh[ee]&&(i+="\\"),i+=ee,o=!1;continue}switch(ee){case"/":return!1;case"\\":if(y&&e.charAt(z+1)==="-"){i+=ee;continue}H(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,z,i,ee),y){this.debug("  in class"),ee==="!"&&z===m+1&&(ee="^"),i+=ee;continue}this.debug("call clearStateChar %j",h),H(),h=ee,r.noext&&H();continue;case"(":{if(y){i+="(";continue}if(!h){i+="\\(";continue}let le={type:h,start:z-1,reStart:i.length,open:Zf[h].open,close:Zf[h].close};this.debug(this.pattern,"	",le),a.push(le),i+=le.open,le.start===0&&le.type!=="!"&&(E=!0,i+=M(e.slice(z+1))),this.debug("plType %j %j",h,i),h=!1;continue}case")":{let le=a[a.length-1];if(y||!le){i+="\\)";continue}a.pop(),H(),s=!0,v=le,i+=v.close,v.type==="!"&&u.push(Object.assign(v,{reEnd:i.length}));continue}case"|":{let le=a[a.length-1];if(y||!le){i+="\\|";continue}H(),i+="|",le.start===0&&le.type!=="!"&&(E=!0,i+=M(e.slice(z+1)));continue}case"[":if(H(),y){i+="\\"+ee;continue}y=!0,m=z,C=i.length,i+=ee;continue;case"]":if(z===m+1||!y){i+="\\"+ee;continue}w=e.substring(m+1,z);try{RegExp("["+xC(kC(w))+"]"),i+=ee}catch{i=i.substring(0,C)+"(?:$.)"}s=!0,y=!1;continue;default:H(),eh[ee]&&!(ee==="^"&&y)&&(i+="\\"),i+=ee;break}}for(y&&(w=e.slice(m+1),q=this.parse(w,Oc),i=i.substring(0,C)+"\\["+q[0],s=s||q[1]),v=a.pop();v;v=a.pop()){let z;z=i.slice(v.reStart+v.open.length),this.debug("setting tail",i,v),z=z.replace(/((?:\\{2}){0,64})(\\?)\|/g,(le,Xe,Ge)=>(Ge||(Ge="\\"),Xe+Xe+Ge+"|")),this.debug(`tail=%j
   %s`,z,z,v,i);let ee=v.type==="*"?xc:v.type==="?"?Nc:"\\"+v.type;s=!0,i=i.slice(0,v.reStart)+ee+"\\("+z}H(),o&&(i+="\\\\");let B=PC[i.charAt(0)];for(let z=u.length-1;z>-1;z--){let ee=u[z],le=i.slice(0,ee.reStart),Xe=i.slice(ee.reStart,ee.reEnd-8),Ge=i.slice(ee.reEnd),et=i.slice(ee.reEnd-8,ee.reEnd)+Ge,Bt=le.split(")").length,gt=le.split("(").length-Bt,it=Ge;for(let ln=0;ln<gt;ln++)it=it.replace(/\)[+*?]?/,"");Ge=it;let pt=Ge===""&&t!==Oc?"(?:$|\\/)":"";i=le+Xe+Ge+pt+et}if(i!==""&&s&&(i="(?=.)"+i),B&&(i=L()+i),t===Oc)return[i,s];if(r.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return EC(e);let ue=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",ue),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?xc:t.dot?wC:TC,i=t.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?IC(a):a===on?on:a._src).reduce((a,u)=>(a[a.length-1]===on&&u===on||a.push(u),a),[]),o.forEach((a,u)=>{a!==on||o[u-1]===on||(u===0?o.length>1?o[u+1]="(?:\\/|"+r+"\\/)?"+o[u+1]:o[u]=r:u===o.length-1?o[u-1]+="(?:\\/|"+r+")?":(o[u-1]+="(?:\\/|\\/"+r+"\\/)"+o[u+1],o[u+1]=on))}),o.filter(a=>a!==on).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;Fc.sep!=="/"&&(e=e.split(Fc.sep).join("/")),e=e.split(th),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=e;if(r.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return At.defaults(e).Minimatch}};At.Minimatch=jr});var zc=k(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.DiagnosticFeature=yn.DiagnosticPullMode=yn.vsdiag=void 0;var OC=Ss(),ge=require("vscode"),ze=ne(),FC=$e(),Lc=me();function ws(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var an;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(an=yn.vsdiag||(yn.vsdiag={}));var Ac;(function(n){n.onType="onType",n.onSave="onSave"})(Ac=yn.DiagnosticPullMode||(yn.DiagnosticPullMode={}));var ft;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(ft||(ft={}));var jc=class n{constructor(){this.open=new Set,this._onOpen=new ge.EventEmitter,this._onClose=new ge.EventEmitter,n.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;n.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of r.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let u of s)a.add(ge.Uri.parse(u));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let u of o)a.add(ge.Uri.parse(u));this._onOpen.fire(a)}};ge.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=ge.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof ge.Uri?ge.window.activeTextEditor?.document.uri===e:ge.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof ge.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return n.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of ge.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof ge.TabInputText?a=o.uri:o instanceof ge.TabInputTextDiff&&(a=o.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),t!==void 0&&t.add(a))}}},nt;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(nt||(nt={}));var xn;(function(n){function e(t){return t instanceof ge.Uri?t.toString():t.uri.toString()}n.asKey=e})(xn||(xn={}));var $c=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===nt.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=t instanceof ge.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],u=i.get(s);return u===void 0&&(u={document:o,pulledVersion:a,resultId:void 0},i.set(s,u)),u}update(e,t,r,i){let s=e===nt.document?this.documentPullStates:this.workspacePullStates,[o,a,u,h]=t instanceof ge.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],y=s.get(o);y===void 0?(y={document:a,pulledVersion:u,resultId:h},s.set(o,y)):(y.pulledVersion=u,y.resultId=h)}unTrack(e,t){let r=xn.asKey(t);(e===nt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=xn.asKey(t);return(e===nt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=xn.asKey(t);return(e===nt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},Hc=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new ge.EventEmitter,this.provider=this.createProvider(),this.diagnostics=ge.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new $c,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof ge.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof ge.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof ge.Uri,i=r?e:e.uri,s=i.toString();t=r?t:e.version;let o=this.openRequests.get(s),a=r?this.documentStates.track(nt.document,e,t):this.documentStates.track(nt.document,e);if(o===void 0){let u=new ge.CancellationTokenSource;this.openRequests.set(s,{state:ft.active,document:e,version:t,tokenSource:u});let h,y;try{h=await this.provider.provideDiagnostics(e,a.resultId,u.token)??{kind:an.DocumentDiagnosticReportKind.full,items:[]}}catch(C){if(C instanceof Lc.LSPCancellationError&&ze.DiagnosticServerCancellationData.is(C.data)&&C.data.retriggerRequest===!1&&(y={state:ft.outDated,document:e}),y===void 0&&C instanceof ge.CancellationError)y={state:ft.reschedule,document:e};else throw C}if(y=y??this.openRequests.get(s),y===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(nt.document,e);return}if(y.state===ft.outDated)return;h!==void 0&&(h.kind===an.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,h.items),a.pulledVersion=t,a.resultId=h.resultId),y.state===ft.reschedule&&this.pull(e)}else o.state===ft.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:ft.reschedule,document:o.document})):o.state===ft.outDated&&this.openRequests.set(s,{state:ft.reschedule,document:o.document})}forgetDocument(e){let t=e instanceof ge.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:ft.reschedule,document:e}):this.pull(e,()=>{this.forget(nt.document,e)}):(i!==void 0&&(i.state===ft.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:ft.outDated,document:e})),this.diagnostics.delete(t),this.forget(nt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,ze.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Lc.LSPCancellationError)&&!ze.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,ze.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new ge.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===an.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(nt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(nt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let s=(a,u,h)=>{let y={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof ge.Uri?a:a.uri)},previousResultId:u};return this.isDisposed===!0||!this.client.isRunning()?{kind:an.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(ze.DocumentDiagnosticRequest.type,y,h).then(async C=>C==null||this.isDisposed||h.isCancellationRequested?{kind:an.DocumentDiagnosticReportKind.full,items:[]}:C.kind===ze.DocumentDiagnosticReportKind.Full?{kind:an.DocumentDiagnosticReportKind.full,resultId:C.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(C.items,h)}:{kind:an.DocumentDiagnosticReportKind.unChanged,resultId:C.resultId},C=>this.client.handleFailedRequest(ze.DocumentDiagnosticRequest.type,h,C,{kind:an.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(t,r,i,s):s(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let s=async h=>h.kind===ze.DocumentDiagnosticReportKind.Full?{kind:an.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:await this.client.protocol2CodeConverter.asDiagnostics(h.items,r)}:{kind:an.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},o=h=>{let y=[];for(let C of h)y.push({uri:this.client.code2ProtocolConverter.asUri(C.uri),value:C.value});return y},a=(h,y)=>{let C=(0,FC.generateUuid)(),m=this.client.onProgress(ze.WorkspaceDiagnosticRequest.partialResult,C,async v=>{if(v==null){i(null);return}let q={items:[]};for(let E of v.items)try{q.items.push(await s(E))}catch(N){this.client.error("Converting workspace diagnostics failed.",N)}i(q)}),w={identifier:this.options.identifier,previousResultIds:o(h),partialResultToken:C};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(ze.WorkspaceDiagnosticRequest.type,w,y).then(async v=>{if(y.isCancellationRequested)return{items:[]};let q={items:[]};for(let E of v.items)q.items.push(await s(E));return m.dispose(),i(q),{items:[]}},v=>(m.dispose(),this.client.handleFailedRequest(ze.DocumentDiagnosticRequest.type,y,v,{items:[]})))},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,document:t.document});this.diagnostics.dispose()}},Uc=class{constructor(e){this.diagnosticRequestor=e,this.documents=new ze.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=xn.asKey(e);this.documents.has(t)||(this.documents.set(t,e,ze.Touch.Last),this.trigger())}remove(e){let t=xn.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,ze.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=xn.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,ze.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?xn.asKey(this.endDocument):void 0}},Wc=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],a=v=>{let q=r.documentSelector;if(i.match!==void 0)return i.match(q,v);for(let E of q)if(ze.TextDocumentFilter.is(E)){if(typeof E=="string"||E.language!==void 0&&E.language!=="*"||E.scheme!==void 0&&E.scheme!=="*"&&E.scheme!==v.scheme)return!1;if(E.pattern!==void 0){let N=new OC.Minimatch(E.pattern,{noext:!0});if(!N.makeRe()||!N.match(v.fsPath))return!1}}return!0},u=v=>v instanceof ge.Uri?a(v):ge.languages.match(s,v)>0&&t.isVisible(v),h=v=>v instanceof ge.Uri?this.activeTextDocument?.uri.toString()===v.toString():this.activeTextDocument===v;this.diagnosticRequestor=new Hc(e,t,r),this.backgroundScheduler=new Uc(this.diagnosticRequestor);let y=v=>{!u(v)||!r.interFileDependencies||h(v)||this.backgroundScheduler.add(v)};this.activeTextDocument=ge.window.activeTextEditor?.document,ge.window.onDidChangeActiveTextEditor(v=>{let q=this.activeTextDocument;this.activeTextDocument=v?.document,q!==void 0&&y(q),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let C=e.getFeature(ze.DidOpenTextDocumentNotification.method);o.push(C.onNotificationSent(v=>{let q=v.textDocument;this.diagnosticRequestor.knows(nt.document,q)||u(q)&&this.diagnosticRequestor.pull(q,()=>{y(q)})})),t.onOpen(v=>{for(let q of v){if(this.diagnosticRequestor.knows(nt.document,q))continue;let E=q.toString(),N;for(let L of ge.workspace.textDocuments)if(E===L.uri.toString()){N=L;break}N!==void 0&&u(N)?this.diagnosticRequestor.pull(N,()=>{y(N)}):u(q)&&this.diagnosticRequestor.pull(q,()=>{y(q)})}});let m=new Set;for(let v of ge.workspace.textDocuments)u(v)&&(this.diagnosticRequestor.pull(v,()=>{y(v)}),m.add(v.uri.toString()));if(i.onTabs===!0)for(let v of t.getTabResources())!m.has(v.toString())&&u(v)&&this.diagnosticRequestor.pull(v,()=>{y(v)});if(i.onChange===!0){let v=e.getFeature(ze.DidChangeTextDocumentNotification.method);o.push(v.onNotificationSent(async q=>{let E=q.textDocument;(i.filter===void 0||!i.filter(E,Ac.onType))&&this.diagnosticRequestor.knows(nt.document,E)&&this.diagnosticRequestor.pull(E,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let v=e.getFeature(ze.DidSaveTextDocumentNotification.method);o.push(v.onNotificationSent(q=>{let E=q.textDocument;(i.filter===void 0||!i.filter(E,Ac.onSave))&&this.diagnosticRequestor.knows(nt.document,E)&&this.diagnosticRequestor.pull(q.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let w=e.getFeature(ze.DidCloseTextDocumentNotification.method);o.push(w.onNotificationSent(v=>{this.cleanUpDocument(v.textDocument)})),t.onClose(v=>{for(let q of v)this.cleanUpDocument(q)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let v of ge.workspace.textDocuments)u(v)&&this.diagnosticRequestor.pull(v)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=ge.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(nt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Kc=class extends Lc.TextDocumentLanguageFeature{constructor(e){super(e,ze.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=ws(ws(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,ws(ws(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(ze.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(t,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new jc);let t=new Wc(this._client,this.tabs,e);return[t.disposable,t]}};yn.DiagnosticFeature=Kc});var oh=k(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.NotebookDocumentSyncFeature=void 0;var ht=require("vscode"),NC=Ss(),On=ne(),MC=$e(),ih=Wt();function sh(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var $r;(function(n){let e;(function(t){function r(m,w){return{version:m.version,uri:w.asUri(m.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(m,w,v){let q=On.NotebookDocument.create(v.asUri(m.uri),m.notebookType,m.version,s(w,v));return Object.keys(m.metadata).length>0&&(q.metadata=o(m.metadata)),q}t.asNotebookDocument=i;function s(m,w){return m.map(v=>a(v,w))}t.asNotebookCells=s;function o(m){return h(new Set,m)}t.asMetadata=o;function a(m,w){let v=On.NotebookCell.create(u(m.kind),w.asUri(m.document.uri));return Object.keys(m.metadata).length>0&&(v.metadata=o(m.metadata)),m.executionSummary!==void 0&&ih.number(m.executionSummary.executionOrder)&&ih.boolean(m.executionSummary.success)&&(v.executionSummary={executionOrder:m.executionSummary.executionOrder,success:m.executionSummary.success}),v}t.asNotebookCell=a;function u(m){switch(m){case ht.NotebookCellKind.Markup:return On.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return On.NotebookCellKind.Code}}function h(m,w){if(m.has(w))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(w)){let v=[];for(let q of w)if(q!==null&&typeof q=="object"||Array.isArray(q))v.push(h(m,q));else{if(q instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");v.push(q)}return v}else{let v=Object.keys(w),q=Object.create(null);for(let E of v){let N=w[E];if(N!==null&&typeof N=="object"||Array.isArray(N))q[E]=h(m,N);else{if(N instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");q[E]=N}}return q}}function y(m,w){let v=w.asChangeTextDocumentParams(m,m.document.uri,m.document.version);return{document:v.textDocument,changes:v.contentChanges}}t.asTextContentChange=y;function C(m,w){let v=Object.create(null);if(m.metadata&&(v.metadata=n.c2p.asMetadata(m.metadata)),m.cells!==void 0){let q=Object.create(null),E=m.cells;E.structure&&(q.structure={array:{start:E.structure.array.start,deleteCount:E.structure.array.deleteCount,cells:E.structure.array.cells!==void 0?E.structure.array.cells.map(N=>n.c2p.asNotebookCell(N,w)):void 0},didOpen:E.structure.didOpen!==void 0?E.structure.didOpen.map(N=>w.asOpenTextDocumentParams(N.document).textDocument):void 0,didClose:E.structure.didClose!==void 0?E.structure.didClose.map(N=>w.asCloseTextDocumentParams(N.document).textDocument):void 0}),E.data!==void 0&&(q.data=E.data.map(N=>n.c2p.asNotebookCell(N,w))),E.textContent!==void 0&&(q.textContent=E.textContent.map(N=>n.c2p.asTextContentChange(N,w))),Object.keys(q).length>0&&(v.cells=q)}return v}t.asNotebookDocumentChangeEvent=C})(e=n.c2p||(n.c2p={}))})($r||($r={}));var Vc;(function(n){function e(a,u,h){let y=a.length,C=u.length,m=0;for(;m<C&&m<y&&t(a[m],u[m],h);)m++;if(m<C&&m<y){let w=y-1,v=C-1;for(;w>=0&&v>=0&&t(a[w],u[v],h);)w--,v--;let q=w+1-m,E=m===v+1?void 0:u.slice(m,v+1);return E!==void 0?{start:m,deleteCount:q,cells:E}:{start:m,deleteCount:q}}else return m<C?{start:m,deleteCount:0,cells:u.slice(m)}:m<y?{start:m,deleteCount:y-m}:void 0}n.computeDiff=e;function t(a,u,h=!0){return a.kind!==u.kind||a.document.uri.toString()!==u.document.uri.toString()||a.document.languageId!==u.document.languageId||!r(a.executionSummary,u.executionSummary)?!1:!h||h&&s(a.metadata,u.metadata)}function r(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.executionOrder===u.executionOrder&&a.success===u.success&&i(a.timing,u.timing)}function i(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.startTime===u.startTime&&a.endTime===u.endTime}function s(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;let h=Array.isArray(a),y=Array.isArray(u);if(h!==y)return!1;if(h&&y){if(a.length!==u.length)return!1;for(let C=0;C<a.length;C++)if(!s(a[C],u[C]))return!1}if(o(a)&&o(u)){let C=Object.keys(a),m=Object.keys(u);if(C.length!==m.length||(C.sort(),m.sort(),!s(C,m)))return!1;for(let w=0;w<C.length;w++){let v=C[w];if(!s(a[v],u[v]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}n.isObjectLiteral=o})(Vc||(Vc={}));var Gc;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let s=new NC.Minimatch(t.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(Gc||(Gc={}));var Ts;(function(n){function e(r){let i=r.notebookSelector,s=[];for(let o of i){let a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",u=typeof o.notebook=="string"?void 0:o.notebook?.scheme,h=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let y of o.cells)s.push(t(a,u,h,y.language));else s.push(t(a,u,h,void 0))}return s}n.asDocumentSelector=e;function t(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})(Ts||(Ts={}));var Ps;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(Ps||(Ps={}));var Hr=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Ts.asDocumentSelector(t)),ht.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&ht.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of ht.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return ht.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(ht.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){ht.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(s,o)=>{let a=$r.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),u=o.map(h=>this.client.code2ProtocolConverter.asTextDocumentItem(h.document));try{await this.client.sendNotification(On.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:u})}catch(h){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",h),h}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Ps.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async s=>{try{await this.client.sendNotification(On.DidChangeNotebookDocumentNotification.type,{notebookDocument:$r.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:$r.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Ps.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(On.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(s,o)=>{try{await this.client.sendNotification(On.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};t?.metadata!==void 0&&(s.metadata=$r.c2p.asMetadata(t.metadata));let o;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];o=new Set(i.map(u=>u.document.uri.toString()));for(let u of t.cellChanges)o.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&a.push(u.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,u=i,h=Vc.computeDiff(a,u,!1),y,C;if(h!==void 0){y=h.cells===void 0?new Map:new Map(h.cells.map(v=>[v.document.uri.toString(),v])),C=h.deleteCount===0?new Map:new Map(a.slice(h.start,h.start+h.deleteCount).map(v=>[v.document.uri.toString(),v]));for(let v of Array.from(C.keys()))y.has(v)&&(C.delete(v),y.delete(v));s.cells=s.cells??{};let m=[],w=[];if(y.size>0||C.size>0){for(let v of y.values())m.push(v);for(let v of C.values())w.push(v)}s.cells.structure={array:h,didOpen:m,didClose:w}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Gc.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(s=>{let o=s.document.languageId;return r.some(a=>a.language==="*"||o===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},qs=class n{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=On.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Hr&&s.didOpenNotebookCellTextDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==n.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof Hr&&s.didChangeNotebookCellTextDocument(i,t)}),ht.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Hr&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=sh(sh(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Ts.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??MC.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new Hr(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==n.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&ht.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};Es.NotebookDocumentSyncFeature=qs;qs.CellScheme="vscode-notebook-cell"});var ch=k(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.SyncConfigurationFeature=er.toJSONObject=er.ConfigurationFeature=void 0;var Ur=require("vscode"),Si=ne(),LC=Wt(),AC=$e(),ah=me(),Bc=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Si.ConfigurationRequest.type,(t,r)=>{let i=o=>{let a=[];for(let u of o.items){let h=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;a.push(this.getConfiguration(h,u.section!==null?u.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=pr(Ur.workspace.getConfiguration(void 0,e).get(t));else{let s=Ur.workspace.getConfiguration(t.substr(0,i),e);s&&(r=pr(s.get(t.substr(i+1))))}}else{let i=Ur.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=pr(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};er.ConfigurationFeature=Bc;function pr(n){if(n){if(Array.isArray(n))return n.map(pr);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=pr(n[t]));return e}}return n}er.toJSONObject=pr;var Xc=class{constructor(e){this._client=e,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Si.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,ah.ensure)((0,ah.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:AC.generateUuid(),registerOptions:{section:e}})}register(e){let t=Ur.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(e,t){if(this.isDisposed)return;let r;if(LC.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(a=>t.affectsConfiguration(a)))return;let i=async o=>o===void 0?this._client.sendNotification(Si.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Si.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,i):i(r)).catch(o=>{this._client.error(`Sending notification ${Si.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function t(s,o){let a=s;for(let u=0;u<o.length-1;u++){let h=a[o[u]];h||(h=Object.create(null),a[o[u]]=h),a=h}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),u=null;if(a>=0?u=Ur.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):u=Ur.workspace.getConfiguration(void 0,r).get(o),u){let h=e[s].split(".");t(i,h)[h[h.length-1]]=pr(u)}}return i}};er.SyncConfigurationFeature=Xc});var uh=k(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.DidSaveTextDocumentFeature=It.WillSaveWaitUntilFeature=It.WillSaveFeature=It.DidChangeTextDocumentFeature=It.DidCloseTextDocumentFeature=It.DidOpenTextDocumentFeature=void 0;var jt=require("vscode"),ke=ne(),He=me(),Wr=$e(),Qc=class extends He.TextDocumentEventFeature{constructor(e,t){super(e,jt.workspace.onDidOpenTextDocument,ke.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,He.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,He.ensure)((0,He.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Wr.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return ke.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);jt.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&jt.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};It.DidOpenTextDocumentFeature=Qc;var Jc=class extends He.TextDocumentEventFeature{constructor(e,t,r){super(e,jt.workspace.onDidCloseTextDocument,ke.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,He.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return ke.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,He.ensure)((0,He.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Wr.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(jt.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};It.DidCloseTextDocumentFeature=Jc;var Yc=class extends He.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new jt.EventEmitter,this._onPendingChangeAdded=new jt.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=ke.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return ke.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,He.ensure)((0,He.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==ke.TextDocumentSyncKind.None&&this.register({id:Wr.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=jt.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let s of this._changeData.values())if(jt.languages.match(s.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let o=this._client.middleware;if(s.syncKind===ke.TextDocumentSyncKind.Incremental){let a=async u=>{let h=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u,t,r);await this._client.sendNotification(ke.DidChangeTextDocumentNotification.type,h),this.notificationSent(u.document,ke.DidChangeTextDocumentNotification.type,h)};i.push(o.didChange?o.didChange(e,u=>a(u)):a(e))}else if(s.syncKind===ke.TextDocumentSyncKind.Full){let a=async u=>{let h=u.document.uri.toString();this._pendingTextDocumentChanges.set(h,u.document),this._onPendingChangeAdded.fire()};i.push(o.didChange?o.didChange(e,u=>a(u)):a(e))}}return Promise.all(i).then(void 0,s=>{throw this._client.error(`Sending document notification ${ke.DidChangeTextDocumentNotification.type.method} failed`,s),s})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=ke.TextDocumentSyncKind.None;else{this._syncKind=ke.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===ke.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=ke.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(jt.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==ke.TextDocumentSyncKind.Full)switch(e){case ke.TextDocumentSyncKind.Full:this._syncKind=e;break;case ke.TextDocumentSyncKind.Incremental:this._syncKind===ke.TextDocumentSyncKind.None&&(this._syncKind=ke.TextDocumentSyncKind.Incremental);break}}};It.DidChangeTextDocumentFeature=Yc;var Zc=class extends He.TextDocumentEventFeature{constructor(e){super(e,jt.workspace.onWillSaveTextDocument,ke.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>He.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return ke.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,He.ensure)((0,He.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:Wr.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};It.WillSaveFeature=Zc;var eu=class extends He.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return ke.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,He.ensure)((0,He.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:Wr.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=jt.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(He.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(ke.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};It.WillSaveWaitUntilFeature=eu;var tu=class extends He.TextDocumentEventFeature{constructor(e){super(e,jt.workspace.onDidSaveTextDocument,ke.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,He.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return ke.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,He.ensure)((0,He.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Wr.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};It.DidSaveTextDocumentFeature=tu});var lh=k(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.CompletionItemFeature=void 0;var jC=require("vscode"),fe=ne(),nu=me(),$C=$e(),HC=[fe.CompletionItemKind.Text,fe.CompletionItemKind.Method,fe.CompletionItemKind.Function,fe.CompletionItemKind.Constructor,fe.CompletionItemKind.Field,fe.CompletionItemKind.Variable,fe.CompletionItemKind.Class,fe.CompletionItemKind.Interface,fe.CompletionItemKind.Module,fe.CompletionItemKind.Property,fe.CompletionItemKind.Unit,fe.CompletionItemKind.Value,fe.CompletionItemKind.Enum,fe.CompletionItemKind.Keyword,fe.CompletionItemKind.Snippet,fe.CompletionItemKind.Color,fe.CompletionItemKind.File,fe.CompletionItemKind.Reference,fe.CompletionItemKind.Folder,fe.CompletionItemKind.EnumMember,fe.CompletionItemKind.Constant,fe.CompletionItemKind.Struct,fe.CompletionItemKind.Event,fe.CompletionItemKind.Operator,fe.CompletionItemKind.TypeParameter],ru=class extends nu.TextDocumentLanguageFeature{constructor(e){super(e,fe.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,nu.ensure)((0,nu.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[fe.MarkupKind.Markdown,fe.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[fe.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[fe.InsertTextMode.asIs,fe.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=fe.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:HC},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);r&&this.register({id:$C.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,u,h,y)=>{let C=this._client,m=this._client.middleware,w=(v,q,E,N)=>C.sendRequest(fe.CompletionRequest.type,C.code2ProtocolConverter.asCompletionParams(v,q,E),N).then(L=>N.isCancellationRequested?null:C.protocol2CodeConverter.asCompletionResult(L,i,N),L=>C.handleFailedRequest(fe.CompletionRequest.type,N,L,null));return m.provideCompletionItem?m.provideCompletionItem(a,u,y,h,w):w(a,u,y,h)},resolveCompletionItem:e.resolveProvider?(a,u)=>{let h=this._client,y=this._client.middleware,C=(m,w)=>h.sendRequest(fe.CompletionResolveRequest.type,h.code2ProtocolConverter.asCompletionItem(m,!!this.labelDetailsSupport.get(t)),w).then(v=>w.isCancellationRequested?null:h.protocol2CodeConverter.asCompletionItem(v),v=>h.handleFailedRequest(fe.CompletionResolveRequest.type,w,v,m));return y.resolveCompletionItem?y.resolveCompletionItem(a,u,C):C(a,u)}:void 0};return[jC.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};ks.CompletionItemFeature=ru});var dh=k(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.HoverFeature=void 0;var UC=require("vscode"),wi=ne(),iu=me(),WC=$e(),su=class extends iu.TextDocumentLanguageFeature{constructor(e){super(e,wi.HoverRequest.type)}fillClientCapabilities(e){let t=(0,iu.ensure)((0,iu.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[wi.MarkupKind.Markdown,wi.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);r&&this.register({id:WC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(wi.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asHover(w),w=>a.handleFailedRequest(wi.HoverRequest.type,m,w,null)),h=a.middleware;return h.provideHover?h.provideHover(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return UC.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Is.HoverFeature=su});var fh=k(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.DefinitionFeature=void 0;var KC=require("vscode"),ou=ne(),au=me(),zC=$e(),cu=class extends au.TextDocumentLanguageFeature{constructor(e){super(e,ou.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,au.ensure)((0,au.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);r&&this.register({id:zC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(ou.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(w,m),w=>a.handleFailedRequest(ou.DefinitionRequest.type,m,w,null)),h=a.middleware;return h.provideDefinition?h.provideDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return KC.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};xs.DefinitionFeature=cu});var gh=k(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.SignatureHelpFeature=void 0;var hh=require("vscode"),Ti=ne(),uu=me(),VC=$e(),lu=class extends uu.TextDocumentLanguageFeature{constructor(e){super(e,Ti.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,uu.ensure)((0,uu.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Ti.MarkupKind.Markdown,Ti.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);r&&this.register({id:VC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,s,o)=>{let a=this._client,u=(y,C,m,w)=>a.sendRequest(Ti.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(y,C,m),w).then(v=>w.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(v,w),v=>a.handleFailedRequest(Ti.SignatureHelpRequest.type,w,v,null)),h=a.middleware;return h.provideSignatureHelp?h.provideSignatureHelp(r,i,o,s,u):u(r,i,o,s)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return hh.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return hh.languages.registerSignatureHelpProvider(r,t,i)}}};Os.SignatureHelpFeature=lu});var ph=k(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.DocumentHighlightFeature=void 0;var GC=require("vscode"),du=ne(),fu=me(),BC=$e(),hu=class extends fu.TextDocumentLanguageFeature{constructor(e){super(e,du.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,fu.ensure)((0,fu.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);r&&this.register({id:BC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(du.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(w,m),w=>a.handleFailedRequest(du.DocumentHighlightRequest.type,m,w,null)),h=a.middleware;return h.provideDocumentHighlights?h.provideDocumentHighlights(i,s,o,u):u(i,s,o)}};return[GC.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Fs.DocumentHighlightFeature=hu});var mu=k(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.DocumentSymbolFeature=vn.SupportedSymbolTags=vn.SupportedSymbolKinds=void 0;var XC=require("vscode"),be=ne(),gu=me(),QC=$e();vn.SupportedSymbolKinds=[be.SymbolKind.File,be.SymbolKind.Module,be.SymbolKind.Namespace,be.SymbolKind.Package,be.SymbolKind.Class,be.SymbolKind.Method,be.SymbolKind.Property,be.SymbolKind.Field,be.SymbolKind.Constructor,be.SymbolKind.Enum,be.SymbolKind.Interface,be.SymbolKind.Function,be.SymbolKind.Variable,be.SymbolKind.Constant,be.SymbolKind.String,be.SymbolKind.Number,be.SymbolKind.Boolean,be.SymbolKind.Array,be.SymbolKind.Object,be.SymbolKind.Key,be.SymbolKind.Null,be.SymbolKind.EnumMember,be.SymbolKind.Struct,be.SymbolKind.Event,be.SymbolKind.Operator,be.SymbolKind.TypeParameter];vn.SupportedSymbolTags=[be.SymbolTag.Deprecated];var pu=class extends gu.TextDocumentLanguageFeature{constructor(e){super(e,be.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,gu.ensure)((0,gu.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:vn.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:vn.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);r&&this.register({id:QC.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let a=this._client,u=async(y,C)=>{try{let m=await a.sendRequest(be.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(y),C);if(C.isCancellationRequested||m===void 0||m===null)return null;if(m.length===0)return[];{let w=m[0];return be.DocumentSymbol.is(w)?await a.protocol2CodeConverter.asDocumentSymbols(m,C):await a.protocol2CodeConverter.asSymbolInformations(m,C)}}catch(m){return a.handleFailedRequest(be.DocumentSymbolRequest.type,C,m,null)}},h=a.middleware;return h.provideDocumentSymbols?h.provideDocumentSymbols(s,o,u):u(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[XC.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};vn.DocumentSymbolFeature=pu});var yh=k(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.WorkspaceSymbolFeature=void 0;var JC=require("vscode"),Pi=ne(),yu=me(),mh=mu(),YC=$e(),vu=class extends yu.WorkspaceFeature{constructor(e){super(e,Pi.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,yu.ensure)((0,yu.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:mh.SupportedSymbolKinds},t.tagSupport={valueSet:mh.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:YC.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(u,h)=>s.sendRequest(Pi.WorkspaceSymbolRequest.type,{query:u},h).then(y=>h.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(y,h),y=>s.handleFailedRequest(Pi.WorkspaceSymbolRequest.type,h,y,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(u,h)=>s.sendRequest(Pi.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(u),h).then(y=>h.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(y),y=>s.handleFailedRequest(Pi.WorkspaceSymbolResolveRequest.type,h,y,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[JC.languages.registerWorkspaceSymbolProvider(t),t]}};Ns.WorkspaceSymbolFeature=vu});var vh=k(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.ReferencesFeature=void 0;var ZC=require("vscode"),Cu=ne(),Du=me(),eD=$e(),_u=class extends Du.TextDocumentLanguageFeature{constructor(e){super(e,Cu.ReferencesRequest.type)}fillClientCapabilities(e){(0,Du.ensure)((0,Du.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);r&&this.register({id:eD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,s,o,a)=>{let u=this._client,h=(C,m,w,v)=>u.sendRequest(Cu.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(C,m,w),v).then(q=>v.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(q,v),q=>u.handleFailedRequest(Cu.ReferencesRequest.type,v,q,null)),y=u.middleware;return y.provideReferences?y.provideReferences(i,s,o,a,h):h(i,s,o,a)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return ZC.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Ms.ReferencesFeature=_u});var Ch=k(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.CodeActionFeature=void 0;var tD=require("vscode"),$t=ne(),nD=$e(),bu=me(),Ru=class extends bu.TextDocumentLanguageFeature{constructor(e){super(e,$t.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,bu.ensure)((0,bu.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[$t.CodeActionKind.Empty,$t.CodeActionKind.QuickFix,$t.CodeActionKind.Refactor,$t.CodeActionKind.RefactorExtract,$t.CodeActionKind.RefactorInline,$t.CodeActionKind.RefactorRewrite,$t.CodeActionKind.Source,$t.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);r&&this.register({id:nD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,s,o,a)=>{let u=this._client,h=async(C,m,w,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),range:u.code2ProtocolConverter.asRange(m),context:await u.code2ProtocolConverter.asCodeActionContext(w,v)};return u.sendRequest($t.CodeActionRequest.type,q,v).then(E=>v.isCancellationRequested||E===null||E===void 0?null:u.protocol2CodeConverter.asCodeActionResult(E,v),E=>u.handleFailedRequest($t.CodeActionRequest.type,v,E,null))},y=u.middleware;return y.provideCodeActions?y.provideCodeActions(i,s,o,a,h):h(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,u=async(h,y)=>o.sendRequest($t.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(h,y),y).then(C=>y.isCancellationRequested?h:o.protocol2CodeConverter.asCodeAction(C,y),C=>o.handleFailedRequest($t.CodeActionResolveRequest.type,y,C,h));return a.resolveCodeAction?a.resolveCodeAction(i,s,u):u(i,s)}:void 0};return[tD.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};Ls.CodeActionFeature=Ru});var _h=k(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.CodeLensFeature=void 0;var Dh=require("vscode"),Kr=ne(),rD=$e(),qi=me(),Su=class extends qi.TextDocumentLanguageFeature{constructor(e){super(e,Kr.CodeLensRequest.type)}fillClientCapabilities(e){(0,qi.ensure)((0,qi.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,qi.ensure)((0,qi.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Kr.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);i&&this.register({id:rD.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Dh.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let a=this._client,u=(y,C)=>a.sendRequest(Kr.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(y),C).then(m=>C.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(m,C),m=>a.handleFailedRequest(Kr.CodeLensRequest.type,C,m,null)),h=a.middleware;return h.provideCodeLenses?h.provideCodeLenses(s,o,u):u(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,u=(y,C)=>a.sendRequest(Kr.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(y),C).then(m=>C.isCancellationRequested?y:a.protocol2CodeConverter.asCodeLens(m),m=>a.handleFailedRequest(Kr.CodeLensResolveRequest.type,C,m,y)),h=a.middleware;return h.resolveCodeLens?h.resolveCodeLens(s,o,u):u(s,o)}:void 0};return[Dh.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};As.CodeLensFeature=Su});var bh=k(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.DocumentOnTypeFormattingFeature=tr.DocumentRangeFormattingFeature=tr.DocumentFormattingFeature=void 0;var js=require("vscode"),Fn=ne(),qu=$e(),Nn=me(),Ei;(function(n){function e(t){let r=js.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(Ei||(Ei={}));var wu=class extends Nn.TextDocumentLanguageFeature{constructor(e){super(e,Fn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Nn.ensure)((0,Nn.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);r&&this.register({id:qu.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,u=(y,C,m)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y),options:a.code2ProtocolConverter.asFormattingOptions(C,Ei.fromConfiguration(y))};return a.sendRequest(Fn.DocumentFormattingRequest.type,w,m).then(v=>m.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(v,m),v=>a.handleFailedRequest(Fn.DocumentFormattingRequest.type,m,v,null))},h=a.middleware;return h.provideDocumentFormattingEdits?h.provideDocumentFormattingEdits(i,s,o,u):u(i,s,o)}};return[js.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};tr.DocumentFormattingFeature=wu;var Tu=class extends Nn.TextDocumentLanguageFeature{constructor(e){super(e,Fn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,Nn.ensure)((0,Nn.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);r&&this.register({id:qu.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let u=this._client,h=(C,m,w,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),range:u.code2ProtocolConverter.asRange(m),options:u.code2ProtocolConverter.asFormattingOptions(w,Ei.fromConfiguration(C))};return u.sendRequest(Fn.DocumentRangeFormattingRequest.type,q,v).then(E=>v.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(E,v),E=>u.handleFailedRequest(Fn.DocumentRangeFormattingRequest.type,v,E,null))},y=u.middleware;return y.provideDocumentRangeFormattingEdits?y.provideDocumentRangeFormattingEdits(i,s,o,a,h):h(i,s,o,a)}};return[js.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};tr.DocumentRangeFormattingFeature=Tu;var Pu=class extends Nn.TextDocumentLanguageFeature{constructor(e){super(e,Fn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Nn.ensure)((0,Nn.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);r&&this.register({id:qu.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,a,u,h)=>{let y=this._client,C=(w,v,q,E,N)=>{let L={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(w),position:y.code2ProtocolConverter.asPosition(v),ch:q,options:y.code2ProtocolConverter.asFormattingOptions(E,Ei.fromConfiguration(w))};return y.sendRequest(Fn.DocumentOnTypeFormattingRequest.type,L,N).then(M=>N.isCancellationRequested?null:y.protocol2CodeConverter.asTextEdits(M,N),M=>y.handleFailedRequest(Fn.DocumentOnTypeFormattingRequest.type,N,M,null))},m=y.middleware;return m.provideOnTypeFormattingEdits?m.provideOnTypeFormattingEdits(s,o,a,u,h,C):C(s,o,a,u,h)}},i=e.moreTriggerCharacter||[];return[js.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};tr.DocumentOnTypeFormattingFeature=Pu});var Sh=k($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.RenameFeature=void 0;var iD=require("vscode"),mr=ne(),sD=$e(),Rh=Wt(),Eu=me(),ku=class extends Eu.TextDocumentLanguageFeature{constructor(e){super(e,mr.RenameRequest.type)}fillClientCapabilities(e){let t=(0,Eu.ensure)((0,Eu.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=mr.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);r&&(Rh.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:sD.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,s,o,a)=>{let u=this._client,h=(C,m,w,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),position:u.code2ProtocolConverter.asPosition(m),newName:w};return u.sendRequest(mr.RenameRequest.type,q,v).then(E=>v.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(E,v),E=>u.handleFailedRequest(mr.RenameRequest.type,v,E,null,!1))},y=u.middleware;return y.provideRenameEdits?y.provideRenameEdits(i,s,o,a,h):h(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,u=(y,C,m)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y),position:a.code2ProtocolConverter.asPosition(C)};return a.sendRequest(mr.PrepareRenameRequest.type,w,m).then(v=>m.isCancellationRequested?null:mr.Range.is(v)?a.protocol2CodeConverter.asRange(v):this.isDefaultBehavior(v)?v.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):v&&mr.Range.is(v.range)?{range:a.protocol2CodeConverter.asRange(v.range),placeholder:v.placeholder}:Promise.reject(new Error("The element can't be renamed.")),v=>{throw typeof v.message=="string"?new Error(v.message):new Error("The element can't be renamed.")})},h=a.middleware;return h.prepareRename?h.prepareRename(i,s,o,u):u(i,s,o)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return iD.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&Rh.boolean(t.defaultBehavior)}};$s.RenameFeature=ku});var wh=k(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.DocumentLinkFeature=void 0;var oD=require("vscode"),ki=ne(),Iu=me(),aD=$e(),xu=class extends Iu.TextDocumentLanguageFeature{constructor(e){super(e,ki.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,Iu.ensure)((0,Iu.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);r&&this.register({id:aD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,a=(h,y)=>o.sendRequest(ki.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(h),y).then(C=>y.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(C,y),C=>o.handleFailedRequest(ki.DocumentLinkRequest.type,y,C,null)),u=o.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(h,y)=>o.sendRequest(ki.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(h),y).then(C=>y.isCancellationRequested?h:o.protocol2CodeConverter.asDocumentLink(C),C=>o.handleFailedRequest(ki.DocumentLinkResolveRequest.type,y,C,h)),u=o.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[oD.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Hs.DocumentLinkFeature=xu});var Ph=k(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.ExecuteCommandFeature=void 0;var cD=require("vscode"),Ou=ne(),uD=$e(),Th=me(),Fu=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Ou.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,Th.ensure)((0,Th.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:uD.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(s,o)=>{let a={command:s,arguments:o};return t.sendRequest(Ou.ExecuteCommandRequest.type,a).then(void 0,u=>t.handleFailedRequest(Ou.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(cD.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};Us.ExecuteCommandFeature=Fu});var qh=k(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.FileSystemWatcherFeature=void 0;var lD=require("vscode"),yr=ne(),Ws=me(),Nu=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return yr.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Ws.ensure)((0,Ws.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Ws.ensure)((0,Ws.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&yr.WatchKind.Create)!==0,o=(r.kind&yr.WatchKind.Change)!==0,a=(r.kind&yr.WatchKind.Delete)!==0);let u=lD.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(u,s,o,a,t),t.push(u)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,s){t&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:yr.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:yr.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:yr.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};Ks.FileSystemWatcherFeature=Nu});var Eh=k(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.ColorProviderFeature=void 0;var dD=require("vscode"),Ii=ne(),Mu=me(),Lu=class extends Mu.TextDocumentLanguageFeature{constructor(e){super(e,Ii.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Mu.ensure)((0,Mu.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let a=this._client,u=(y,C,m)=>{let w={color:y,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(C.document),range:a.code2ProtocolConverter.asRange(C.range)};return a.sendRequest(Ii.ColorPresentationRequest.type,w,m).then(v=>m.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(v,m),v=>a.handleFailedRequest(Ii.ColorPresentationRequest.type,m,v,null))},h=a.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,s,o,u):u(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(h,y)=>{let C={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h)};return o.sendRequest(Ii.DocumentColorRequest.type,C,y).then(m=>y.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(m,y),m=>o.handleFailedRequest(Ii.DocumentColorRequest.type,y,m,null))},u=o.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,s,a):a(i,s)}};return[dD.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};zs.ColorProviderFeature=Lu});var kh=k(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ImplementationFeature=void 0;var fD=require("vscode"),Au=ne(),ju=me(),$u=class extends ju.TextDocumentLanguageFeature{constructor(e){super(e,Au.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,ju.ensure)((0,ju.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(Au.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(w,m),w=>a.handleFailedRequest(Au.ImplementationRequest.type,m,w,null)),h=a.middleware;return h.provideImplementation?h.provideImplementation(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return fD.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Vs.ImplementationFeature=$u});var Ih=k(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.TypeDefinitionFeature=void 0;var hD=require("vscode"),Hu=ne(),xi=me(),Uu=class extends xi.TextDocumentLanguageFeature{constructor(e){super(e,Hu.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,xi.ensure)((0,xi.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,xi.ensure)((0,xi.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(Hu.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(w,m),w=>a.handleFailedRequest(Hu.TypeDefinitionRequest.type,m,w,null)),h=a.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return hD.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Gs.TypeDefinitionFeature=Uu});var xh=k(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.WorkspaceFoldersFeature=zr.arrayDiff=void 0;var gD=$e(),Bs=require("vscode"),Oi=ne();function Wu(n,e){if(n!=null)return n[e]}function Ku(n,e){return n.filter(t=>e.indexOf(t)<0)}zr.arrayDiff=Ku;var zu=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Oi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Bs.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Oi.WorkspaceFoldersRequest.type,s=>{let o=()=>{let u=Bs.workspace.workspaceFolders;return u===void 0?null:u.map(y=>this.asProtocol(y))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=Wu(Wu(Wu(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=gD.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=Ku(this._initialFolders,e),i=Ku(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${Oi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Oi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=Bs.workspace.onDidChangeWorkspaceFolders(s=>{let o=h=>this.doSendEvent(h.added,h.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(h=>{this._client.error(`Sending notification ${Oi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(Bs.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};zr.WorkspaceFoldersFeature=zu});var Oh=k(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.FoldingRangeFeature=void 0;var pD=require("vscode"),Vr=ne(),Vu=me(),Gu=class extends Vu.TextDocumentLanguageFeature{constructor(e){super(e,Vr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Vu.ensure)((0,Vu.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[Vr.FoldingRangeKind.Comment,Vr.FoldingRangeKind.Imports,Vr.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,s,o)=>{let a=this._client,u=(y,C,m)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y)};return a.sendRequest(Vr.FoldingRangeRequest.type,w,m).then(v=>m.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(v,m),v=>a.handleFailedRequest(Vr.FoldingRangeRequest.type,m,v,null))},h=a.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,s,o,u):u(i,s,o)}};return[pD.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Xs.FoldingRangeFeature=Gu});var Fh=k(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.DeclarationFeature=void 0;var mD=require("vscode"),Bu=ne(),Xu=me(),Qu=class extends Xu.TextDocumentLanguageFeature{constructor(e){super(e,Bu.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,Xu.ensure)((0,Xu.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(Bu.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(w,m),w=>a.handleFailedRequest(Bu.DeclarationRequest.type,m,w,null)),h=a.middleware;return h.provideDeclaration?h.provideDeclaration(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return mD.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Qs.DeclarationFeature=Qu});var Nh=k(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.SelectionRangeFeature=void 0;var yD=require("vscode"),Ju=ne(),Yu=me(),Zu=class extends Yu.TextDocumentLanguageFeature{constructor(e){super(e,Ju.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,Yu.ensure)((0,Yu.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let a=this._client,u=async(y,C,m)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y),positions:await a.code2ProtocolConverter.asPositions(C,m)};return a.sendRequest(Ju.SelectionRangeRequest.type,w,m).then(v=>m.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(v,m),v=>a.handleFailedRequest(Ju.SelectionRangeRequest.type,m,v,null))},h=a.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return yD.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Js.SelectionRangeFeature=Zu});var Lh=k(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.ProgressFeature=void 0;var Mh=ne(),vD=Sc();function CD(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var el=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Mh.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){CD(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new vD.ProgressPart(this._client,i.token,t))};e.onRequest(Mh.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Ys.ProgressFeature=el});var Ah=k(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.CallHierarchyFeature=void 0;var DD=require("vscode"),vr=ne(),tl=me(),nl=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,s=this.middleware,o=(a,u,h)=>{let y=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(vr.CallHierarchyPrepareRequest.type,y,h).then(C=>h.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(C,h),C=>i.handleFailedRequest(vr.CallHierarchyPrepareRequest.type,h,C,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,r,o):o(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(vr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h,a),h=>r.handleFailedRequest(vr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(vr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h,a),h=>r.handleFailedRequest(vr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},rl=class extends tl.TextDocumentLanguageFeature{constructor(e){super(e,vr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,tl.ensure)((0,tl.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new nl(t);return[DD.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Zs.CallHierarchyFeature=rl});var jh=k(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.SemanticTokensFeature=void 0;var eo=require("vscode"),re=ne(),Fi=me(),_D=Wt(),il=class extends Fi.TextDocumentLanguageFeature{constructor(e){super(e,re.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,Fi.ensure)((0,Fi.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[re.SemanticTokenTypes.namespace,re.SemanticTokenTypes.type,re.SemanticTokenTypes.class,re.SemanticTokenTypes.enum,re.SemanticTokenTypes.interface,re.SemanticTokenTypes.struct,re.SemanticTokenTypes.typeParameter,re.SemanticTokenTypes.parameter,re.SemanticTokenTypes.variable,re.SemanticTokenTypes.property,re.SemanticTokenTypes.enumMember,re.SemanticTokenTypes.event,re.SemanticTokenTypes.function,re.SemanticTokenTypes.method,re.SemanticTokenTypes.macro,re.SemanticTokenTypes.keyword,re.SemanticTokenTypes.modifier,re.SemanticTokenTypes.comment,re.SemanticTokenTypes.string,re.SemanticTokenTypes.number,re.SemanticTokenTypes.regexp,re.SemanticTokenTypes.operator,re.SemanticTokenTypes.decorator],t.tokenModifiers=[re.SemanticTokenModifiers.declaration,re.SemanticTokenModifiers.definition,re.SemanticTokenModifiers.readonly,re.SemanticTokenModifiers.static,re.SemanticTokenModifiers.deprecated,re.SemanticTokenModifiers.abstract,re.SemanticTokenModifiers.async,re.SemanticTokenModifiers.modification,re.SemanticTokenModifiers.documentation,re.SemanticTokenModifiers.defaultLibrary],t.formats=[re.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Fi.ensure)((0,Fi.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(re.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=e.documentSelector,r=_D.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new eo.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(w,v)=>{let q=this._client,E=q.middleware,N=(L,M)=>{let H={textDocument:q.code2ProtocolConverter.asTextDocumentIdentifier(L)};return q.sendRequest(re.SemanticTokensRequest.type,H,M).then(B=>M.isCancellationRequested?null:q.protocol2CodeConverter.asSemanticTokens(B,M),B=>q.handleFailedRequest(re.SemanticTokensRequest.type,M,B,null))};return E.provideDocumentSemanticTokens?E.provideDocumentSemanticTokens(w,v,N):N(w,v)},provideDocumentSemanticTokensEdits:i?(w,v,q)=>{let E=this._client,N=E.middleware,L=(M,H,B)=>{let ue={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(M),previousResultId:H};return E.sendRequest(re.SemanticTokensDeltaRequest.type,ue,B).then(async z=>B.isCancellationRequested?null:re.SemanticTokens.is(z)?await E.protocol2CodeConverter.asSemanticTokens(z,B):await E.protocol2CodeConverter.asSemanticTokensEdits(z,B),z=>E.handleFailedRequest(re.SemanticTokensDeltaRequest.type,B,z,null))};return N.provideDocumentSemanticTokensEdits?N.provideDocumentSemanticTokensEdits(w,v,q,L):L(w,v,q)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(w,v,q)=>{let E=this._client,N=E.middleware,L=(M,H,B)=>{let ue={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(M),range:E.code2ProtocolConverter.asRange(H)};return E.sendRequest(re.SemanticTokensRangeRequest.type,ue,B).then(z=>B.isCancellationRequested?null:E.protocol2CodeConverter.asSemanticTokens(z,B),z=>E.handleFailedRequest(re.SemanticTokensRangeRequest.type,B,z,null))};return N.provideDocumentRangeSemanticTokens?N.provideDocumentRangeSemanticTokens(w,v,q,L):L(w,v,q)}}:void 0,h=[],y=this._client,C=y.protocol2CodeConverter.asSemanticTokensLegend(e.legend),m=y.protocol2CodeConverter.asDocumentSelector(t);return o!==void 0&&h.push(eo.languages.registerDocumentSemanticTokensProvider(m,o,C)),u!==void 0&&h.push(eo.languages.registerDocumentRangeSemanticTokensProvider(m,u,C)),[new eo.Disposable(()=>h.forEach(w=>w.dispose())),{range:u,full:o,onDidChangeSemanticTokensEmitter:s}]}};to.SemanticTokensFeature=il});var Uh=k(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.WillDeleteFilesFeature=xt.WillRenameFilesFeature=xt.WillCreateFilesFeature=xt.DidDeleteFilesFeature=xt.DidRenameFilesFeature=xt.DidCreateFilesFeature=void 0;var Gt=require("vscode"),bD=Ss(),Mn=ne(),RD=$e();function $h(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function SD(n,e){return n[e]}function Hh(n,e,t){n[e]=t}var Ni=class n{constructor(e,t,r,i,s){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=$h($h(e,"workspace"),"fileOperations");Hh(t,"dynamicRegistration",!0),Hh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?SD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:RD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new bD.Minimatch(r.pattern.glob,n.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return n.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async s=>{let o=t(s),a=o.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&&h.scheme!==o.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let y=await this.getFileType(o);if(y===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(y===Gt.FileType.File&&h.kind===Mn.FileOperationPatternKind.file||y===Gt.FileType.Directory&&h.kind===Mn.FileOperationPatternKind.folder)return!0}else if(h.kind===Mn.FileOperationPatternKind.folder&&await n.getFileType(o)===Gt.FileType.Directory&&h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await Gt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},no=class extends Ni{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},ro=class extends no{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await Ni.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},sl=class extends no{constructor(e){super(e,Gt.workspace.onDidCreateFiles,Mn.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};xt.DidCreateFilesFeature=sl;var ol=class extends ro{constructor(e){super(e,Gt.workspace.onDidRenameFiles,Mn.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Gt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};xt.DidRenameFilesFeature=ol;var al=class extends ro{constructor(e){super(e,Gt.workspace.onDidDeleteFiles,Mn.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Gt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};xt.DidDeleteFilesFeature=al;var Mi=class extends Ni{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},cl=class extends Mi{constructor(e){super(e,Gt.workspace.onWillCreateFiles,Mn.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};xt.WillCreateFilesFeature=cl;var ul=class extends Mi{constructor(e){super(e,Gt.workspace.onWillRenameFiles,Mn.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};xt.WillRenameFilesFeature=ul;var ll=class extends Mi{constructor(e){super(e,Gt.workspace.onWillDeleteFiles,Mn.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};xt.WillDeleteFilesFeature=ll});var Wh=k(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.LinkedEditingFeature=void 0;var wD=require("vscode"),dl=ne(),fl=me(),hl=class extends fl.TextDocumentLanguageFeature{constructor(e){super(e,dl.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,fl.ensure)((0,fl.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,u=(y,C,m)=>a.sendRequest(dl.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,C),m).then(w=>m.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(w,m),w=>a.handleFailedRequest(dl.LinkedEditingRangeRequest.type,m,w,null)),h=a.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return wD.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};io.LinkedEditingFeature=hl});var Kh=k(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.TypeHierarchyFeature=void 0;var TD=require("vscode"),Cr=ne(),gl=me(),pl=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,s=this.middleware,o=(a,u,h)=>{let y=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(Cr.TypeHierarchyPrepareRequest.type,y,h).then(C=>h.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(C,h),C=>i.handleFailedRequest(Cr.TypeHierarchyPrepareRequest.type,h,C,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,t,r,o):o(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(Cr.TypeHierarchySupertypesRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(h,a),h=>r.handleFailedRequest(Cr.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,s):s(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(Cr.TypeHierarchySubtypesRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(h,a),h=>r.handleFailedRequest(Cr.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,s):s(e,t)}},ml=class extends gl.TextDocumentLanguageFeature{constructor(e){super(e,Cr.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,gl.ensure)((0,gl.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pl(t);return[TD.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};so.TypeHierarchyFeature=ml});var Vh=k(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.InlineValueFeature=void 0;var zh=require("vscode"),oo=ne(),Li=me(),yl=class extends Li.TextDocumentLanguageFeature{constructor(e){super(e,oo.InlineValueRequest.type)}fillClientCapabilities(e){(0,Li.ensure)((0,Li.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Li.ensure)((0,Li.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(oo.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new zh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,a,u)=>{let h=this._client,y=(m,w,v,q)=>{let E={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(m),range:h.code2ProtocolConverter.asRange(w),context:h.code2ProtocolConverter.asInlineValueContext(v)};return h.sendRequest(oo.InlineValueRequest.type,E,q).then(N=>q.isCancellationRequested?null:h.protocol2CodeConverter.asInlineValues(N,q),N=>h.handleFailedRequest(oo.InlineValueRequest.type,q,N,null))},C=h.middleware;return C.provideInlineValues?C.provideInlineValues(s,o,a,u,y):y(s,o,a,u)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return zh.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ao.InlineValueFeature=yl});var Bh=k(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.InlayHintsFeature=void 0;var Gh=require("vscode"),Gr=ne(),Ai=me(),vl=class extends Ai.TextDocumentLanguageFeature{constructor(e){super(e,Gr.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,Ai.ensure)((0,Ai.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Ai.ensure)((0,Ai.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(Gr.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Gh.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,a)=>{let u=this._client,h=async(C,m,w)=>{let v={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),range:u.code2ProtocolConverter.asRange(m)};try{let q=await u.sendRequest(Gr.InlayHintRequest.type,v,w);return w.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(q,w)}catch(q){return u.handleFailedRequest(Gr.InlayHintRequest.type,w,q,null)}},y=u.middleware;return y.provideInlayHints?y.provideInlayHints(s,o,a,h):h(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,u=async(y,C)=>{try{let m=await a.sendRequest(Gr.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(y),C);if(C.isCancellationRequested)return null;let w=a.protocol2CodeConverter.asInlayHint(m,C);return C.isCancellationRequested?null:w}catch(m){return a.handleFailedRequest(Gr.InlayHintResolveRequest.type,C,m,null)}},h=a.middleware;return h.resolveInlayHint?h.resolveInlayHint(s,o,u):u(s,o)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return Gh.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};co.InlayHintsFeature=vl});var bl=k(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ProposedFeatures=Fe.BaseLanguageClient=Fe.MessageTransports=Fe.SuspendMode=Fe.State=Fe.CloseAction=Fe.ErrorAction=Fe.RevealOutputChannelOn=void 0;var Re=require("vscode"),A=ne(),PD=qf(),qD=If(),Cn=Wt(),uo=ys(),Xh=$e(),ED=Sc(),cn=me(),kD=zc(),Qh=oh(),Jh=ch(),Br=uh(),ID=lh(),xD=dh(),OD=fh(),FD=gh(),ND=ph(),MD=mu(),LD=yh(),AD=vh(),jD=Ch(),$D=_h(),Cl=bh(),HD=Sh(),UD=wh(),WD=Ph(),KD=qh(),zD=Eh(),VD=kh(),GD=Ih(),BD=xh(),XD=Oh(),QD=Fh(),JD=Nh(),YD=Lh(),ZD=Ah(),e_=jh(),Xr=Uh(),t_=Wh(),n_=Kh(),r_=Vh(),i_=Bh(),ji;(function(n){n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(ji=Fe.RevealOutputChannelOn||(Fe.RevealOutputChannelOn={}));var fo;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(fo=Fe.ErrorAction||(Fe.ErrorAction={}));var Dr;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(Dr=Fe.CloseAction||(Fe.CloseAction={}));var lo;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(lo=Fe.State||(Fe.State={}));var s_;(function(n){n.off="off",n.on="on"})(s_=Fe.SuspendMode||(Fe.SuspendMode={}));var Dl=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:fo.Continue}:{action:fo.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Dr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Dr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Dr.Restart})}},ce;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(ce||(ce={}));var o_;(function(n){function e(t){return t&&A.MessageReader.is(t.reader)&&A.MessageWriter.is(t.writer)}n.is=e})(o_=Fe.MessageTransports||(Fe.MessageTransports={}));var $i=class n{constructor(e,t,r){this._traceFormat=A.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new uo.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??ji.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ce.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new uo.Semaphore(1),this._pendingChangeDelayer=new uo.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new uo.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new A.Emitter,this._stateChangeEmitter=new A.Emitter,this._trace=A.Trace.Off,this._tracer={log:(s,o)=>{Cn.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=PD.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=qD.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Re.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case ce.Starting:return lo.Starting;case ce.Running:return lo.Running;default:return lo.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===ce.StartFailed||this.$state===ce.Stopping||this.$state===ce.Stopped)return Promise.reject(new A.ResponseError(A.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();return this._didChangeTextDocumentFeature.syncKind===A.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r),r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,t){if(this.$state===ce.StartFailed||this.$state===ce.Stopping||this.$state===ce.Stopped)return Promise.reject(new A.ResponseError(A.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===A.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===A.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let s=await this.$start();return r&&await this.sendPendingFullTextDocumentChanges(s),i!==void 0&&this._pendingOpenNotifications.delete(i),s.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,t,r){if(this.$state===ce.StartFailed||this.$state===ce.Stopping||this.$state===ce.Stopped)return Promise.reject(new A.ResponseError(A.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,a=A.WorkDoneProgress.is(e)&&o!==void 0?u=>{o(t,u,()=>r(u))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,a)),s={dispose:()=>{let u=this._progressDisposables.get(t);u!==void 0&&(u.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(t);let u=this._progressDisposables.get(t);u!==void 0&&(u.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Dl(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof A.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?Cn.string(e.stack)?e.stack:e.message:Cn.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=ji.Info&&this.showNotificationMessage(A.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=ji.Warn&&this.showNotificationMessage(A.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=ji.Error)&&this.showNotificationMessage(A.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===A.MessageType.Error?Re.window.showErrorMessage:e===A.MessageType.Warning?Re.window.showWarningMessage:Re.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===ce.Initial||this.$state===ce.Stopping||this.$state===ce.Stopped}needsStop(){return this.$state===ce.Starting||this.$state===ce.Running}activeConnection(){return this.$state===ce.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===ce.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===ce.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?Re.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Re.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=ce.Starting;try{let i=await this.createConnection();i.onNotification(A.LogMessageNotification.type,s=>{switch(s.type){case A.MessageType.Error:this.error(s.message,void 0,!1);break;case A.MessageType.Warning:this.warn(s.message,void 0,!1);break;case A.MessageType.Info:this.info(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(A.ShowMessageNotification.type,s=>{switch(s.type){case A.MessageType.Error:Re.window.showErrorMessage(s.message);break;case A.MessageType.Warning:Re.window.showWarningMessage(s.message);break;case A.MessageType.Info:Re.window.showInformationMessage(s.message);break;default:Re.window.showInformationMessage(s.message)}}),i.onRequest(A.ShowMessageRequest.type,s=>{let o;switch(s.type){case A.MessageType.Error:o=Re.window.showErrorMessage;break;case A.MessageType.Warning:o=Re.window.showWarningMessage;break;case A.MessageType.Info:o=Re.window.showInformationMessage;break;default:o=Re.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification(A.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(A.ShowDocumentRequest.type,async s=>{let o=async u=>{let h=this.protocol2CodeConverter.asUri(u.uri);try{if(u.external===!0)return{success:await Re.env.openExternal(h)};{let y={};return u.selection!==void 0&&(y.selection=this.protocol2CodeConverter.asRange(u.selection)),u.takeFocus===void 0||u.takeFocus===!1?y.preserveFocus=!0:u.takeFocus===!0&&(y.preserveFocus=!1),await Re.window.showTextDocument(h,y),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=ce.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,s)=>{e=i,t=s}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:Re.env.appName,version:Re.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(Re.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Cn.func(t)?t():t,trace:A.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=Xh.generateUuid(),a=new ED.ProgressPart(e,o);s.workDoneToken=o;try{let u=await this.doInitialize(e,s);return a.done(),u}catch(u){throw a.cancel(),u}}else return this.doInitialize(e,s)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==A.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=ce.Running;let i;Cn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===A.TextDocumentSyncKind.None?i={openClose:!1,change:A.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(A.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(A.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(A.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(A.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(A.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof A.ResponseError&&r.data&&r.data.retry?Re.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&Re.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=Re.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===ce.Stopped||this.$state===ce.Initial)return;if(this.$state===ce.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==ce.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=ce.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,A.RAL)().timer.setTimeout(o,t)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=ce.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(s){return t._fileEvents.push(s),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(A.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(s=>{t.error("Notify file events failed.",s)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(A.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,A.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,A.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new Re.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(t),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(u,h)=>this.setDiagnostics(u,h)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return Re.env.language}async $start(){if(this.$state===ce.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o).catch(a=>this.error("Handling connection error failed",a))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=a_(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===ce.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Dr.DoNotRestart};if(this.$state!==ce.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Dr.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===ce.Starting?this.$state=ce.StartFailed:this.$state=ce.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Dr.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=ce.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===fo.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){this._listeners.push(Re.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=Re.workspace.getConfiguration(this._id),i=A.Trace.Off,s=A.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=A.Trace.fromString(o):(i=A.Trace.fromString(r.get("trace.server.verbosity","off")),s=A.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;Cn.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get(A.DidChangeWatchedFilesNotification.type.method).registerRaw(Xh.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),cn.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(A.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof Qh.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new Jh.ConfigurationFeature(this)),this.registerFeature(new Br.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new Br.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new Br.WillSaveFeature(this)),this.registerFeature(new Br.WillSaveWaitUntilFeature(this)),this.registerFeature(new Br.DidSaveTextDocumentFeature(this)),this.registerFeature(new Br.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new KD.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new ID.CompletionItemFeature(this)),this.registerFeature(new xD.HoverFeature(this)),this.registerFeature(new FD.SignatureHelpFeature(this)),this.registerFeature(new OD.DefinitionFeature(this)),this.registerFeature(new AD.ReferencesFeature(this)),this.registerFeature(new ND.DocumentHighlightFeature(this)),this.registerFeature(new MD.DocumentSymbolFeature(this)),this.registerFeature(new LD.WorkspaceSymbolFeature(this)),this.registerFeature(new jD.CodeActionFeature(this)),this.registerFeature(new $D.CodeLensFeature(this)),this.registerFeature(new Cl.DocumentFormattingFeature(this)),this.registerFeature(new Cl.DocumentRangeFormattingFeature(this)),this.registerFeature(new Cl.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new HD.RenameFeature(this)),this.registerFeature(new UD.DocumentLinkFeature(this)),this.registerFeature(new WD.ExecuteCommandFeature(this)),this.registerFeature(new Jh.SyncConfigurationFeature(this)),this.registerFeature(new GD.TypeDefinitionFeature(this)),this.registerFeature(new VD.ImplementationFeature(this)),this.registerFeature(new zD.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new BD.WorkspaceFoldersFeature(this)),this.registerFeature(new XD.FoldingRangeFeature(this)),this.registerFeature(new QD.DeclarationFeature(this)),this.registerFeature(new JD.SelectionRangeFeature(this)),this.registerFeature(new YD.ProgressFeature(this)),this.registerFeature(new ZD.CallHierarchyFeature(this)),this.registerFeature(new e_.SemanticTokensFeature(this)),this.registerFeature(new t_.LinkedEditingFeature(this)),this.registerFeature(new Xr.DidCreateFilesFeature(this)),this.registerFeature(new Xr.DidRenameFilesFeature(this)),this.registerFeature(new Xr.DidDeleteFilesFeature(this)),this.registerFeature(new Xr.WillCreateFilesFeature(this)),this.registerFeature(new Xr.WillRenameFilesFeature(this)),this.registerFeature(new Xr.WillDeleteFilesFeature(this)),this.registerFeature(new n_.TypeHierarchyFeature(this)),this.registerFeature(new r_.InlineValueFeature(this)),this.registerFeature(new i_.InlayHintsFeature(this)),this.registerFeature(new kD.DiagnosticFeature(this)),this.registerFeature(new Qh.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Yh.createAll(this))}fillInitializeParams(e){for(let t of this._features)Cn.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,cn.ensure)(e,"workspace").applyEdit=!0;let t=(0,cn.ensure)((0,cn.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[A.ResourceOperationKind.Create,A.ResourceOperationKind.Rename,A.ResourceOperationKind.Delete],t.failureHandling=A.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,cn.ensure)((0,cn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[A.DiagnosticTag.Unnecessary,A.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,cn.ensure)(e,"window"),s=(0,cn.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,cn.ensure)(i,"showDocument");o.support=!0;let a=(0,cn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(n.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)Cn.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:t.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;Re.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(t.documentChanges){for(let o of t.documentChanges)if(A.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=this._p2c.asUri(o.textDocument.uri).toString(),u=i.get(a);if(u&&u.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):Cn.asPromise(Re.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,t,r,i,s=!0){if(r instanceof A.ResponseError){if(r.code===A.ErrorCodes.PendingResponseRejected||r.code===A.ErrorCodes.ConnectionInactive)return i;if(r.code===A.LSPErrorCodes.RequestCancelled||r.code===A.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new cn.LSPCancellationError(r.data):new Re.CancellationError}else if(r.code===A.LSPErrorCodes.ContentModified){if(n.RequestsToCancelOnContentModified.has(e.method)||n.CancellableResolveCalls.has(e.method))throw new Re.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};Fe.BaseLanguageClient=$i;$i.RequestsToCancelOnContentModified=new Set([A.SemanticTokensRequest.method,A.SemanticTokensRangeRequest.method,A.SemanticTokensDeltaRequest.method]);$i.CancellableResolveCalls=new Set([A.CompletionResolveRequest.method,A.CodeLensResolveRequest.method,A.CodeActionResolveRequest.method,A.InlayHintResolveRequest.method,A.DocumentLinkResolveRequest.method,A.WorkspaceSymbolResolveRequest.method]);var _l=class{error(e){(0,A.RAL)().console.error(e)}warn(e){(0,A.RAL)().console.warn(e)}info(e){(0,A.RAL)().console.info(e)}log(e){(0,A.RAL)().console.log(e)}};function a_(n,e,t,r,i){let s=new _l,o=(0,A.createProtocolConnection)(n,e,s,i);return o.onError(u=>{t(u[0],u[1],u[2])}),o.onClose(r),{listen:()=>o.listen(),sendRequest:o.sendRequest,onRequest:o.onRequest,hasPendingResponse:o.hasPendingResponse,sendNotification:o.sendNotification,onNotification:o.onNotification,onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(u,h,y)=>{let C={sendNotification:!1,traceFormat:A.TraceFormat.Text};return y===void 0?o.trace(u,h,C):(Cn.boolean(y),o.trace(u,h,y))},initialize:u=>o.sendRequest(A.InitializeRequest.type,u),shutdown:()=>o.sendRequest(A.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(A.ExitNotification.type),end:()=>o.end(),dispose:()=>o.dispose()}}var Yh;(function(n){function e(t){return[]}n.createAll=e})(Yh=Fe.ProposedFeatures||(Fe.ProposedFeatures={}))});var eg=k(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.terminate=void 0;var Zh=require("child_process"),c_=require("path"),u_=process.platform==="win32",l_=process.platform==="darwin",d_=process.platform==="linux";function f_(n,e){if(u_)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Zh.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if(d_||l_)try{var t=(0,c_.join)(__dirname,"terminateProcess.sh"),r=Zh.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}ho.terminate=f_});var Rl=k((ES,tg)=>{"use strict";tg.exports=ne()});var Hi=k((kS,ng)=>{var h_=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};ng.exports=h_});var go=k((IS,rg)=>{var g_="2.0.0",p_=Number.MAX_SAFE_INTEGER||9007199254740991,m_=16,y_=256-6,v_=["major","premajor","minor","preminor","patch","prepatch","prerelease"];rg.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:m_,MAX_SAFE_BUILD_LENGTH:y_,MAX_SAFE_INTEGER:p_,RELEASE_TYPES:v_,SEMVER_SPEC_VERSION:g_,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var po=k((Ln,ig)=>{var{MAX_SAFE_COMPONENT_LENGTH:Sl,MAX_SAFE_BUILD_LENGTH:C_,MAX_LENGTH:D_}=go(),__=Hi();Ln=ig.exports={};var b_=Ln.re=[],R_=Ln.safeRe=[],V=Ln.src=[],G=Ln.t={},S_=0,wl="[a-zA-Z0-9-]",w_=[["\\s",1],["\\d",D_],[wl,C_]],T_=n=>{for(let[e,t]of w_)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},ae=(n,e,t)=>{let r=T_(e),i=S_++;__(n,i,e),G[n]=i,V[i]=e,b_[i]=new RegExp(e,t?"g":void 0),R_[i]=new RegExp(r,t?"g":void 0)};ae("NUMERICIDENTIFIER","0|[1-9]\\d*");ae("NUMERICIDENTIFIERLOOSE","\\d+");ae("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${wl}*`);ae("MAINVERSION",`(${V[G.NUMERICIDENTIFIER]})\\.(${V[G.NUMERICIDENTIFIER]})\\.(${V[G.NUMERICIDENTIFIER]})`);ae("MAINVERSIONLOOSE",`(${V[G.NUMERICIDENTIFIERLOOSE]})\\.(${V[G.NUMERICIDENTIFIERLOOSE]})\\.(${V[G.NUMERICIDENTIFIERLOOSE]})`);ae("PRERELEASEIDENTIFIER",`(?:${V[G.NUMERICIDENTIFIER]}|${V[G.NONNUMERICIDENTIFIER]})`);ae("PRERELEASEIDENTIFIERLOOSE",`(?:${V[G.NUMERICIDENTIFIERLOOSE]}|${V[G.NONNUMERICIDENTIFIER]})`);ae("PRERELEASE",`(?:-(${V[G.PRERELEASEIDENTIFIER]}(?:\\.${V[G.PRERELEASEIDENTIFIER]})*))`);ae("PRERELEASELOOSE",`(?:-?(${V[G.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${V[G.PRERELEASEIDENTIFIERLOOSE]})*))`);ae("BUILDIDENTIFIER",`${wl}+`);ae("BUILD",`(?:\\+(${V[G.BUILDIDENTIFIER]}(?:\\.${V[G.BUILDIDENTIFIER]})*))`);ae("FULLPLAIN",`v?${V[G.MAINVERSION]}${V[G.PRERELEASE]}?${V[G.BUILD]}?`);ae("FULL",`^${V[G.FULLPLAIN]}$`);ae("LOOSEPLAIN",`[v=\\s]*${V[G.MAINVERSIONLOOSE]}${V[G.PRERELEASELOOSE]}?${V[G.BUILD]}?`);ae("LOOSE",`^${V[G.LOOSEPLAIN]}$`);ae("GTLT","((?:<|>)?=?)");ae("XRANGEIDENTIFIERLOOSE",`${V[G.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ae("XRANGEIDENTIFIER",`${V[G.NUMERICIDENTIFIER]}|x|X|\\*`);ae("XRANGEPLAIN",`[v=\\s]*(${V[G.XRANGEIDENTIFIER]})(?:\\.(${V[G.XRANGEIDENTIFIER]})(?:\\.(${V[G.XRANGEIDENTIFIER]})(?:${V[G.PRERELEASE]})?${V[G.BUILD]}?)?)?`);ae("XRANGEPLAINLOOSE",`[v=\\s]*(${V[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${V[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${V[G.XRANGEIDENTIFIERLOOSE]})(?:${V[G.PRERELEASELOOSE]})?${V[G.BUILD]}?)?)?`);ae("XRANGE",`^${V[G.GTLT]}\\s*${V[G.XRANGEPLAIN]}$`);ae("XRANGELOOSE",`^${V[G.GTLT]}\\s*${V[G.XRANGEPLAINLOOSE]}$`);ae("COERCE",`(^|[^\\d])(\\d{1,${Sl}})(?:\\.(\\d{1,${Sl}}))?(?:\\.(\\d{1,${Sl}}))?(?:$|[^\\d])`);ae("COERCERTL",V[G.COERCE],!0);ae("LONETILDE","(?:~>?)");ae("TILDETRIM",`(\\s*)${V[G.LONETILDE]}\\s+`,!0);Ln.tildeTrimReplace="$1~";ae("TILDE",`^${V[G.LONETILDE]}${V[G.XRANGEPLAIN]}$`);ae("TILDELOOSE",`^${V[G.LONETILDE]}${V[G.XRANGEPLAINLOOSE]}$`);ae("LONECARET","(?:\\^)");ae("CARETTRIM",`(\\s*)${V[G.LONECARET]}\\s+`,!0);Ln.caretTrimReplace="$1^";ae("CARET",`^${V[G.LONECARET]}${V[G.XRANGEPLAIN]}$`);ae("CARETLOOSE",`^${V[G.LONECARET]}${V[G.XRANGEPLAINLOOSE]}$`);ae("COMPARATORLOOSE",`^${V[G.GTLT]}\\s*(${V[G.LOOSEPLAIN]})$|^$`);ae("COMPARATOR",`^${V[G.GTLT]}\\s*(${V[G.FULLPLAIN]})$|^$`);ae("COMPARATORTRIM",`(\\s*)${V[G.GTLT]}\\s*(${V[G.LOOSEPLAIN]}|${V[G.XRANGEPLAIN]})`,!0);Ln.comparatorTrimReplace="$1$2$3";ae("HYPHENRANGE",`^\\s*(${V[G.XRANGEPLAIN]})\\s+-\\s+(${V[G.XRANGEPLAIN]})\\s*$`);ae("HYPHENRANGELOOSE",`^\\s*(${V[G.XRANGEPLAINLOOSE]})\\s+-\\s+(${V[G.XRANGEPLAINLOOSE]})\\s*$`);ae("STAR","(<|>)?=?\\s*\\*");ae("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ae("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var mo=k((xS,sg)=>{var P_=Object.freeze({loose:!0}),q_=Object.freeze({}),E_=n=>n?typeof n!="object"?P_:n:q_;sg.exports=E_});var ug=k((OS,cg)=>{var og=/^[0-9]+$/,ag=(n,e)=>{let t=og.test(n),r=og.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},k_=(n,e)=>ag(e,n);cg.exports={compareIdentifiers:ag,rcompareIdentifiers:k_}});var Ui=k((FS,hg)=>{var yo=Hi(),{MAX_LENGTH:lg,MAX_SAFE_INTEGER:vo}=go(),{safeRe:dg,t:fg}=po(),I_=mo(),{compareIdentifiers:Qr}=ug(),Tl=class n{constructor(e,t){if(t=I_(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>lg)throw new TypeError(`version is longer than ${lg} characters`);yo("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?dg[fg.LOOSE]:dg[fg.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>vo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vo||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<vo)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(yo("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),Qr(this.major,e.major)||Qr(this.minor,e.minor)||Qr(this.patch,e.patch)}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(yo("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Qr(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(yo("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Qr(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];r===!1&&(s=[t]),Qr(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};hg.exports=Tl});var mg=k((NS,pg)=>{var gg=Ui(),x_=(n,e,t=!1)=>{if(n instanceof gg)return n;try{return new gg(n,e)}catch(r){if(!t)return null;throw r}};pg.exports=x_});var vg=k((MS,yg)=>{"use strict";yg.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Dg=k((LS,Cg)=>{"use strict";Cg.exports=De;De.Node=_r;De.create=De;function De(n){var e=this;if(e instanceof De||(e=new De),e.tail=null,e.head=null,e.length=0,n&&typeof n.forEach=="function")n.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}De.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var e=n.next,t=n.prev;return e&&(e.prev=t),t&&(t.next=e),n===this.head&&(this.head=e),n===this.tail&&(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};De.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&&(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};De.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&&(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};De.prototype.push=function(){for(var n=0,e=arguments.length;n<e;n++)F_(this,arguments[n]);return this.length};De.prototype.unshift=function(){for(var n=0,e=arguments.length;n<e;n++)N_(this,arguments[n]);return this.length};De.prototype.pop=function(){if(this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};De.prototype.shift=function(){if(this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};De.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)n.call(e,t.value,r,this),t=t.next};De.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)n.call(e,t.value,r,this),t=t.prev};De.prototype.get=function(n){for(var e=0,t=this.head;t!==null&&e<n;e++)t=t.next;if(e===n&&t!==null)return t.value};De.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&&e<n;e++)t=t.prev;if(e===n&&t!==null)return t.value};De.prototype.map=function(n,e){e=e||this;for(var t=new De,r=this.head;r!==null;)t.push(n.call(e,r.value,this)),r=r.next;return t};De.prototype.mapReverse=function(n,e){e=e||this;for(var t=new De,r=this.tail;r!==null;)t.push(n.call(e,r.value,this)),r=r.prev;return t};De.prototype.reduce=function(n,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)t=n(t,r.value,i),r=r.next;return t};De.prototype.reduceReverse=function(n,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)t=n(t,r.value,i),r=r.prev;return t};De.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};De.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};De.prototype.slice=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new De;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)t.push(i.value);return t};De.prototype.sliceReverse=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new De;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>n;r--,i=i.prev)t.push(i.value);return t};De.prototype.splice=function(n,e,...t){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<t.length;r++)i=O_(this,i,t[r]);return s};De.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=n,this};function O_(n,e,t){var r=e===n.head?new _r(t,null,e,n):new _r(t,e,e.next,n);return r.next===null&&(n.tail=r),r.prev===null&&(n.head=r),n.length++,r}function F_(n,e){n.tail=new _r(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function N_(n,e){n.head=new _r(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function _r(n,e,t,r){if(!(this instanceof _r))return new _r(n,e,t,r);this.list=r,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{vg()(De)}catch{}});var wg=k((AS,Sg)=>{"use strict";var M_=Dg(),br=Symbol("max"),jn=Symbol("length"),Jr=Symbol("lengthCalculator"),Ki=Symbol("allowStale"),Rr=Symbol("maxAge"),An=Symbol("dispose"),_g=Symbol("noDisposeOnSet"),rt=Symbol("lruList"),un=Symbol("cache"),Rg=Symbol("updateAgeOnGet"),Pl=()=>1,El=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[br]=e.max||1/0,r=e.length||Pl;if(this[Jr]=typeof r!="function"?Pl:r,this[Ki]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Rr]=e.maxAge||0,this[An]=e.dispose,this[_g]=e.noDisposeOnSet||!1,this[Rg]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[br]=e||1/0,Wi(this)}get max(){return this[br]}set allowStale(e){this[Ki]=!!e}get allowStale(){return this[Ki]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Rr]=e,Wi(this)}get maxAge(){return this[Rr]}set lengthCalculator(e){typeof e!="function"&&(e=Pl),e!==this[Jr]&&(this[Jr]=e,this[jn]=0,this[rt].forEach(t=>{t.length=this[Jr](t.value,t.key),this[jn]+=t.length})),Wi(this)}get lengthCalculator(){return this[Jr]}get length(){return this[jn]}get itemCount(){return this[rt].length}rforEach(e,t){t=t||this;for(let r=this[rt].tail;r!==null;){let i=r.prev;bg(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[rt].head;r!==null;){let i=r.next;bg(this,e,r,t),r=i}}keys(){return this[rt].toArray().map(e=>e.key)}values(){return this[rt].toArray().map(e=>e.value)}reset(){this[An]&&this[rt]&&this[rt].length&&this[rt].forEach(e=>this[An](e.key,e.value)),this[un]=new Map,this[rt]=new M_,this[jn]=0}dump(){return this[rt].map(e=>Co(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[rt]}set(e,t,r){if(r=r||this[Rr],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[Jr](t,e);if(this[un].has(e)){if(s>this[br])return Yr(this,this[un].get(e)),!1;let u=this[un].get(e).value;return this[An]&&(this[_g]||this[An](e,u.value)),u.now=i,u.maxAge=r,u.value=t,this[jn]+=s-u.length,u.length=s,this.get(e),Wi(this),!0}let o=new kl(e,t,s,i,r);return o.length>this[br]?(this[An]&&this[An](e,t),!1):(this[jn]+=o.length,this[rt].unshift(o),this[un].set(e,this[rt].head),Wi(this),!0)}has(e){if(!this[un].has(e))return!1;let t=this[un].get(e).value;return!Co(this,t)}get(e){return ql(this,e,!0)}peek(e){return ql(this,e,!1)}pop(){let e=this[rt].tail;return e?(Yr(this,e),e.value):null}del(e){Yr(this,this[un].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-t;o>0&&this.set(i.k,i.v,o)}}}prune(){this[un].forEach((e,t)=>ql(this,t,!1))}},ql=(n,e,t)=>{let r=n[un].get(e);if(r){let i=r.value;if(Co(n,i)){if(Yr(n,r),!n[Ki])return}else t&&(n[Rg]&&(r.value.now=Date.now()),n[rt].unshiftNode(r));return i.value}},Co=(n,e)=>{if(!e||!e.maxAge&&!n[Rr])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:n[Rr]&&t>n[Rr]},Wi=n=>{if(n[jn]>n[br])for(let e=n[rt].tail;n[jn]>n[br]&&e!==null;){let t=e.prev;Yr(n,e),e=t}},Yr=(n,e)=>{if(e){let t=e.value;n[An]&&n[An](t.key,t.value),n[jn]-=t.length,n[un].delete(t.key),n[rt].removeNode(e)}},kl=class{constructor(e,t,r,i,s){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=s||0}},bg=(n,e,t,r)=>{let i=t.value;Co(n,i)&&(Yr(n,t),n[Ki]||(i=void 0)),i&&e.call(r,i.value,i.key,n)};Sg.exports=El});var Sr=k((jS,Pg)=>{var Tg=Ui(),L_=(n,e,t)=>new Tg(n,t).compare(new Tg(e,t));Pg.exports=L_});var Eg=k(($S,qg)=>{var A_=Sr(),j_=(n,e,t)=>A_(n,e,t)===0;qg.exports=j_});var Ig=k((HS,kg)=>{var $_=Sr(),H_=(n,e,t)=>$_(n,e,t)!==0;kg.exports=H_});var Og=k((US,xg)=>{var U_=Sr(),W_=(n,e,t)=>U_(n,e,t)>0;xg.exports=W_});var Ng=k((WS,Fg)=>{var K_=Sr(),z_=(n,e,t)=>K_(n,e,t)>=0;Fg.exports=z_});var Lg=k((KS,Mg)=>{var V_=Sr(),G_=(n,e,t)=>V_(n,e,t)<0;Mg.exports=G_});var jg=k((zS,Ag)=>{var B_=Sr(),X_=(n,e,t)=>B_(n,e,t)<=0;Ag.exports=X_});var Hg=k((VS,$g)=>{var Q_=Eg(),J_=Ig(),Y_=Og(),Z_=Ng(),eb=Lg(),tb=jg(),nb=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Q_(n,t,r);case"!=":return J_(n,t,r);case">":return Y_(n,t,r);case">=":return Z_(n,t,r);case"<":return eb(n,t,r);case"<=":return tb(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};$g.exports=nb});var Bg=k((GS,Gg)=>{var zi=Symbol("SemVer ANY"),Ol=class n{static get ANY(){return zi}constructor(e,t){if(t=Ug(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),xl("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===zi?this.value="":this.value=this.operator+this.semver.version,xl("comp",this)}parse(e){let t=this.options.loose?Wg[Kg.COMPARATORLOOSE]:Wg[Kg.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new zg(r[2],this.options.loose):this.semver=zi}toString(){return this.value}test(e){if(xl("Comparator.test",e,this.options.loose),this.semver===zi||e===zi)return!0;if(typeof e=="string")try{e=new zg(e,this.options)}catch{return!1}return Il(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Vg(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new Vg(this.value,t).test(e.semver):(t=Ug(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Il(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Il(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Gg.exports=Ol;var Ug=mo(),{safeRe:Wg,t:Kg}=po(),Il=Hg(),xl=Hi(),zg=Ui(),Vg=Fl()});var Fl=k((BS,Yg)=>{var Nl=class n{constructor(e,t){if(t=ib(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof Ml)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Qg(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&db(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&ub)|(this.options.loose&&lb))+":"+e,i=Xg.get(r);if(i)return i;let s=this.options.loose,o=s?Ot[Rt.HYPHENRANGELOOSE]:Ot[Rt.HYPHENRANGE];e=e.replace(o,_b(this.options.includePrerelease)),Ne("hyphen replace",e),e=e.replace(Ot[Rt.COMPARATORTRIM],ob),Ne("comparator trim",e),e=e.replace(Ot[Rt.TILDETRIM],ab),Ne("tilde trim",e),e=e.replace(Ot[Rt.CARETTRIM],cb),Ne("caret trim",e);let a=e.split(" ").map(C=>fb(C,this.options)).join(" ").split(/\s+/).map(C=>Db(C,this.options));s&&(a=a.filter(C=>(Ne("loose invalid filter",C,this.options),!!C.match(Ot[Rt.COMPARATORLOOSE])))),Ne("range list",a);let u=new Map,h=a.map(C=>new Ml(C,this.options));for(let C of h){if(Qg(C))return[C];u.set(C.value,C)}u.size>1&&u.has("")&&u.delete("");let y=[...u.values()];return Xg.set(r,y),y}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>Jg(r,t)&&e.set.some(i=>Jg(i,t)&&r.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new sb(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(bb(this.set[t],e,this.options))return!0;return!1}};Yg.exports=Nl;var rb=wg(),Xg=new rb({max:1e3}),ib=mo(),Ml=Bg(),Ne=Hi(),sb=Ui(),{safeRe:Ot,t:Rt,comparatorTrimReplace:ob,tildeTrimReplace:ab,caretTrimReplace:cb}=po(),{FLAG_INCLUDE_PRERELEASE:ub,FLAG_LOOSE:lb}=go(),Qg=n=>n.value==="<0.0.0-0",db=n=>n.value==="",Jg=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(s=>i.intersects(s,e)),i=r.pop();return t},fb=(n,e)=>(Ne("comp",n,e),n=pb(n,e),Ne("caret",n),n=hb(n,e),Ne("tildes",n),n=yb(n,e),Ne("xrange",n),n=Cb(n,e),Ne("stars",n),n),St=n=>!n||n.toLowerCase()==="x"||n==="*",hb=(n,e)=>n.trim().split(/\s+/).map(t=>gb(t,e)).join(" "),gb=(n,e)=>{let t=e.loose?Ot[Rt.TILDELOOSE]:Ot[Rt.TILDE];return n.replace(t,(r,i,s,o,a)=>{Ne("tilde",n,r,i,s,o,a);let u;return St(i)?u="":St(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:St(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Ne("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Ne("tilde return",u),u})},pb=(n,e)=>n.trim().split(/\s+/).map(t=>mb(t,e)).join(" "),mb=(n,e)=>{Ne("caret",n,e);let t=e.loose?Ot[Rt.CARETLOOSE]:Ot[Rt.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,s,o,a,u)=>{Ne("caret",n,i,s,o,a,u);let h;return St(s)?h="":St(o)?h=`>=${s}.0.0${r} <${+s+1}.0.0-0`:St(a)?s==="0"?h=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:h=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:u?(Ne("replaceCaret pr",u),s==="0"?o==="0"?h=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:h=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:h=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(Ne("no pr"),s==="0"?o==="0"?h=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:h=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:h=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Ne("caret return",h),h})},yb=(n,e)=>(Ne("replaceXRanges",n,e),n.split(/\s+/).map(t=>vb(t,e)).join(" ")),vb=(n,e)=>{n=n.trim();let t=e.loose?Ot[Rt.XRANGELOOSE]:Ot[Rt.XRANGE];return n.replace(t,(r,i,s,o,a,u)=>{Ne("xRange",n,r,i,s,o,a,u);let h=St(s),y=h||St(o),C=y||St(a),m=C;return i==="="&&m&&(i=""),u=e.includePrerelease?"-0":"",h?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&m?(y&&(o=0),a=0,i===">"?(i=">=",y?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",y?s=+s+1:o=+o+1),i==="<"&&(u="-0"),r=`${i+s}.${o}.${a}${u}`):y?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:C&&(r=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Ne("xRange return",r),r})},Cb=(n,e)=>(Ne("replaceStars",n,e),n.trim().replace(Ot[Rt.STAR],"")),Db=(n,e)=>(Ne("replaceGTE0",n,e),n.trim().replace(Ot[e.includePrerelease?Rt.GTE0PRE:Rt.GTE0],"")),_b=n=>(e,t,r,i,s,o,a,u,h,y,C,m,w)=>(St(r)?t="":St(i)?t=`>=${r}.0.0${n?"-0":""}`:St(s)?t=`>=${r}.${i}.0${n?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,St(h)?u="":St(y)?u=`<${+h+1}.0.0-0`:St(C)?u=`<${h}.${+y+1}.0-0`:m?u=`<=${h}.${y}.${C}-${m}`:n?u=`<${h}.${y}.${+C+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),bb=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(Ne(n[r].semver),n[r].semver!==Ml.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ep=k((XS,Zg)=>{var Rb=Fl(),Sb=(n,e,t)=>{try{e=new Rb(e,t)}catch{return!1}return e.test(n)};Zg.exports=Sb});var np=k(Ht=>{"use strict";var wb=Ht&&Ht.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ll=Ht&&Ht.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&wb(e,n,t)};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.DiagnosticPullMode=Ht.vsdiag=void 0;Ll(ne(),Ht);Ll(me(),Ht);var tp=zc();Object.defineProperty(Ht,"vsdiag",{enumerable:!0,get:function(){return tp.vsdiag}});Object.defineProperty(Ht,"DiagnosticPullMode",{enumerable:!0,get:function(){return tp.DiagnosticPullMode}});Ll(bl(),Ht)});var op=k(wt=>{"use strict";var Tb=wt&&wt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),sp=wt&&wt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Tb(e,n,t)};Object.defineProperty(wt,"__esModule",{value:!0});wt.SettingMonitor=wt.LanguageClient=wt.TransportKind=void 0;var $n=require("child_process"),Al=require("fs"),jl=require("path"),rr=require("vscode"),Me=Wt(),rp=bl(),Pb=eg(),Ue=Rl(),qb=mg(),Eb=ep();sp(Rl(),wt);sp(np(),wt);var ip="^1.67.0",Ve;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(Ve=wt.TransportKind||(wt.TransportKind={}));var nr;(function(n){function e(t){let r=t;return r&&r.kind===Ve.socket&&Me.number(r.port)}n.isSocket=e})(nr||(nr={}));var $l;(function(n){function e(t){return Me.string(t.command)}n.is=e})($l||($l={}));var Hl;(function(n){function e(t){return Me.string(t.module)}n.is=e})(Hl||(Hl={}));var Ul;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})(Ul||(Ul={}));var Wl;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})(Wl||(Wl={}));var Kl=class extends rp.BaseLanguageClient{constructor(e,t,r,i,s){let o,a,u,h,y;Me.string(t)?(o=e,a=t,u=r,h=i,y=!!s):(o=e.toLowerCase(),a=e,u=t,h=r,y=i),y===void 0&&(y=!1),super(o,a,h),this._serverOptions=u,this._forceDebug=y,this._isInDebugMode=y;try{this.checkVersion()}catch(C){throw Me.string(C.message)&&this.outputChannel.appendLine(C.message),C}}checkVersion(){let e=qb(rr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${rr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Eb(e,ip))throw new Error(`The language client requires VS Code version ${ip} but received version ${rr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,Pb.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(y,C){if(!y&&!C)return;let m=Object.create(null);return Object.keys(process.env).forEach(w=>m[w]=process.env[w]),C&&(m.ELECTRON_RUN_AS_NODE="1",m.ELECTRON_NO_ASAR="1"),y&&Object.keys(y).forEach(w=>m[w]=y[w]),m}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let y=process.execArgv;return y?y.some(C=>r.some(m=>C.startsWith(m))||i.some(m=>C===m)):!1}function o(y){if(y.stdin===null||y.stdout===null||y.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Me.func(a))return a().then(y=>{if(rp.MessageTransports.is(y))return this._isDetached=!!y.detached,y;if(Ul.is(y))return this._isDetached=!!y.detached,{reader:new Ue.StreamMessageReader(y.reader),writer:new Ue.StreamMessageWriter(y.writer)};{let C;return Wl.is(y)?(C=y.process,this._isDetached=y.detached):(C=y,this._isDetached=!1),C.stderr.on("data",m=>this.outputChannel.append(Me.string(m)?m:m.toString(e))),{reader:new Ue.StreamMessageReader(C.stdout),writer:new Ue.StreamMessageWriter(C.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||s()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(y=>{if(Hl.is(u)&&u.module){let C=u,m=C.transport||Ve.stdio;if(C.runtime){let w=[],v=C.options??Object.create(null);v.execArgv&&v.execArgv.forEach(L=>w.push(L)),w.push(C.module),C.args&&C.args.forEach(L=>w.push(L));let q=Object.create(null);q.cwd=y,q.env=t(v.env,!1);let E=this._getRuntimePath(C.runtime,y),N;if(m===Ve.ipc?(q.stdio=[null,null,null,"ipc"],w.push("--node-ipc")):m===Ve.stdio?w.push("--stdio"):m===Ve.pipe?(N=(0,Ue.generateRandomPipeName)(),w.push(`--pipe=${N}`)):nr.isSocket(m)&&w.push(`--socket=${m.port}`),w.push(`--clientProcessId=${process.pid.toString()}`),m===Ve.ipc||m===Ve.stdio){let L=$n.spawn(E,w,q);return!L||!L.pid?Zr(L,`Launching server using runtime ${E} failed.`):(this._serverProcess=L,L.stderr.on("data",M=>this.outputChannel.append(Me.string(M)?M:M.toString(e))),m===Ve.ipc?(L.stdout.on("data",M=>this.outputChannel.append(Me.string(M)?M:M.toString(e))),Promise.resolve({reader:new Ue.IPCMessageReader(L),writer:new Ue.IPCMessageWriter(L)})):Promise.resolve({reader:new Ue.StreamMessageReader(L.stdout),writer:new Ue.StreamMessageWriter(L.stdin)}))}else{if(m===Ve.pipe)return(0,Ue.createClientPipeTransport)(N).then(L=>{let M=$n.spawn(E,w,q);return!M||!M.pid?Zr(M,`Launching server using runtime ${E} failed.`):(this._serverProcess=M,M.stderr.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),M.stdout.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),L.onConnected().then(H=>({reader:H[0],writer:H[1]})))});if(nr.isSocket(m))return(0,Ue.createClientSocketTransport)(m.port).then(L=>{let M=$n.spawn(E,w,q);return!M||!M.pid?Zr(M,`Launching server using runtime ${E} failed.`):(this._serverProcess=M,M.stderr.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),M.stdout.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),L.onConnected().then(H=>({reader:H[0],writer:H[1]})))})}}else{let w;return new Promise((v,q)=>{let E=(C.args&&C.args.slice())??[];m===Ve.ipc?E.push("--node-ipc"):m===Ve.stdio?E.push("--stdio"):m===Ve.pipe?(w=(0,Ue.generateRandomPipeName)(),E.push(`--pipe=${w}`)):nr.isSocket(m)&&E.push(`--socket=${m.port}`),E.push(`--clientProcessId=${process.pid.toString()}`);let N=C.options??Object.create(null);if(N.env=t(N.env,!0),N.execArgv=N.execArgv||[],N.cwd=y,N.silent=!0,m===Ve.ipc||m===Ve.stdio){let L=$n.fork(C.module,E||[],N);o(L),this._serverProcess=L,L.stderr.on("data",M=>this.outputChannel.append(Me.string(M)?M:M.toString(e))),m===Ve.ipc?(L.stdout.on("data",M=>this.outputChannel.append(Me.string(M)?M:M.toString(e))),v({reader:new Ue.IPCMessageReader(this._serverProcess),writer:new Ue.IPCMessageWriter(this._serverProcess)})):v({reader:new Ue.StreamMessageReader(L.stdout),writer:new Ue.StreamMessageWriter(L.stdin)})}else m===Ve.pipe?(0,Ue.createClientPipeTransport)(w).then(L=>{let M=$n.fork(C.module,E||[],N);o(M),this._serverProcess=M,M.stderr.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),M.stdout.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),L.onConnected().then(H=>{v({reader:H[0],writer:H[1]})},q)},q):nr.isSocket(m)&&(0,Ue.createClientSocketTransport)(m.port).then(L=>{let M=$n.fork(C.module,E||[],N);o(M),this._serverProcess=M,M.stderr.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),M.stdout.on("data",H=>this.outputChannel.append(Me.string(H)?H:H.toString(e))),L.onConnected().then(H=>{v({reader:H[0],writer:H[1]})},q)},q)})}}else if($l.is(u)&&u.command){let C=u,m=u.args!==void 0?u.args.slice(0):[],w,v=u.transport;if(v===Ve.stdio)m.push("--stdio");else if(v===Ve.pipe)w=(0,Ue.generateRandomPipeName)(),m.push(`--pipe=${w}`);else if(nr.isSocket(v))m.push(`--socket=${v.port}`);else if(v===Ve.ipc)throw new Error("Transport kind ipc is not support for command executable");let q=Object.assign({},C.options);if(q.cwd=q.cwd||y,v===void 0||v===Ve.stdio){let E=$n.spawn(C.command,m,q);return!E||!E.pid?Zr(E,`Launching server using command ${C.command} failed.`):(E.stderr.on("data",N=>this.outputChannel.append(Me.string(N)?N:N.toString(e))),this._serverProcess=E,this._isDetached=!!q.detached,Promise.resolve({reader:new Ue.StreamMessageReader(E.stdout),writer:new Ue.StreamMessageWriter(E.stdin)}))}else{if(v===Ve.pipe)return(0,Ue.createClientPipeTransport)(w).then(E=>{let N=$n.spawn(C.command,m,q);return!N||!N.pid?Zr(N,`Launching server using command ${C.command} failed.`):(this._serverProcess=N,this._isDetached=!!q.detached,N.stderr.on("data",L=>this.outputChannel.append(Me.string(L)?L:L.toString(e))),N.stdout.on("data",L=>this.outputChannel.append(Me.string(L)?L:L.toString(e))),E.onConnected().then(L=>({reader:L[0],writer:L[1]})))});if(nr.isSocket(v))return(0,Ue.createClientSocketTransport)(v.port).then(E=>{let N=$n.spawn(C.command,m,q);return!N||!N.pid?Zr(N,`Launching server using command ${C.command} failed.`):(this._serverProcess=N,this._isDetached=!!q.detached,N.stderr.on("data",L=>this.outputChannel.append(Me.string(L)?L:L.toString(e))),N.stdout.on("data",L=>this.outputChannel.append(Me.string(L)?L:L.toString(e))),E.onConnected().then(L=>({reader:L[0],writer:L[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(jl.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=jl.join(r,e);if(Al.existsSync(i))return i}if(t!==void 0){let i=jl.join(t,e);if(Al.existsSync(i))return i}return e}_mainGetRootPath(){let e=rr.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{Al.lstat(t,(i,s)=>{r(!i&&s.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};wt.LanguageClient=Kl;var zl=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return rr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new rr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?rr.workspace.getConfiguration(t).get(r,!1):rr.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};wt.SettingMonitor=zl;function Zr(n,e){return n===null?Promise.reject(e):new Promise((t,r)=>{n.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var Bl=require("vscode"),kb=require("node:child_process"),Ib=require("node:net"),xb=op(),Do;function Vl(n,e){let t=Bl.workspace.getConfiguration().get(`understand.${n}`);if(typeof t!=e)switch(e){case"integer":return parseInt(t);case"string":return t.toString();case"number":return parseFloat(t);default:return t}return t}function Ob(n){switch(typeof n){case"undefined":return"undefined";case"object":return JSON.stringify(n);case"string":return n;case"number":case"boolean":default:return n.toString(n)}}function Gl(n){Bl.window.showErrorMessage(Ob(n))}function Fb(){let n=Vl("protocol","string"),e="userver",t=!1,r=[],i,s;switch(n){case"TCP":i="127.0.0.1",s=Vl("tcpPort","integer"),r.push("-tcp true"),r.push(`-tcp_port ${s}`);break;default:return Gl(`Value for understand.protocol is not a supported string: ${n}`)}let o=function(){return new Promise(function(w,v){let q=kb.spawn(e,r,{env:{},stdio:"ignore",detached:t});q.on("error",function(E){E.errno===-4058&&Gl("The command userver is not installed or not in your path"),v()}),q.on("spawn",function(){let E=!1,N=0,L=5,M=50,H=setInterval(function(){let B=Ib.connect({host:i,port:s});B.on("connect",function(){if(E){B.destroy();return}E=!0;let ue={writer:B,reader:B,detached:t};clearInterval(H),w(ue)}),N>=L&&(Gl(`Tried to connect to userver ${L} times, waiting for ${M} ms each time`),clearInterval(H),v()),N+=1},M)})})},a=[{scheme:"file",language:"ada"},{scheme:"file",language:"assembly"},{scheme:"file",language:"bat"},{scheme:"file",language:"c"},{scheme:"file",language:"cobol"},{scheme:"file",language:"cpp"},{scheme:"file",language:"csharp"},{scheme:"file",language:"css"},{scheme:"file",language:"cuda"},{scheme:"file",language:"delphi"},{scheme:"file",language:"fortran"},{scheme:"file",language:"html"},{scheme:"file",language:"java"},{scheme:"file",language:"javascript"},{scheme:"file",language:"javascriptreact"},{scheme:"file",language:"jovial"},{scheme:"file",language:"objective"},{scheme:"file",language:"objective"},{scheme:"file",language:"pascal"},{scheme:"file",language:"perl"},{scheme:"file",language:"php"},{scheme:"file",language:"python"},{scheme:"file",language:"python"},{scheme:"file",language:"tcl"},{scheme:"file",language:"text"},{scheme:"file",language:"typescript"},{scheme:"file",language:"typescriptreact"},{scheme:"file",language:"vb"},{scheme:"file",language:"verilog"},{scheme:"file",language:"vhdl"},{scheme:"file",language:"xml"}],u=Vl("watcherInclude","string"),h=Bl.workspace.createFileSystemWatcher(u),y={documentSelector:a,synchronize:{fileEvents:h}},C="UserverVscode",m="Userver VS Code";Do=new xb.LanguageClient(C,m,o,y),Do.start()}function Nb(){if(Do!==void 0)return Do.stop()}module.exports={activate:Fb,deactivate:Nb};
